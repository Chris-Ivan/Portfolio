{"version":3,"sources":["../../src/internal/Subscriber.ts","../node_modules/@sanity/client/lib/validators.js","../node_modules/@sanity/client/lib/sanityClient.js","../node_modules/@sanity/observable/operators/filter.js","../node_modules/@sanity/observable/operators/map.js","../../src/internal/config.ts","../node_modules/@sanity/client/lib/data/patch.js","../../../src/internal/util/isFunction.ts","../../src/internal/Observer.ts","../../../src/internal/util/hostReportError.ts","../../../src/internal/symbol/rxSubscriber.ts","../node_modules/@sanity/client/lib/util/getSelection.js","../node_modules/@sanity/client/lib/data/transaction.js","../node_modules/@sanity/client/lib/data/encodeQueryString.js","../node_modules/@sanity/observable/minimal.js","../../src/internal/Observable.ts","../../../src/internal/util/pipe.ts","../node_modules/@sanity/generate-help-url/index.js","../node_modules/@sanity/client/lib/util/once.js","../../../src/internal/operators/filter.ts","../../src/internal/Subscription.ts","../../../src/internal/util/isArray.ts","../../../src/internal/util/isObject.ts","../../../src/internal/util/UnsubscriptionError.ts","../../../src/internal/operators/map.ts","../node_modules/deep-assign/index.js","../node_modules/deep-assign/node_modules/is-obj/index.js","../node_modules/@sanity/client/lib/data/dataMethods.js","../node_modules/@sanity/client/lib/data/listen.js","../node_modules/@sanity/observable/lib/SanityObservableMinimal.js","../../../src/internal/util/canReportError.ts","../../../src/internal/util/toSubscriber.ts","../../../src/internal/symbol/observable.ts","../../../src/internal/util/identity.ts","../node_modules/@sanity/observable/operators/reduce.js","../../../src/internal/operators/reduce.ts","../../../src/internal/operators/scan.ts","../../../src/internal/operators/takeLast.ts","../../../src/internal/util/ArgumentOutOfRangeError.ts","../../../src/internal/observable/empty.ts","../../../src/internal/operators/defaultIfEmpty.ts","../node_modules/@sanity/eventsource/browser.js","../node_modules/@rexxars/eventsource-polyfill/src/eventsource.js","../node_modules/@sanity/client/lib/util/pick.js","../node_modules/@sanity/client/lib/util/defaults.js","../node_modules/@sanity/client/lib/datasets/datasetsClient.js","../node_modules/@sanity/client/lib/projects/projectsClient.js","../node_modules/@sanity/client/lib/assets/assetsClient.js","../node_modules/@sanity/client/lib/http/queryString.js","../node_modules/@sanity/client/lib/users/usersClient.js","../node_modules/@sanity/client/lib/auth/authClient.js","../node_modules/@sanity/client/lib/http/request.js","../node_modules/get-it/index.js","../../src/index.js","../node_modules/nano-pubsub/index.js","../../../src/util/middlewareReducer.js","../../../src/middleware/defaultOptionsProcessor.js","../node_modules/url-parse/index.js","../node_modules/requires-port/index.js","../node_modules/querystringify/index.js","../../../src/middleware/defaultOptionsValidator.js","../../../src/request/index.js","../../../src/request/browser-request.js","../node_modules/same-origin/index.js","../node_modules/same-origin/url-parser.js","../node_modules/parse-headers/parse-headers.js","../../../src/middleware/observable.js","../../../src/util/global.js","../../../src/middleware/jsonRequest.js","../node_modules/is-plain-object/index.js","../node_modules/isobject/index.js","../../../src/middleware/jsonResponse.js","../../../../src/middleware/progress/index.js","../../../../src/middleware/progress/browser-progress.js","../node_modules/@sanity/client/lib/http/errors.js","../node_modules/make-error/index.js","../node_modules/@sanity/client/lib/http/browserMiddleware.js","../node_modules/@sanity/client/lib/http/requestOptions.js","../node_modules/@sanity/client/lib/config.js"],"names":["SafeSubscriber","prototype","this","hostReportError_1","hostReportError","_typeof","obj","Symbol","iterator","constructor","VALID_ASSET_TYPES","VALID_INSERT_LOCATIONS","exports","dataset","name","test","Error","projectId","id","validateAssetType","type","indexOf","concat","join","validateObject","op","val","Array","isArray","requireDocumentId","doc","_id","validateDocumentId","validateInsert","at","selector","items","signature","valid","map","loc","hasDataset","config","gradientMode","assign","require","filter","Patch","Transaction","dataMethods","DatasetsClient","ProjectsClient","AssetsClient","UsersClient","AuthClient","httpRequest","getRequestOptions","_require3","defaultConfig","initConfig","SanityClient","arguments","length","undefined","assets","datasets","projects","users","auth","clientConfig","isPromiseAPI","observableConfig","observable","clone","newConfig","getUrl","uri","canUseCdn","base","cdnUrl","url","replace","_requestObservable","options","useCdn","method","reqOptions","requester","request","pipe","event","body","toPromise","ClientError","ServerError","defaultRequester","module","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","deepAssign","getSelection","validate","selection","operations","client","merge","props","stack","toString","split","str","trim","slice","console","warn","_assign","set","diffMatchPatch","unset","attrs","setIfMissing","_set","$","inc","dec","insert","_this$_assign","append","prepend","splice","start","deleteCount","startIndex","delCount","Math","max","delRange","rangeSelector","ifRevisionId","rev","ifRevisionID","serialize","toJSON","commit","returnFirst","opts","returnDocuments","mutate","patch","reset","closed","next","error","sel","query","selectionOpts","validators","defaultMutateOptions","transactionId","trxId","create","_add","createIfNotExists","createOrReplace","delete","documentId","patchOps","isBuilder","mut","push","enc","encodeURIComponent","_ref","_ref$params","params","_ref$options","qString","keys","reduce","qs","param","JSON","stringify","option","slug","fn","returnValue","didCall","apply","isObj","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","toObject","TypeError","assignKey","to","from","call","getOwnPropertySymbols","symbols","i","target","s","x","encodeQueryString","listen","excludeFalsey","defValue","getMutationQuery","returnIds","visibility","isResponse","getBody","getDataUrl","operation","path","catalog","namespace","baseUri","fetch","mapResponse","filterResponse","res","result","_dataRequest","getDocument","json","documents","getDocuments","ids","docs","attr","indexed","_create","dataRequest","mutations","muts","transaction","endpoint","isMutation","strQuery","useGet","stringQuery","timeout","token","results","document","mutation","Observable","polyfilledEventSource","pick","defaults","generateHelpUrl","once","tokenWarning","printTokenWarning","isWindowEventSource","Boolean","window","EventSource","possibleOptions","defaultOptions","includeResult","parseEvent","data","parse","err","cooerceError","evt","message","description","extractErrorMessage","listenOpts","_this$clientConfig","withCredentials","listenFor","events","shouldEmitReconnect","esOptions","headers","Authorization","observer","reconnectTimer","es","getEventSource","stopped","onError","readyState","CLOSED","unsubscribe","clearTimeout","setTimeout","open","onChannelError","onMessage","onDisconnect","complete","removeEventListener","forEach","close","evs","addEventListener","SanityObservableMinimal","createDeprecatedMemberOp","hasWarned","lift","operator","source","pipe_1","self","define","SyntaxError","URL","setOptions","poll","CONNECTING","OPEN","loggingEnabled","loggingPrefix","interval","bufferSizeLimit","silentTimeout","getArgs","evs_buffer_size_limit","xhrHeaders","Accept","log","cleanup","cursor","cache","_xhr","XHR","resetNoActivityTimer","dispatchEvent","pollAgain","_pollTimer","clearInterval","_noActivityTimer","abort","_onxhrdata","isReady","hasError","buffer","getBuffer","substring","lastMessageIndex","newcursor","toparse","parseStream","isDone","chunk","j","eventType","datas","line","retry","normalizeToLF","parts","trimWhiteSpace","parseInt","isNaN","lastEventId","MessageEvent","location","origin","handlers","handler","_noactivityTimer","onerror","onmessage","onopen","urlWithParams","baseURL","encodedArgs","urlarg","urlize","text","ln2","lastIndexOf","lr2","lrln2","reTrim","isOldIE","isPolyfill","evs_preamble","XDomainRequest","_request","onprogress","_ready","onload","_loaded","_failed","ontimeout","reqGetArgs","defaultArgs","evs_last_event_id","send","useXDomainRequest","rv","responseText","XMLHttpRequest","onreadystatechange","status","header","setRequestHeader","bubbles","cancelBubble","cancelable","responseType","prop","bind","_modify","edit","list","getById","_slicedToArray","arr","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","done","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","_unsupportedIterableToArray","_nonIterableRest","len","arr2","queryString","toDocument","get","optionsFromFile","file","File","filename","preserveFilename","contentType","upload","assetType","meta","extract","assetEndpoint","label","title","creditLine","sourceId","sourceName","sourceUrl","docId","getImageUrl","ref","_id$split2","assetId","size","format","_this$client$clientCo","getLoginProviders","logout","getIt","jsonRequest","jsonResponse","progress","_require","httpError","onResponse","statusCode","implementation","maxRedirects","pubsub","middlewareReducer","processOptions","validateOptions","channelNames","middlehooks","createRequester","initMiddleware","loadedMiddleware","middleware","ware","channels","applyMiddleware","context","ongoingRequest","subscribe","ctx","response","newMiddleware","subscribers","subscriber","idx","publish","hook","defaultValue","args","bailEarly","objectAssign","urlParse","isReactNative","navigator","has","stringifyQueryString","pairs","item","normalizeTimeout","time","delay","Number","connect","socket","removeUndefined","required","slashes","protocolre","left","RegExp","trimLeft","rules","address","NaN","ignore","hash","lolcation","global","finaldestination","protocol","Url","unescape","pathname","href","extractProtocol","match","exec","toLowerCase","rest","parser","relative","extracted","instruction","index","instructions","charAt","last","unshift","up","resolve","port","host","hostname","username","password","part","pop","char","ins","decode","input","decodeURIComponent","e","encode","prefix","undef","validUrl","sameOrigin","parseHeaders","win","XmlHttpRequest","hasXhr2","timers","cors","injectedResponse","adapter","cbTimer","xhr","isXdr","aborted","loaded","timedOut","stopTimers","timeoutRequest","delays","resetTimers","callback","statusMessage","reduceResponse","onLoad","code","uri1","uri2","ieMode","url1","url2","url1Port","url2Port","proto","regex","string","arg","headersArr","row","onReturn","isPlainObject","serializeTypes","isObject","isObjectObject","ctor","prot","tryParse","shouldDecode","onRequest","handleProgress","percent","stage","total","lengthComputable","makeError","extractErrorProps","super","responseBody","stringifyBody","details","httpErrorMessage","construct","Reflect","captureStackTrace","BaseError","cname","container","setFunctionName","f","_","super_","properties","projectHeader","overrides","useGlobalApi","useProjectHostname","apiHost","LOCALHOSTS","createWarningPrinter","printCdnWarning","printBrowserTokenWarning","printCdnTokenWarning","prevConfig","projectBased","Promise","helpUrl","isBrowser","isLocalhost","isLocal","ignoreBrowserTokenWarning","isDefaultApi","hostParts","cdnHost"],"mappings":";ygBAAA,aACI,EAAJ,OAEA,SACA,SACA,QACA,SAYI,EAAJ,YAuCI,SAAF,EAAY,EACA,EACA,GAFZ,MAGE,cAAO,KAEP,OApBmB,EAAJ,eAAsB,KACtB,mBAA2B,EAC3B,sBAA8B,EAEjC,EAAJ,WAAqB,EAgBrB,UAAU,QAChB,KAAK,EACH,EAAK,YAAc,QACnB,MACF,KAAK,EACH,IAAK,EAAmB,CACtB,EAAK,YAAc,QACnB,MAEF,GAAiC,kBAAtB,EAAgC,CACrC,aAA6B,GAC/B,EAAK,mBAAqB,EAAkB,mBAC5C,EAAK,YAAc,EACnB,EAAkB,IAAI,KAEtB,EAAK,oBAAqB,EAC1B,EAAK,YAAc,IAAI,EAAkB,EAA6B,IAExE,MAEE,QACJ,EAAK,oBAAqB,EAC1B,EAAK,YAAc,IAAI,EAAkB,EAA6B,EAAmB,EAAO,G,SA6EtG,OA/IiC,OAEjC,YAAC,gBAAD,WAAyB,OAAO,MAcvB,EAAF,OAAP,SAAiB,EACA,EACA,GACX,IAAE,EAAa,IAAI,EAAW,EAAM,EAAO,GAE3C,OADA,EAAO,oBAAqB,EACzB,GAyDP,EAAF,wBAAK,GACE,KAAK,WACR,KAAK,MAAM,IAWf,2BAAM,GACC,KAAK,YACR,KAAK,WAAY,EACjB,KAAK,OAAO,KAUd,EAAF,8BACO,KAAK,YACF,KAAD,WAAY,EACX,KAAD,cAIP,EAAF,iCACM,KAAK,SAGL,KAAC,WAAY,EACb,EAAJ,UAAM,YAAW,aAGT,kBAAV,SAAgB,GACd,KAAK,YAAY,KAAK,IAGd,mBAAV,SAAiB,GACX,KAAC,YAAY,MAAM,GACnB,KAAC,eAGG,sBAAV,WACM,KAAC,YAAY,WACjB,KAAK,eAIL,EAAF,4CACW,4BAML,OALA,KAAC,iBAAmB,KACpB,KAAC,cACD,KAAC,QAAS,EACV,KAAC,WAAY,EACb,KAAC,iBAAmB,EACjB,MAEX,EA/IA,CAAmC,gBAAtB,eAsJb,kBAII,SAAF,EAAoB,EACR,EACA,EACA,GAHR,IAME,EANN,EAIE,cAAO,KAJW,sBAOd,MAAe,E,OAEf,aAAW,GACb,EAA+B,EACtB,IACT,EAA6B,EAAgB,KACvC,EAAwB,EAAgB,MACxC,EAA2B,EAAgB,SAC7C,IAAmB,UACb,EAAE,OAAO,OAAO,GACpB,aAAW,EAAQ,cACX,EAAL,IAAiB,EAAQ,YAAY,KAAK,IAEzC,cAAc,EAAK,YAAY,KAAK,KAI5C,EAAC,SAAW,EACZ,EAAC,MAAQ,EACT,EAAC,OAAS,EACV,EAAC,UAAY,E,EAsGrB,OArIuC,OAkCnCA,EAAeC,UAAU,KAA3B,SAAK,GACC,IAAC,KAAK,WAAa,KAAK,MAAO,CACzB,6BACH,SAAO,uCAA0C,EAAkB,mBAE7D,KAAK,gBAAgB,EAAmB,KAAK,MAAO,IAC7D,KAAK,cAFL,KAAK,aAAa,KAAK,MAAO,KAOlC,EAAF,yBAAM,GACA,IAAC,KAAK,UAAW,CACX,6BACA,iDACR,GAAI,KAAK,OACF,GAA0C,EAAkB,oBAI/D,KAAK,gBAAgB,EAAmB,KAAK,OAAQ,GACrD,KAAK,gBAJL,KAAK,aAAa,KAAK,OAAQ,GAC/B,KAAK,oBAKF,GAAK,EAAkB,mBAOxB,GACF,EAAkB,eAAiB,EACnC,EAAkB,iBAAkB,GAEpC,kBAAgB,GAElBC,KAAK,kBAb2C,CAExC,GADA,KAAH,cACD,EACF,MAAM,EAEAC,EAAkBC,gBAAV,MAatB,2CACE,IAAK,KAAK,UAAW,CACX,6BACR,GAAI,KAAK,UAAW,CAClB,IAAM,EAAkB,WAAM,SAAK,UAAU,KAAK,EAApB,WAEzB,SAAO,uCAA0C,EAAkB,oBAItE,KAAK,gBAAgB,EAAmB,GACxC,KAAK,gBAJL,KAAK,aAAa,GAClB,KAAK,oBAMP,KAAK,gBAKH,yBAAR,SAAqB,EAAc,GACjC,IACE,EAAG,KAAK,KAAK,SAAU,GACvB,MAAO,GAEP,GADA,KAAK,cACD,SAAO,sCACT,MAAM,EAEN,kBAAgB,KAKd,4BAAR,SAAwB,EAAuB,EAAc,GAC3D,IAAK,SAAO,sCACV,MAAM,IAAI,MAAM,YAElB,IACE,EAAG,KAAK,KAAK,SAAU,GACvB,MAAO,GACP,OAAI,SAAO,uCACT,EAAO,eAAiB,EACxB,EAAO,iBAAkB,GAClB,IAEP,kBAAgB,IACT,GAGX,OAAO,GAIT,oCACU,6BACR,KAAK,SAAW,KAChB,KAAK,kBAAoB,KACzB,EAAkB,eAEtB,EArIA,CAAuC,GAA1B,oB,gCCtKb,SAASC,EAAQC,GAAmV,OAAtOD,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAON,UAAY,gBAAkBK,IAAyBA,GAEnX,IAAII,EAAoB,CAAC,QAAS,QAC9BC,EAAyB,CAAC,SAAU,QAAS,WAEjDC,EAAQC,QAAU,SAAUC,GAC1B,IAAK,iBAAiBC,KAAKD,GACzB,MAAM,IAAIE,MAAM,oFAIpBJ,EAAQK,UAAY,SAAUC,GAC5B,IAAK,gBAAgBH,KAAKG,GACxB,MAAM,IAAIF,MAAM,0DAIpBJ,EAAQO,kBAAoB,SAAUC,GACpC,IAAyC,IAArCV,EAAkBW,QAAQD,GAC5B,MAAM,IAAIJ,MAAM,uBAAuBM,OAAOF,EAAM,qBAAqBE,OAAOZ,EAAkBa,KAAK,SAI3GX,EAAQY,eAAiB,SAAUC,EAAIC,GACrC,GAAY,OAARA,GAAiC,WAAjBrB,EAAQqB,IAAqBC,MAAMC,QAAQF,GAC7D,MAAM,IAAIV,MAAM,GAAGM,OAAOG,EAAI,sCAIlCb,EAAQiB,kBAAoB,SAAUJ,EAAIK,GACxC,IAAKA,EAAIC,IACP,MAAM,IAAIf,MAAM,GAAGM,OAAOG,EAAI,kEAGhCb,EAAQoB,mBAAmBP,EAAIK,EAAIC,MAGrCnB,EAAQoB,mBAAqB,SAAUP,EAAIP,GACzC,GAAkB,kBAAPA,IAAoB,kBAAkBH,KAAKG,GACpD,MAAM,IAAIF,MAAM,GAAGM,OAAOG,EAAI,SAAUH,OAAOJ,EAAI,kCAIvDN,EAAQqB,eAAiB,SAAUC,EAAIC,EAAUC,GAC/C,IAAIC,EAAY,8BAEhB,IAA4C,IAAxC1B,EAAuBU,QAAQa,GAAY,CAC7C,IAAII,EAAQ3B,EAAuB4B,KAAI,SAAUC,GAC/C,MAAO,IAAKlB,OAAOkB,EAAK,QACvBjB,KAAK,MACR,MAAM,IAAIP,MAAM,GAAGM,OAAOe,EAAW,6CAA+Cf,OAAOgB,IAG7F,GAAwB,kBAAbH,EACT,MAAM,IAAInB,MAAM,GAAGM,OAAOe,EAAW,wDAGvC,IAAKV,MAAMC,QAAQQ,GACjB,MAAM,IAAIpB,MAAM,GAAGM,OAAOe,EAAW,uDAIzCzB,EAAQ6B,WAAa,SAAUC,GAC7B,IAAKA,EAAOC,eAAiBD,EAAO7B,QAClC,MAAM,IAAIG,MAAM,iDAGlB,OAAO0B,EAAO7B,SAAW,K,2CCnE3B,IAAI+B,EAASC,EAAQ,IAGjBC,EADWD,EAAQ,IACDC,OAGlBP,EADYM,EAAQ,IACJN,IAEhBQ,EAAQF,EAAQ,IAEhBG,EAAcH,EAAQ,KAEtBI,EAAcJ,EAAQ,KAEtBK,EAAiBL,EAAQ,KAEzBM,EAAiBN,EAAQ,KAEzBO,EAAeP,EAAQ,KAEvBQ,EAAcR,EAAQ,KAEtBS,EAAaT,EAAQ,KAErBU,EAAcV,EAAQ,KAEtBW,EAAoBX,EAAQ,KAE5BY,EAAYZ,EAAQ,KACpBa,EAAgBD,EAAUC,cAC1BC,EAAaF,EAAUE,WAM3B,SAASC,IACP,IAAIlB,EAASmB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAKH,EAEjF,KAAMxD,gBAAgB0D,GACpB,OAAO,IAAIA,EAAalB,GAU1B,GAPAxC,KAAKwC,OAAOA,GACZxC,KAAK8D,OAAS,IAAIZ,EAAalD,MAC/BA,KAAK+D,SAAW,IAAIf,EAAehD,MACnCA,KAAKgE,SAAW,IAAIf,EAAejD,MACnCA,KAAKiE,MAAQ,IAAId,EAAYnD,MAC7BA,KAAKkE,KAAO,IAAId,EAAWpD,MAEvBA,KAAKmE,aAAaC,aAAc,CAClC,IAAIC,EAAmB3B,EAAO,GAAI1C,KAAKmE,aAAc,CACnDC,cAAc,IAEhBpE,KAAKsE,WAAa,IAAIZ,EAAaW,IAIvC3B,EAAOgB,EAAa3D,UAAWgD,GAC/BL,EAAOgB,EAAa3D,UAAW,CAC7BwE,MAAO,WACL,OAAO,IAAIb,EAAa1D,KAAKwC,WAE/BA,OAAQ,SAAgBgC,GACtB,GAAyB,qBAAdA,EACT,OAAO9B,EAAO,GAAI1C,KAAKmE,cAGzB,GAAInE,KAAKsE,WAAY,CACnB,IAAID,EAAmB3B,EAAO,GAAI8B,EAAW,CAC3CJ,cAAc,IAEhBpE,KAAKsE,WAAW9B,OAAO6B,GAIzB,OADArE,KAAKmE,aAAeV,EAAWe,EAAWxE,KAAKmE,cAAgB,IACxDnE,MAETyE,OAAQ,SAAgBC,GACtB,IAAIC,EAAYhB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,IAAmBA,UAAU,GAC3EiB,EAAOD,EAAY3E,KAAKmE,aAAaU,OAAS7E,KAAKmE,aAAaW,IACpE,MAAO,GAAG1D,OAAOwD,EAAM,KAAKxD,OAAOsD,EAAIK,QAAQ,MAAO,MAExDX,aAAc,WACZ,OAAOpE,KAAKmE,aAAaC,cAE3BY,mBAAoB,SAA4BC,GAC9C,IAAIP,EAAMO,EAAQH,KAAOG,EAAQP,IAC7BC,EAAY3E,KAAKmE,aAAae,QAAU,CAAC,MAAO,QAAQ/D,QAAQ8D,EAAQE,QAAU,QAAU,GAA+B,IAA1BT,EAAIvD,QAAQ,UAC7GiE,EAAa9B,EAAkBtD,KAAKmE,aAAczB,EAAO,GAAIuC,EAAS,CACxEH,IAAK9E,KAAKyE,OAAOC,EAAKC,MAExB,OAAOtB,EAAY+B,EAAYpF,KAAKmE,aAAakB,YAEnDC,QAAS,SAAiBL,GACxB,IAAIX,EAAatE,KAAKgF,mBAAmBC,GAASM,KAAK3C,GAAO,SAAU4C,GACtE,MAAsB,aAAfA,EAAMtE,QACXmB,GAAI,SAAUmD,GAChB,OAAOA,EAAMC,SAGf,OAAOzF,KAAKoE,eArEA,SAAmBE,GACjC,OAAOA,EAAWoB,YAoEaA,CAAUpB,GAAcA,KAGzDZ,EAAab,MAAQA,EACrBa,EAAaZ,YAAcA,EAC3BY,EAAaiC,YAActC,EAAYsC,YACvCjC,EAAakC,YAAcvC,EAAYuC,YACvClC,EAAa2B,UAAYhC,EAAYwC,iBACrCC,EAAOpF,QAAUgD,G,gBC/GjBhD,EAAQkC,OAASD,EAAQ,KAAkCC,Q,gBCA3DlC,EAAQ2B,IAAMM,EAAQ,KAA+BN,K,4FCArD,IAAI,GAAsD,EAM7C,SAAS,CAKlB,aAAO,EAUT,0CAA0C,GACxC,GAAI,EAAO,CACT,IAAM,EAAQ,IAAI,MAClB,QAAQ,KAAK,gGAAkG,EAAM,YAC5G,GACT,QAAQ,IAAI,wDAEd,EAAsD,GAGxD,4CACE,OAAO,K,6BC9BX,SAAS0D,EAAgB3F,EAAK4F,EAAKC,GAAiK,OAApJD,KAAO5F,EAAO8F,OAAOC,eAAe/F,EAAK4F,EAAK,CAAEC,MAAOA,EAAOG,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBlG,EAAI4F,GAAOC,EAAgB7F,EAE3M,IAAImG,EAAa5D,EAAQ,KAErBD,EAASC,EAAQ,IAEjB6D,EAAe7D,EAAQ,KAEvB8D,EAAW9D,EAAQ,IAEnBrB,EAAiBmF,EAASnF,eAC1BS,EAAiB0E,EAAS1E,eAE9B,SAASc,EAAM6D,GACb,IAAIC,EAAahD,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GACjFiD,EAASjD,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,KACjF3D,KAAK0G,UAAYA,EACjB1G,KAAK2G,WAAajE,EAAO,GAAIiE,GAC7B3G,KAAK4G,OAASA,EAGhBlE,EAAOG,EAAM9C,UAAW,CACtBwE,MAAO,WACL,OAAO,IAAI1B,EAAM7C,KAAK0G,UAAWhE,EAAO,GAAI1C,KAAK2G,YAAa3G,KAAK4G,SAErEC,MAAO,SAAeC,GACpBxF,EAAe,QAASwF,GACxB,IAAIC,GAAQ,IAAIjG,OAAQiG,MAAMC,WAAWC,MAAM,MAAMrE,QAAO,SAAUsE,GACpE,OAAOA,EAAIC,UACVC,MAAM,GAET,OADAC,QAAQC,KAAK,4EAA8ElG,OAAO2F,EAAM1F,KAAK,QACtGrB,KAAKuH,QAAQ,QAAShB,EAAWvG,KAAK2G,WAAWE,OAAS,GAAIC,KAEvEU,IAAK,SAAaV,GAChB,OAAO9G,KAAKuH,QAAQ,MAAOT,IAE7BW,eAAgB,SAAwBX,GAEtC,OADAxF,EAAe,iBAAkBwF,GAC1B9G,KAAKuH,QAAQ,iBAAkBT,IAExCY,MAAO,SAAeC,GACpB,IAAKlG,MAAMC,QAAQiG,GACjB,MAAM,IAAI7G,MAAM,uEAMlB,OAHAd,KAAK2G,WAAajE,EAAO,GAAI1C,KAAK2G,WAAY,CAC5Ce,MAAOC,IAEF3H,MAET4H,aAAc,SAAsBd,GAClC,OAAO9G,KAAKuH,QAAQ,eAAgBT,IAEtC/B,QAAS,SAAiB+B,GAExB,OADAxF,EAAe,UAAWwF,GACnB9G,KAAK6H,KAAK,MAAO,CACtBC,EAAGhB,KAGPiB,IAAK,SAAajB,GAChB,OAAO9G,KAAKuH,QAAQ,MAAOT,IAE7BkB,IAAK,SAAalB,GAChB,OAAO9G,KAAKuH,QAAQ,MAAOT,IAE7BmB,OAAQ,SAAgBjG,EAAIC,EAAUC,GACpC,IAAIgG,EAGJ,OADAnG,EAAeC,EAAIC,EAAUC,GACtBlC,KAAKuH,QAAQ,UAA+BxB,EAApBmC,EAAgB,GAAmClG,EAAIC,GAAW8D,EAAgBmC,EAAe,QAAShG,GAAQgG,KAEnJC,OAAQ,SAAgBlG,EAAUC,GAChC,OAAOlC,KAAKiI,OAAO,QAAS,GAAG7G,OAAOa,EAAU,QAASC,IAE3DkG,QAAS,SAAiBnG,EAAUC,GAClC,OAAOlC,KAAKiI,OAAO,SAAU,GAAG7G,OAAOa,EAAU,OAAQC,IAE3DmG,OAAQ,SAAgBpG,EAAUqG,EAAOC,EAAarG,GAMpD,IACIsG,EAAaF,EAAQ,EAAIA,EAAQ,EAAIA,EACrCG,EAFgC,qBAAhBF,IAAgD,IAAjBA,GAE1B,EAAIG,KAAKC,IAAI,EAAGL,EAAQC,GAC7CK,EAAWJ,EAAa,GAAKC,GAAY,EAAI,GAAKA,EAClDI,EAAgB,GAAGzH,OAAOa,EAAU,KAAKb,OAAOoH,EAAY,KAAKpH,OAAOwH,EAAU,KACtF,OAAO5I,KAAKiI,OAAO,UAAWY,EAAe3G,GAAS,KAExD4G,aAAc,SAAsBC,GAElC,OADA/I,KAAK2G,WAAWqC,aAAeD,EACxB/I,MAETiJ,UAAW,WACT,OAAOvG,EAAO8D,EAAaxG,KAAK0G,WAAY1G,KAAK2G,aAEnDuC,OAAQ,WACN,OAAOlJ,KAAKiJ,aAEdE,OAAQ,WACN,IAAIlE,EAAUtB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAElF,IAAK3D,KAAK4G,OACR,MAAM,IAAI9F,MAAM,oGAGlB,IAAIsI,EAAwC,kBAAnBpJ,KAAK0G,UAC1B2C,EAAO3G,EAAO,CAChB0G,YAAaA,EACbE,iBAAiB,GAChBrE,GACH,OAAOjF,KAAK4G,OAAO2C,OAAO,CACxBC,MAAOxJ,KAAKiJ,aACXI,IAELI,MAAO,WAEL,OADAzJ,KAAK2G,WAAa,GACX3G,MAET6H,KAAM,SAActG,EAAIuF,GACtB,OAAO9G,KAAKuH,QAAQhG,EAAIuF,GAAO,IAEjCS,QAAS,SAAiBhG,EAAIuF,GAC5B,IAAID,IAAQlD,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,KAAmBA,UAAU,GAG3E,OAFArC,EAAeC,EAAIuF,GACnB9G,KAAK2G,WAAajE,EAAO,GAAI1C,KAAK2G,WAAYZ,EAAgB,GAAIxE,EAAImB,EAAO,GAAImE,GAAS7G,KAAK2G,WAAWpF,IAAO,GAAIuF,KAC9G9G,QAGX8F,EAAOpF,QAAUmC,G,+FCpIjB,sBAA2B,GACzB,MAAoB,oBAAN,I,8ECAhB,YACI,EAAJ,OAEa,QAAuB,CAChC6G,QAAM,EACNC,KAAF,SAAK,KACHC,MAAF,SAAM,GACA,YAAO,sCACH,QAEN,kBAAgB,IAGlB,SAAF,e,8ECTFlJ,EAAQR,gBAAR,SAAgC,GAC9B,YAAW,WAAQ,MAAM,IAAQ,K,8ECLtB,eACO,oBAAX,OACH,OAAO,gBACP,kBAAoB,KAAK,SAKlB,iBAAiB,gB,6BCP9B4F,EAAOpF,QAAU,SAAsBmJ,GACrC,GAAmB,kBAARA,GAAoBpI,MAAMC,QAAQmI,GAC3C,MAAO,CACL7I,GAAI6I,GAIR,GAAIA,GAAOA,EAAIC,MACb,MAAO,CACLA,MAAOD,EAAIC,OAIf,IAAIC,EAAgB,CAAC,0BAA2B,0BAA2B,+BAA+B1I,KAAK,MAC/G,MAAM,IAAIP,MAAM,0CAA0CM,OAAO2I,M,6BCdnE,SAAShE,EAAgB3F,EAAK4F,EAAKC,GAAiK,OAApJD,KAAO5F,EAAO8F,OAAOC,eAAe/F,EAAK4F,EAAK,CAAEC,MAAOA,EAAOG,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBlG,EAAI4F,GAAOC,EAAgB7F,EAE3M,IAAIsC,EAASC,EAAQ,IAEjBqH,EAAarH,EAAQ,IAErBE,EAAQF,EAAQ,IAEhBsH,EAAuB,CACzBX,iBAAiB,GAGnB,SAASxG,IACP,IAAI6D,EAAahD,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GACjFiD,EAASjD,UAAUC,OAAS,EAAID,UAAU,QAAKE,EAC/CqG,EAAgBvG,UAAUC,OAAS,EAAID,UAAU,QAAKE,EAC1D7D,KAAKmK,MAAQD,EACblK,KAAK2G,WAAaA,EAClB3G,KAAK4G,OAASA,EAGhBlE,EAAOI,EAAY/C,UAAW,CAC5BwE,MAAO,WACL,OAAO,IAAIzB,EAAY9C,KAAK2G,WAAWS,MAAM,GAAIpH,KAAK4G,OAAQ5G,KAAKmK,QAErEC,OAAQ,SAAgBxI,GAEtB,OADAoI,EAAW1I,eAAe,SAAUM,GAC7B5B,KAAKqK,KAAK,CACfD,OAAQxI,KAGZ0I,kBAAmB,SAA2B1I,GAC5C,IAAIL,EAAK,oBAGT,OAFAyI,EAAW1I,eAAeC,EAAIK,GAC9BoI,EAAWrI,kBAAkBJ,EAAIK,GAC1B5B,KAAKqK,KAAKtE,EAAgB,GAAIxE,EAAIK,KAE3C2I,gBAAiB,SAAyB3I,GACxC,IAAIL,EAAK,kBAGT,OAFAyI,EAAW1I,eAAeC,EAAIK,GAC9BoI,EAAWrI,kBAAkBJ,EAAIK,GAC1B5B,KAAKqK,KAAKtE,EAAgB,GAAIxE,EAAIK,KAE3C4I,OAAQ,SAAiBC,GAEvB,OADAT,EAAWlI,mBAAmB,SAAU2I,GACjCzK,KAAKqK,KAAK,CACfG,OAAQ,CACNxJ,GAAIyJ,MAIVjB,MAAO,SAAeiB,EAAYC,GAChC,IAAIC,EAAgC,oBAAbD,EAGvB,GAFcD,aAAsB5H,EAGlC,OAAO7C,KAAKqK,KAAK,CACfb,MAAOiB,EAAWxB,cAKtB,GAAI0B,EAAW,CACb,IAAInB,EAAQkB,EAAS,IAAI7H,EAAM4H,EAAY,GAAIzK,KAAK4G,SAEpD,KAAM4C,aAAiB3G,GACrB,MAAM,IAAI/B,MAAM,sDAGlB,OAAOd,KAAKqK,KAAK,CACfb,MAAOA,EAAMP,cAIjB,OAAOjJ,KAAKqK,KAAK,CACfb,MAAO9G,EAAO,CACZ1B,GAAIyJ,GACHC,MAGPR,cAAe,SAAuBlJ,GACpC,OAAKA,GAILhB,KAAKmK,MAAQnJ,EACNhB,MAJEA,KAAKmK,OAMhBlB,UAAW,WACT,OAAOjJ,KAAK2G,WAAWS,SAEzB8B,OAAQ,WACN,OAAOlJ,KAAKiJ,aAEdE,OAAQ,SAAgBlE,GACtB,IAAKjF,KAAK4G,OACR,MAAM,IAAI9F,MAAM,gHAGlB,OAAOd,KAAK4G,OAAO2C,OAAOvJ,KAAKiJ,YAAavG,EAAO,CACjDwH,cAAelK,KAAKmK,OACnBF,EAAsBhF,GAAW,MAEtCwE,MAAO,WAEL,OADAzJ,KAAK2G,WAAa,GACX3G,MAETqK,KAAM,SAAcO,GAElB,OADA5K,KAAK2G,WAAWkE,KAAKD,GACd5K,QAGX8F,EAAOpF,QAAUoC,G,6BChHjB,IAAIgI,EAAMC,mBAEVjF,EAAOpF,QAAU,SAAUsK,GACzB,IAAIlB,EAAQkB,EAAKlB,MACbmB,EAAcD,EAAKE,OACnBA,OAAyB,IAAhBD,EAAyB,GAAKA,EACvCE,EAAeH,EAAK/F,QACpBA,OAA2B,IAAjBkG,EAA0B,GAAKA,EACzCvG,EAAO,UAAUxD,OAAO0J,EAAIhB,IAC5BsB,EAAUlF,OAAOmF,KAAKH,GAAQI,QAAO,SAAUC,EAAIC,GACrD,MAAO,GAAGpK,OAAOmK,EAAI,KAAKnK,OAAO0J,EAAI,IAAI1J,OAAOoK,IAAS,KAAKpK,OAAO0J,EAAIW,KAAKC,UAAUR,EAAOM,QAC9F5G,GACH,OAAOsB,OAAOmF,KAAKpG,GAASqG,QAAO,SAAUC,EAAII,GAE/C,OAAO1G,EAAQ0G,GAAU,GAAGvK,OAAOmK,EAAI,KAAKnK,OAAO0J,EAAIa,GAAS,KAAKvK,OAAO0J,EAAI7F,EAAQ0G,KAAYJ,IACnGH,K,gBCjBLtF,EAAOpF,QAAUiC,EAAQ,M,8ECIzB,IAAI,EAAJ,OACI,EAAJ,OAGA,SACA,SACA,QAQA,aAkBI,SAAF,EAAY,GAfL,gBAAqB,EAgBtB,IACF,KAAK,WAAa,GAoUxB,OAzSI,EAAF,wBAAQ,GACF,IAAE,EAAa,IAAI,EAGnB,OAFA,EAAO,OAAS,KAChB,EAAO,SAAW,EACf,GAwIT,+BAAU,EACA,EACA,GAEA,oBACF,EAAO,eAAa,EAAgB,EAAO,GAYjD,GAVI,EACF,EAAK,IAAI,EAAS,KAAK,EAAM,KAAK,SAElC,EAAK,IACH,KAAK,QAAW,SAAO,wCAA0C,EAAK,mBACtE,KAAK,WAAW,GAChB,KAAK,cAAc,IAInB,SAAO,uCACL,EAAK,qBACP,EAAK,oBAAqB,EACtB,EAAK,iBACP,MAAM,EAAK,eAKjB,OAAO,GAIT,mCAAc,GACZ,IACE,OAAO,KAAK,WAAW,GACvB,MAAO,GACH,SAAO,wCACT,EAAK,iBAAkB,EACvB,EAAK,eAAiB,GAEpB,iBAAe,GACjB,EAAK,MAAM,GAEX,QAAQ,KAAK,KAYnB,6BAAQ,EAA0B,GAAlC,WAGE,OAAO,IAFP,EAAc,EAAe,KAEA,SAAC,EAAS,GAGrC,IAAI,EACJ,EAAe,EAAK,WAAU,SAAC,GAC7B,IACE,EAAK,GACL,MAAO,GACP,EAAO,GACH,GACF,EAAa,iBAGhB,EAAQ,OAKf,gCAAW,GACD,kBACR,OAAO,GAAU,EAAO,UAAU,IAqBpC,YAAC,cAAD,WACE,OAAO,MAqCT,4B,IAAK,sDACH,OAA0B,IAAtB,EAAW,OACN,KAGF,gBAAc,EAAd,CAA0B,OASnC,+BAAU,GAAV,WAGE,OAAO,IAFP,EAAc,EAAe,KAEN,SAAC,EAAS,GAC/B,IAAI,EACJ,EAAK,WAAU,SAAC,GAAS,cAAW,SAAC,GAAa,eAAa,WAAM,mBAjThE,EAAF,OAAmB,SAAI,GACxB,OAAG,IAAI,EAAc,IAmT7B,EAxVA,GAiWA,SAAS,EAAe,GAKtB,GAJK,IACH,EAAc,SAAO,SAAW,UAG7B,EACH,MAAM,IAAI,MAAM,yBAGlB,OAAO,EA1WI,gB,8ECjBb,aAsBA,SAAgB,EAAoB,GAClC,OAAmB,IAAf,EAAI,OACC,WAGU,IAAf,EAAI,OACC,EAAI,GAGN,SAAe,GACpB,OAAO,EAAI,QAAO,SAAC,EAAW,GAA4B,cAAU,IAfxE,kB,IAAqB,sDACjB,OAAK,EAAc,IAIvB,mB,cCrBAmD,EAAOpF,QAAU,SAAyBkL,GACxC,MAHY,+BAGKA,I,6BCDnB9F,EAAOpF,QAAU,SAAUmL,GACzB,IACIC,EADAC,GAAU,EAEd,OAAO,WACL,OAAIA,IAIJD,EAAcD,EAAGG,WAAM,EAAQrI,WAC/BoI,GAAU,GAJDD,K,meCNb,IAAI,EAAJ,MAwDA,kBAA0B,EACA,GACxB,OAAO,SAAgC,GACrC,OAAO,EAAO,KAAK,IAAI,EAAe,EAAW,MAIrD,iBACE,WAAoB,EACA,GADA,iBACA,eAMtB,OAHE,0BAAK,EAA2B,GAC9B,OAAO,EAAO,UAAU,IAAI,EAAiB,EAAY,KAAK,UAAW,KAAK,WAElF,EARA,GAeA,cAIE,WAAY,EACQ,EACA,GAFpB,MAGE,YAAM,IAAY,K,OAFA,cACA,YAJpB,QAAgB,E,EAsBlB,OAxBkC,OAYtB,kBAAV,SAAgB,GACd,IAAI,EACJ,IACE,EAAS,KAAK,UAAU,KAAK,KAAK,QAAS,EAAO,KAAK,SACvD,MAAO,GAEP,YADA,KAAK,YAAY,MAAM,GAGrB,GACF,KAAK,YAAY,KAAK,IAG5B,EAxBA,CAAkC,e,8EC/ElC,aACA,SACI,EAAJ,OACI,EAAJ,OAeA,aAsBI,SAAF,EAAY,GAXL,aAAkB,EAGf,sBAAkD,KAEpD,oBAAqC,KAOvC,IACK,KAAO,kBAAmB,EAChC,KAAa,aAAe,GAvBI,IAAS,EAuMhD,OAtKI,EAAF,iCACM,MAEA,SAAK,OAAL,CAII,IAAJ,OAAE,qBAAkB,qBAAkB,iBAAc,mBAQpD,GANA,KAAC,QAAS,EACV,KAAC,iBAAmB,KAGpB,KAAC,eAAiB,KAElB,aAA4B,EAC9B,EAAiB,OAAO,WACnB,GAAyB,OAArB,EACT,IAAK,IAAI,EAAQ,EAAG,EAAQ,EAAiB,SAAU,EAAO,CAC7C,EAAiB,GACzB,OAAO,MAId,gBAAW,GAAe,CAUxB,IACO,KAAK,kBAAe,GAEzB,IACI,EAAK,KAAK,MAClB,MAAO,GACC,EAAC,aAAa,sBAAsB,EAA4B,EAAE,QAAU,CAAC,IAIrF,aAAQ,GACJ,CAAF,GAAS,EAGP,IAHA,IACF,EAAM,EAAe,SAEhB,EAAQ,GAAK,CACZ,IAAF,EAAM,EAAe,GAC3B,GAAI,WAAS,GACX,IACE,EAAI,cACJ,MAAO,GACP,EAAS,GAAU,GACf,aAAa,sBACf,EAAS,EAAO,OAAO,EAA4B,EAAE,SAErD,EAAO,KAAK,KAOlB,KACF,MAAM,IAAI,sBAAoB,KAwBlC,yBAAI,GACF,IAAI,EAA8B,EAElC,IAAK,EACH,OAAO,EAAa,MAGtB,cAAe,GACb,IAAK,WACH,EAAe,IAAI,EAA2B,GAChD,IAAK,SACH,GAAI,IAAiB,MAAQ,EAAa,QAA8C,oBAA7B,EAAa,YAEtE,OAAO,EACF,GAAI,KAAK,OAEd,OADA,EAAa,cACN,EACF,KAAM,aAAwB,GAAe,CAClD,IAAM,EAAM,GACZ,EAAe,IAAI,GACN,eAAiB,CAAC,GAEjC,MACF,QACE,MAAM,IAAI,MAAM,yBAA2B,EAAW,2BAKpD,yBACN,GAAyB,OAArB,EAGF,EAAa,iBAAmB,UAC3B,GAAI,aAA4B,EAAc,CACnD,GAAI,IAAqB,KAEvB,OAAO,EAIT,EAAa,iBAAmB,CAAC,EAAkB,UAC9C,KAAwC,IAApC,EAAiB,QAAQ,MAKlC,OAAO,EAHP,EAAiB,KAAK,MAOxB,IAAM,EAAgB,KAAK,eAO3B,OANsB,OAAlB,EACF,KAAK,eAAiB,CAAC,GAEvB,EAAc,KAAK,GAGd,GAST,4BAAO,GACL,IAAM,EAAgB,KAAK,eAC3B,GAAI,EAAe,CACjB,IAAM,EAAoB,EAAc,QAAQ,IACrB,IAAvB,GACF,EAAc,OAAO,EAAmB,KAnMhC,UAAgC,EAG5C,IAAI,GAFE,QAAS,EACR,GAqMX,EAzMA,GA2MA,SAAS,EAA4B,GACpC,OAAO,EAAO,QAAO,SAAC,EAAM,GAAQ,SAAK,OAAQ,aAAe,sBAAuB,EAAI,OAAvD,KAAsE,IA5M9F,kB,8EClBA,UAAiB,MAAM,SAAY,SAAI,GAAqB,4BAAY,EAAE,S,8ECAvF,oBAAyB,GACvB,OAAa,OAAN,GAA2B,kBAAN,I,8ECO9B,IAAM,EAA2B,WAC7B,SAAO,EAAmC,GAO1C,OANA,MAAM,KAAK,MACX,KAAK,QAAU,EACV,EAAO,OAAM,4CACpB,EAAO,KAAI,SAAC,EAAK,GAAM,OAAG,EAAI,EAAC,KAAK,EAAb,cAA+B,KAAK,QAAY,GACrE,KAAK,KAAO,sBACZ,KAAK,OAAS,EACP,KAKT,OAFA,EAAwB,UAAY,OAAO,OAAO,MAAM,WAEjD,EAbwB,GAoBpB,sBAA+C,G,mbC3B5D,IAAI,EAAJ,MA2CA,eAA0B,EAAyC,GAC/D,OAAK,SAAsB,GACvB,GAAmB,oBAAZ,EACT,MAAM,IAAI,UAAU,8DAElB,OAAG,EAAO,KAAK,IAAI,EAAY,EAAS,MAIhD,iBACI,SAAF,EAAoB,EAAiD,GAAjD,eAAiD,eAMvE,OAHE,0BAAK,EAA2B,GAC9B,OAAO,EAAO,UAAU,IAAI,EAAc,EAAY,KAAK,QAAS,KAAK,WAE7E,EAPA,GAAa,gBAcb,kBAIE,WAAY,EACQ,EACR,GAFZ,MAGE,YAAM,IAAY,K,OAFA,YAJpB,QAAgB,EAOd,EAAK,QAAU,GAAW,E,EAe9B,OAvBkC,OAatB,kBAAV,SAAgB,GACd,IAAI,EACJ,IACE,EAAS,KAAK,QAAQ,KAAK,KAAK,QAAS,EAAO,KAAK,SACrD,MAAO,GAEP,YADA,KAAK,YAAY,MAAM,GAGzB,KAAK,YAAY,KAAK,IAE1B,EAvBA,CAAkC,e,6BClElC,IAAIG,EAAQtJ,EAAQ,KAChBuJ,EAAiBhG,OAAOnG,UAAUmM,eAClCC,EAAmBjG,OAAOnG,UAAUqM,qBAExC,SAASC,EAAS7K,GACjB,GAAY,OAARA,QAAwBqC,IAARrC,EACnB,MAAM,IAAI8K,UAAU,uCAGrB,OAAOpG,OAAO1E,GAGf,SAAS+K,EAAUC,EAAIC,EAAMzG,GAC5B,IAAIxE,EAAMiL,EAAKzG,GAEf,QAAYnC,IAARrC,GAA6B,OAARA,EAAzB,CAIA,GAAI0K,EAAeQ,KAAKF,EAAIxG,UACXnC,IAAZ2I,EAAGxG,IAAkC,OAAZwG,EAAGxG,IAC/B,MAAM,IAAIsG,UAAU,+CAAiDtG,EAAM,KAIxEkG,EAAeQ,KAAKF,EAAIxG,IAASiG,EAAMzK,GAG3CgL,EAAGxG,GAAOtD,EAAOwD,OAAOsG,EAAGxG,IAAOyG,EAAKzG,IAFvCwG,EAAGxG,GAAOxE,GAMZ,SAASkB,EAAO8J,EAAIC,GACnB,GAAID,IAAOC,EACV,OAAOD,EAKR,IAAK,IAAIxG,KAFTyG,EAAOvG,OAAOuG,GAGTP,EAAeQ,KAAKD,EAAMzG,IAC7BuG,EAAUC,EAAIC,EAAMzG,GAItB,GAAIE,OAAOyG,sBAGV,IAFA,IAAIC,EAAU1G,OAAOyG,sBAAsBF,GAElCI,EAAI,EAAGA,EAAID,EAAQhJ,OAAQiJ,IAC/BV,EAAiBO,KAAKD,EAAMG,EAAQC,KACvCN,EAAUC,EAAIC,EAAMG,EAAQC,IAK/B,OAAOL,EAGR1G,EAAOpF,QAAU,SAAoBoM,GACpCA,EAAST,EAASS,GAElB,IAAK,IAAIC,EAAI,EAAGA,EAAIpJ,UAAUC,OAAQmJ,IACrCrK,EAAOoK,EAAQnJ,UAAUoJ,IAG1B,OAAOD,I,6BCjERhH,EAAOpF,QAAU,SAAUsM,GAC1B,IAAI9L,SAAc8L,EAClB,OAAa,OAANA,IAAwB,WAAT9L,GAA8B,aAATA,K,6BCD5C,SAAS6E,EAAgB3F,EAAK4F,EAAKC,GAAiK,OAApJD,KAAO5F,EAAO8F,OAAOC,eAAe/F,EAAK4F,EAAK,CAAEC,MAAOA,EAAOG,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBlG,EAAI4F,GAAOC,EAAgB7F,EAE3M,IAAIsC,EAASC,EAAQ,IAGjBC,EADWD,EAAQ,IACDC,OAGlBP,EADYM,EAAQ,IACJN,IAEhB2H,EAAarH,EAAQ,IAErB6D,EAAe7D,EAAQ,KAEvBsK,EAAoBtK,EAAQ,KAE5BG,EAAcH,EAAQ,KAEtBE,EAAQF,EAAQ,IAEhBuK,EAASvK,EAAQ,KAEjBwK,EAAgB,SAAuB3B,EAAO4B,GAEhD,OAAiB,IAAV5B,OAAkB3H,EADI,qBAAV2H,EAAwB4B,EAAW5B,GAIpD6B,EAAmB,WACrB,IAAIpI,EAAUtB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAClF,MAAO,CACL2J,WAAW,EACXhE,gBAAiB6D,EAAclI,EAAQqE,iBAAiB,GACxDiE,WAAYtI,EAAQsI,YAAc,SAIlCC,EAAa,SAAoBhI,GACnC,MAAsB,aAAfA,EAAMtE,MAGXuM,EAAU,SAAiBjI,GAC7B,OAAOA,EAAMC,MAUXC,EAAY,SAAmBpB,GACjC,OAAOA,EAAWoB,aAIpBI,EAAOpF,QAAU,CACfwM,OAAQA,EACRQ,WAAY,SAAoBC,EAAWC,GACzC,IAAIpL,EAASxC,KAAKmE,aACd0J,EAAUrL,EAAOC,aAAeD,EAAOsL,UAAY9D,EAAWzH,WAAWC,GACzEuL,EAAU,IAAI3M,OAAOuM,EAAW,KAAKvM,OAAOyM,GAC5CnJ,EAAMkJ,EAAO,GAAGxM,OAAO2M,EAAS,KAAK3M,OAAOwM,GAAQG,EACxD,OAAQ/N,KAAKmE,aAAa1B,aAAeiC,EAAM,QAAQtD,OAAOsD,IAAMK,QAAQ,WAAY,OAE1FiJ,MAAO,SAAelE,EAAOoB,GAC3B,IAAIjG,EAAUtB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAC9EsK,GAAyC,IAA3BhJ,EAAQiJ,eAA2B,SAAUC,GAC7D,OAAOA,GACL,SAAUA,GACZ,OAAOA,EAAIC,QAGT9J,EAAatE,KAAKqO,aAAa,QAAS,CAC1CvE,MAAOA,EACPoB,OAAQA,GACPjG,GAASM,KAAKlD,EAAI4L,IAErB,OAAOjO,KAAKoE,eAAiBsB,EAAUpB,GAAcA,GAEvDgK,YAAa,SAAqBtN,GAChC,IAAIiE,EAAU,CACZP,IAAK1E,KAAK0N,WAAW,MAAO1M,GAC5BuN,MAAM,GAGJjK,EAAatE,KAAKgF,mBAAmBC,GAASM,KAAK3C,EAAO4K,GAAanL,GAAI,SAAUmD,GACvF,OAAOA,EAAMC,KAAK+I,WAAahJ,EAAMC,KAAK+I,UAAU,OAGtD,OAAOxO,KAAKoE,eAAiBsB,EAAUpB,GAAcA,GAEvDmK,aAAc,SAAsBC,GAClC,IAAIzJ,EAAU,CACZP,IAAK1E,KAAK0N,WAAW,MAAOgB,EAAIrN,KAAK,MACrCkN,MAAM,GAGJjK,EAAatE,KAAKgF,mBAAmBC,GAASM,KAAK3C,EAAO4K,GAAanL,GAAI,SAAUmD,GACvF,IAvDyBmJ,EAAMC,EAuD3BC,GAvDqBF,EAuDHnJ,EAAMC,KAAK+I,WAAa,GAvDfI,EAuDmB,SAAUhN,GAC1D,OAAOA,EAAIC,KAvDV8M,EAAKrD,QAAO,SAAUuD,EAASjN,GAEpC,OADAiN,EAAQD,EAAKhN,IAAQA,EACdiN,IACN3I,OAAOkE,OAAO,QAsDb,OAAOsE,EAAIrM,KAAI,SAAUrB,GACvB,OAAO6N,EAAQ7N,IAAO,YAI1B,OAAOhB,KAAKoE,eAAiBsB,EAAUpB,GAAcA,GAEvD8F,OAAQ,SAAgBxI,EAAKqD,GAC3B,OAAOjF,KAAK8O,QAAQlN,EAAK,SAAUqD,IAErCqF,kBAAmB,SAA2B1I,EAAKqD,GAEjD,OADA+E,EAAWrI,kBAAkB,oBAAqBC,GAC3C5B,KAAK8O,QAAQlN,EAAK,oBAAqBqD,IAEhDsF,gBAAiB,SAAyB3I,EAAKqD,GAE7C,OADA+E,EAAWrI,kBAAkB,kBAAmBC,GACzC5B,KAAK8O,QAAQlN,EAAK,kBAAmBqD,IAE9CuE,MAAO,SAAevH,EAAU0E,GAC9B,OAAO,IAAI9D,EAAMZ,EAAU0E,EAAY3G,OAEzCwK,OAAQ,SAAiB9D,EAAWzB,GAClC,OAAOjF,KAAK+O,YAAY,SAAU,CAChCC,UAAW,CAAC,CACVxE,OAAQhE,EAAaE,MAEtBzB,IAELsE,OAAQ,SAAgByF,EAAW/J,GACjC,IAAI2F,EAAMoE,aAAqBnM,GAASmM,aAAqBlM,EAAckM,EAAU/F,YAAc+F,EAC/FC,EAAOxN,MAAMC,QAAQkJ,GAAOA,EAAM,CAACA,GACnCV,EAAgBjF,GAAWA,EAAQiF,cACvC,OAAOlK,KAAK+O,YAAY,SAAU,CAChCC,UAAWC,EACX/E,cAAeA,GACdjF,IAELiK,YAAa,SAAqBvI,GAChC,OAAO,IAAI7D,EAAY6D,EAAY3G,OAErC+O,YAAa,SAAqBI,EAAU1J,GAC1C,IAAIR,EAAUtB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAE9E2B,EAAUtF,KAAKqO,aAAac,EAAU1J,EAAMR,GAEhD,OAAOjF,KAAKoE,eAAiBsB,EAAUJ,GAAWA,GAEpD+I,aAAc,SAAsBc,EAAU1J,GAC5C,IAAIR,EAAUtB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAC9EyL,EAA0B,WAAbD,EAGbE,GAAYD,GAAcnC,EAAkBxH,GAC5C6J,GAAUF,GAAcC,EAASzL,OApGjB,MAqGhB2L,EAAcD,EAASD,EAAW,GAClCjG,EAAcnE,EAAQmE,YACtBoG,EAAUvK,EAAQuK,QAClBC,EAAQxK,EAAQwK,MAChB/K,EAAM1E,KAAK0N,WAAWyB,EAAUI,GAChCnK,EAAa,CACfD,OAAQmK,EAAS,MAAQ,OACzB5K,IAAKA,EACL6J,MAAM,EACN9I,KAAM6J,OAASzL,EAAY4B,EAC3BqE,MAAOsF,GAAc/B,EAAiBpI,GACtCuK,QAASA,EACTC,MAAOA,GAET,OAAOzP,KAAKgF,mBAAmBI,GAAYG,KAAK3C,EAAO4K,GAAanL,EAAIoL,GAAUpL,GAAI,SAAU8L,GAC9F,IAAKiB,EACH,OAAOjB,EAIT,IAAIuB,EAAUvB,EAAIuB,SAAW,GAE7B,GAAIzK,EAAQqE,gBACV,OAAOF,EAAcsG,EAAQ,IAAMA,EAAQ,GAAGC,SAAWD,EAAQrN,KAAI,SAAUuI,GAC7E,OAAOA,EAAI+E,YAKf,IAAI3J,EAAMoD,EAAc,aAAe,cACnCsF,EAAMtF,EAAcsG,EAAQ,IAAMA,EAAQ,GAAG1O,GAAK0O,EAAQrN,KAAI,SAAUuI,GAC1E,OAAOA,EAAI5J,MAEb,OAAO+E,EAAgB,CACrBmE,cAAeiE,EAAIjE,cACnBwF,QAASA,GACR1J,EAAK0I,QAGZI,QAAS,SAAiBlN,EAAKL,GAC7B,IAAI0D,EAAUtB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAE9EiM,EAAW7J,EAAgB,GAAIxE,EAAIK,GAEnCyH,EAAO3G,EAAO,CAChB0G,aAAa,EACbE,iBAAiB,GAChBrE,GACH,OAAOjF,KAAK+O,YAAY,SAAU,CAChCC,UAAW,CAACY,IACXvG,M,6BC9MP,IAAI3G,EAASC,EAAQ,IAEjBkN,EAAalN,EAAQ,KAErBmN,EAAwBnN,EAAQ,KAEhCoN,EAAOpN,EAAQ,KAEfqN,EAAWrN,EAAQ,KAEnBsK,EAAoBtK,EAAQ,KAE5BsN,EAAkBtN,EAAQ,KAE1BuN,EAAOvN,EAAQ,KAEfwN,EAAe,CAAC,4DAA6D,sBAAsB/O,OAAO6O,EAAgB,qCAAsC,MAEhKG,EAAoBF,GAAK,WAC3B,OAAO7I,QAAQC,KAAK6I,EAAa9O,KAAK,SAEpCgP,EAAsBC,QAA0B,qBAAXC,QAA0BA,OAAOC,aACtEA,EAAcH,EAAsBE,OAAOC,YAC7CV,EAEEW,EAAkB,CAAC,0BAA2B,gBAAiB,aAAc,gBAC7EC,EAAiB,CACnBC,eAAe,GAyHjB,SAASC,EAAWpL,GAClB,IACE,IAAIqL,EAAOrL,EAAMqL,MAAQpF,KAAKqF,MAAMtL,EAAMqL,OAAS,GACnD,OAAOnO,EAAO,CACZxB,KAAMsE,EAAMtE,MACX2P,GACH,MAAOE,GACP,OAAOA,GAIX,SAASC,EAAaD,GACpB,GAAIA,aAAejQ,MACjB,OAAOiQ,EAGT,IAAIE,EAAML,EAAWG,GACrB,OAAOE,aAAenQ,MAAQmQ,EAAM,IAAInQ,MAG1C,SAA6BiQ,GAC3B,IAAKA,EAAInH,MACP,OAAOmH,EAAIG,SAAW,yBAGxB,GAAIH,EAAInH,MAAMuH,YACZ,OAAOJ,EAAInH,MAAMuH,YAGnB,MAA4B,kBAAdJ,EAAInH,MAAqBmH,EAAInH,MAAQ6B,KAAKC,UAAUqF,EAAInH,MAAO,KAAM,GAZrCwH,CAAoBH,IAvIpEnL,EAAOpF,QAAU,SAAgBoJ,EAAOoB,GACtC,IAAI7B,EAAO1F,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAC3EsB,EAAU+K,EAAS3G,EAAMqH,GACzBW,EAAatB,EAAK9K,EAASwL,GAC3BlF,EAAK0B,EAAkB,CACzBnD,MAAOA,EACPoB,OAAQA,EACRjG,QAASoM,IAEPC,EAAqBtR,KAAKmE,aAC1BW,EAAMwM,EAAmBxM,IACzB2K,EAAQ6B,EAAmB7B,MAC3B8B,EAAkBD,EAAmBC,gBACrC7M,EAAM,GAAGtD,OAAO0D,GAAK1D,OAAOpB,KAAK0N,WAAW,SAAUnC,IACtDiG,EAAYvM,EAAQwM,OAASxM,EAAQwM,OAAS,CAAC,YAC/CC,GAA0D,IAApCF,EAAUrQ,QAAQ,aAExCsO,GAASY,GACXD,IAGF,IAAIuB,EAAY,GAYhB,OAVIlC,GAAS8B,KACXI,EAAUJ,iBAAkB,GAG1B9B,IACFkC,EAAUC,QAAU,CAClBC,cAAe,UAAUzQ,OAAOqO,KAI7B,IAAII,GAAW,SAAUiC,GAC9B,IACIC,EADAC,EAAKC,IAELC,GAAU,EAEd,SAASC,IACHD,IAgDAR,GACFI,EAASnI,KAAK,CACZzI,KAAM,cA5CNgR,GASAF,EAAGI,aAAe5B,EAAY6B,SAChCC,IACAC,aAAaR,GACbA,EAAiBS,WAAWC,EAAM,OAItC,SAASC,EAAe3B,GACtBe,EAASlI,MAAMoH,EAAaD,IAG9B,SAAS4B,EAAU1B,GACjB,IAAIzL,EAAQoL,EAAWK,GACvB,OAAOzL,aAAiB1E,MAAQgR,EAASlI,MAAMpE,GAASsM,EAASnI,KAAKnE,GAGxE,SAASoN,EAAa3B,GACpBiB,GAAU,EACVI,IACAR,EAASe,WAGX,SAASP,IACPN,EAAGc,oBAAoB,QAASX,GAAS,GACzCH,EAAGc,oBAAoB,eAAgBJ,GAAgB,GACvDV,EAAGc,oBAAoB,aAAcF,GAAc,GACnDpB,EAAUuB,SAAQ,SAAU7R,GAC1B,OAAO8Q,EAAGc,oBAAoB5R,EAAMyR,GAAW,MAEjDX,EAAGgB,QAWL,SAASf,IACP,IAAIgB,EAAM,IAAIzC,EAAY9L,EAAKiN,GAO/B,OANAsB,EAAIC,iBAAiB,QAASf,GAAS,GACvCc,EAAIC,iBAAiB,eAAgBR,GAAgB,GACrDO,EAAIC,iBAAiB,aAAcN,GAAc,GACjDpB,EAAUuB,SAAQ,SAAU7R,GAC1B,OAAO+R,EAAIC,iBAAiBhS,EAAMyR,GAAW,MAExCM,EAGT,SAASR,IACPT,EAAKC,IAQP,OALA,WACEC,GAAU,EACVI,U,6BC7IN,IACIzC,EADWlN,EAAQ,KACGkN,WAEtBnN,EAASC,EAAQ,IAGjBN,EADYM,EAAQ,IACJN,IAGhBO,EADYD,EAAQ,IACDC,OAGnB0I,EADY3I,EAAQ,KACD2I,OAOvB,SAAS6H,IACPtD,EAAW7D,MAAMhM,KAAM2D,WAkBzB,SAASyP,EAAyBxS,EAAMW,GACtC,IAAI8R,GAAY,EAChB,OAAO,WAML,OALKA,IACHA,GAAY,EACZhM,QAAQC,KAAK,IAAIxG,MAAM,sBAAsBM,OAAOR,EAAM,oDAAoDQ,OAAOR,EAAM,qBAGtHZ,KAAKuF,KAAKhE,EAAGyK,MAAMhM,KAAM2D,aAvBpCwP,EAAwBpT,UAAYmG,OAAOkE,OAAO1H,EAAOwD,OAAOkE,OAAO,MAAOyF,EAAW9P,YACzFmG,OAAOC,eAAegN,EAAwBpT,UAAW,cAAe,CACtEkG,MAAOkN,EACP/M,YAAY,EACZE,UAAU,EACVD,cAAc,IAGhB8M,EAAwBpT,UAAUuT,KAAO,SAAcC,GACrD,IAAIjP,EAAa,IAAI6O,EAGrB,OAFA7O,EAAWkP,OAASxT,KACpBsE,EAAWiP,SAAWA,EACfjP,GAeT6O,EAAwBpT,UAAUsC,IAAM+Q,EAAyB,MAAO/Q,GACxE8Q,EAAwBpT,UAAU6C,OAASwQ,EAAyB,SAAUxQ,GAC9EuQ,EAAwBpT,UAAUuL,OAAS8H,EAAyB,SAAU9H,GAC9ExF,EAAOpF,QAAUyS,G,8ECvDjB,YASA,0BAA+B,GAC3B,KAAK,GAAU,CACT,QAAE,WAAQ,gBAAa,cACzB,MAAU,EACN,OAAC,EAEP,EADS,GAAe,aAAuB,aACpC,EAEA,KAGf,OAAO,I,8ECpBT,YACA,SACI,EAAJ,OAGA,wBACE,EACA,EACA,GAEE,GAAE,EAAgB,CACd,gBAA0B,aAC5B,OAAwB,EAGtB,KAAe,gBACjB,OAAO,EAAe,kBAI1B,OAAK,GAAmB,GAAU,EAI3B,IAAI,aAAW,EAAgB,EAAO,GAHpC,IAAI,aAAW,W,8ECXb,aAAsC,oBAAX,QAAyB,OAAO,YAAvC,gB,8ECVjC,oBAA4B,GAC1B,OAAO,I,gBCDTzS,EAAQ4K,OAAS3I,EAAQ,KAAkC2I,Q,8ECC3D,aACI,EAAJ,OACI,EAAJ,OAEImI,EAAS,EAAb,KA2DA,kBAA6B,EAA8D,GAMzF,OAAI,UAAU,QAAU,EACf,SAAwC,GAC7C,OAAO,OAAK,OAAK,EAAa,GAAO,WAAS,GAAI,iBAAe,GAA1D,CAAiE,IAGrE,SAAgC,GACrC,OAAO,OACL,QAAe,SAAC,EAAK,EAAO,GAAU,SAAY,EAAK,EAAO,EAAxB,MACtC,WAAS,GAFJ,CAGL,M,mbC7EN,YAoDA,gBAA2B,EAAqD,GAC5E,IAAE,GAAU,EAUZ,OAJE,UAAU,QAAU,IAClB,GAAM,GAGL,SAA8B,GAC/B,OAAG,EAAO,KAAK,IAAI,EAAa,EAAa,EAAM,MAI3D,iBACI,SAAF,EAAoB,EAA6D,EAAsB,sBAAnF,mBAA6D,YAAsB,eAKvG,OAHE,EAAF,wBAAK,EAA2B,GAC1B,OAAG,EAAO,UAAU,IAAI,EAAe,EAAY,KAAK,YAAa,KAAK,KAAM,KAAK,WAE7F,EANA,GAaA,cAYE,WAAY,EAAoC,EAA6D,EACzF,GADpB,MAEE,YAAM,IAAY,K,OAF4B,gBAA6D,UACzF,YAZZ,QAAgB,E,EAoC1B,OArCmC,OAGjC,sBAAI,mBAAI,C,IAAR,WACE,OAAO,KAAK,O,IAGd,SAAS,GACP,KAAK,SAAU,EACf,KAAK,MAAQ,G,gCAQL,kBAAV,SAAgB,GACd,GAAK,KAAK,QAIR,OAAO,KAAK,SAAS,GAHrB,KAAK,KAAO,EACZ,KAAK,YAAY,KAAK,IAMlB,qBAAR,SAAiB,GACf,IACI,EADE,EAAQ,KAAK,QAEnB,IACE,EAAS,KAAK,YAAe,KAAK,KAAM,EAAO,GAC/C,MAAO,GACP,KAAK,YAAY,MAAM,GAEzB,KAAK,KAAO,EACZ,KAAK,YAAY,KAAK,IAE1B,EArCA,CAAmC,e,mbClFnC,IAAI,EAAJ,MACA,SACA,SA8CA,oBAA4B,GACxB,OAAK,SAAkC,GACnC,OAAU,IAAV,EACK,UAEA,EAAO,KAAK,IAAI,EAAiB,MAK9C,iBACI,SAAF,EAAoB,GAClB,GADkB,aACd,KAAK,MAAQ,EACf,MAAM,IAAI,0BAOd,OAHE,EAAF,wBAAK,EAA2B,GAC1B,OAAG,EAAO,UAAU,IAAI,EAAmB,EAAY,KAAK,SAEpE,EAVA,GAiBA,cAIE,WAAY,EAAoC,GAAhD,MACE,YAAM,IAAY,K,OAD4B,UAHxC,OAAiB,IAAI,MACrB,QAAgB,E,EAmC1B,OArCoC,OAQxB,kBAAV,SAAgB,GACd,IAAM,EAAO,KAAK,KACZ,EAAQ,KAAK,MACb,EAAQ,KAAK,QAEf,EAAK,OAAS,EAChB,EAAK,KAAK,GAGV,EADc,EAAQ,GACR,GAIR,sBAAV,WACE,IAAM,EAAc,KAAK,YACrB,EAAQ,KAAK,MAEjB,GAAI,EAAQ,EAIV,IAHA,IAAM,EAAQ,KAAK,OAAS,KAAK,MAAQ,KAAK,MAAQ,KAAK,MACrD,EAAQ,KAAK,KAEV,EAAI,EAAG,EAAI,EAAO,IAAK,CAC9B,IAAM,EAAO,IAAW,EACxB,EAAY,KAAK,EAAK,IAI1B,EAAY,YAEhB,EArCA,CAAoC,e,8ECrEpC,IAAM,EAA+B,WACjC,SAAO,IAIP,OAHA,MAAM,KAAK,MACX,KAAK,QAAU,wBACf,KAAK,KAAO,0BACL,KAKT,OAFA,EAA4B,UAAY,OAAO,OAAO,MAAM,WAErD,EAV4B,GAuBxB,0BAAuD,G,8EC9BpE,aAOa,QAAQ,IAAI,cAAkB,YAAc,uBAsDzD,iBAAsB,GACpB,OAAO,EAGT,SAAwB,GACtB,OAAO,IAAI,cAAkB,YAAc,SAAU,UAAS,WAAM,0BAJjD,CAAe,GAAa,U,mbC5DjD,YA4CA,0BAAqC,GACjC,YADiC,gBAC5B,SAAC,GAA0B,SAAO,KAAK,IAAI,EAAhB,MAGpC,iBAEE,WAAoB,uBAMtB,OAHE,0BAAK,EAA+B,GAClC,OAAO,EAAO,UAAU,IAAI,EAAyB,EAAY,KAAK,gBAE1E,EARA,GAeA,cAGE,WAAY,EAAwC,GAApD,MACE,YAAM,IAAY,K,OADgC,iBAF5C,WAAmB,E,EAiB7B,OAlB6C,OAOjC,kBAAV,SAAgB,GACd,KAAK,SAAU,EACf,KAAK,YAAY,KAAK,IAGd,sBAAV,WACM,KAAK,SACP,KAAK,YAAY,KAAK,KAAK,cAE7B,KAAK,YAAY,YAErB,EAlBA,CAA6C,e,gBChE7C,IAAIR,EAAMtQ,EAAQ,KAElBmD,EAAOpF,QAAU6P,OAAOC,aAAeyC,EAAIzC,a,gBCH3C,UAuBmB,qBAATkD,MAA8BA,KAbpCC,EAAO,QAAD,6BAaoC,WAC5C,IAAInD,EAAc,SAAU1L,EAAKG,GAC/B,IAAKH,GAAqB,iBAAPA,EACjB,MAAM,IAAI8O,YAAY,wBAGxB5T,KAAK6T,IAAM/O,EACX9E,KAAK8T,WAAW7O,GAChB,IAAIgO,EAAMjT,KACVwS,YAAW,WACTS,EAAIc,SACH,IAyVL,GAtVAvD,EAAYzQ,UAAY,CACtBiU,WAAY,EAEZC,KAAM,EAEN5B,OAAQ,EAER3B,eAAgB,CACdwD,gBAAgB,EAEhBC,cAAe,cAEfC,SAAU,IAEVC,gBAAiB,OAEjBC,cAAe,IAEfC,QAAS,CACPC,sBAAuB,QAGzBC,WAAY,CACVC,OAAQ,oBACR,gBAAiB,WACjB,mBAAoB,mBAIxBZ,WAAY,SAAU7O,GACpB,IACI0G,EADAqE,EAAWhQ,KAAK0Q,eAIpB,IAAK/E,KAAUqE,EACTA,EAAS9D,eAAeP,KAC1B3L,KAAK2L,GAAUqE,EAASrE,IAK5B,IAAKA,KAAU1G,EACT0G,KAAUqE,GAAY/K,EAAQiH,eAAeP,KAC/C3L,KAAK2L,GAAU1G,EAAQ0G,IAMvB3L,KAAKuU,SAAWvU,KAAKqU,kBACvBrU,KAAKuU,QAAQC,sBAAwBxU,KAAKqU,iBAKrB,qBAAZhN,SAAkD,qBAAhBA,QAAQsN,MACnD3U,KAAKkU,gBAAiB,IAI1BS,IAAK,SAAUzD,GACTlR,KAAKkU,gBAEP7M,QAAQsN,IAAI,IAAM3U,KAAKmU,cAAgB,KAAOjD,IAIlD6C,KAAM,WACJ,IACE,GAAI/T,KAAKoS,YAAcpS,KAAKqS,OAC1B,OAGFrS,KAAK4U,UACL5U,KAAKoS,WAAapS,KAAKgU,WACvBhU,KAAK6U,OAAS,EACd7U,KAAK8U,MAAQ,GACb9U,KAAK+U,KAAO,IAAI/U,KAAKgV,IAAIhV,MACzBA,KAAKiV,uBACL,MAAOlE,GAEP/Q,KAAK2U,IAAI,+CACT3U,KAAKkV,cAAc,QAAS,CAAChU,KAAM,QAAS2P,KAAME,EAAIG,YAI1DiE,UAAW,SAAUf,GAEnB,IAAInB,EAAMjT,KACViT,EAAIb,WAAaa,EAAIe,WACrBf,EAAIiC,cAAc,QAAS,CACzBhU,KAAM,QACN2P,KAAM,kBAER7Q,KAAKoV,WAAa5C,YAAW,WAC3BS,EAAIc,SACHK,GAAY,IAGjBQ,QAAS,WACP5U,KAAK2U,IAAI,mBAEL3U,KAAKoV,aACPC,cAAcrV,KAAKoV,YACnBpV,KAAKoV,WAAa,MAGhBpV,KAAKsV,mBACPD,cAAcrV,KAAKsV,kBACnBtV,KAAKsV,iBAAmB,MAGtBtV,KAAK+U,OACP/U,KAAK+U,KAAKQ,QACVvV,KAAK+U,KAAO,OAIhBE,qBAAsB,WACpB,GAAIjV,KAAKsU,cAAe,CAClBtU,KAAKsV,kBACPD,cAAcrV,KAAKsV,kBAErB,IAAIrC,EAAMjT,KACVA,KAAKsV,iBAAmB9C,YAAW,WACjCS,EAAI0B,IAAI,0BAA4B1B,EAAIqB,eACxCrB,EAAIkC,cACHnV,KAAKsU,iBAIZtB,MAAO,WACLhT,KAAKoS,WAAapS,KAAKqS,OACvBrS,KAAK2U,IAAI,mCAAqC3U,KAAKoS,YACnDpS,KAAK4U,WAGPY,WAAY,WACV,IAAIlQ,EAAUtF,KAAK+U,KAEnB,GAAIzP,EAAQmQ,YAAcnQ,EAAQoQ,WAAY,CAE5C1V,KAAKiV,uBAGDjV,KAAKoS,YAAcpS,KAAKgU,aAC1BhU,KAAKoS,WAAapS,KAAKiU,KACvBjU,KAAKkV,cAAc,OAAQ,CAAChU,KAAM,UAGpC,IAAIyU,EAASrQ,EAAQsQ,YAEjBD,EAAO/R,OAAS5D,KAAKqU,kBACvBrU,KAAK2U,IAAI,wCACT3U,KAAKmV,aAGY,GAAfnV,KAAK6U,QAAec,EAAO/R,OAAS,GAER,UAA1B+R,EAAOE,UAAU,EAAG,KACtB7V,KAAK6U,OAAS,GAIlB,IAAIiB,EAAmB9V,KAAK8V,iBAAiBH,GAC7C,GAAIG,EAAiB,IAAM9V,KAAK6U,OAAQ,CACtC,IAAIkB,EAAYD,EAAiB,GAC7BE,EAAUL,EAAOE,UAAU7V,KAAK6U,OAAQkB,GAC5C/V,KAAKiW,YAAYD,GACjBhW,KAAK6U,OAASkB,EAIZzQ,EAAQ4Q,WACVlW,KAAK2U,IAAI,8CACT3U,KAAKmV,UAAUnV,KAAKoU,gBAEbpU,KAAKoS,aAAepS,KAAKqS,SAClCrS,KAAK2U,IAAI,mCACT3U,KAAKmV,UAAUnV,KAAKoU,YAMxB6B,YAAa,SAAUE,GAKrB,IAEItJ,EAAGuJ,EAAGC,EAAWC,EAAOC,EAAMC,EAF9B/E,GAFJ0E,EAAQnW,KAAK8U,MAAQ9U,KAAKyW,cAAcN,IAErBlP,MAAM,QAIzB,IAAK4F,EAAI,EAAGA,EAAI4E,EAAO7N,OAAS,EAAGiJ,IAAK,CACtCwJ,EAAY,UACZC,EAAQ,GACR,IAAII,EAAQjF,EAAO5E,GAAG5F,MAAM,MAE5B,IAAKmP,EAAI,EAAGA,EAAIM,EAAM9S,OAAQwS,IAGC,IAF7BG,EAAOvW,KAAK2W,eAAeD,EAAMN,KAExBjV,QAAQ,SACfkV,EAAYE,EAAKxR,QAAQ,aAAc,IACL,GAAzBwR,EAAKpV,QAAQ,UACtBqV,EAAQI,SAASL,EAAKxR,QAAQ,aAAc,IAAK,IAC5C8R,MAAML,KACTxW,KAAKoU,SAAWoC,IAEe,GAAxBD,EAAKpV,QAAQ,QACtBmV,EAAMzL,KAAK0L,EAAKxR,QAAQ,YAAa,KACL,GAAvBwR,EAAKpV,QAAQ,OACtBnB,KAAK8W,YAAcP,EAAKxR,QAAQ,UAAW,IACZ,GAAtBwR,EAAKpV,QAAQ,QAGtBnB,KAAK8W,YAAc,MAIvB,GAAIR,EAAM1S,QAAU5D,KAAKoS,YAAcpS,KAAKqS,OAAQ,CAElD,IAAI7M,EAAQ,IAAIuR,EACdV,EACAC,EAAMjV,KAAK,MACO,qBAAXkP,QAAqD,qBAApBA,OAAOyG,SAC3CzG,OAAOyG,SAASC,OAChB,KACJjX,KAAK8W,aAEP9W,KAAKkV,cAAcmB,EAAW7Q,IAIlCxF,KAAK8U,MAAQrD,EAAOA,EAAO7N,OAAS,IAGtCsR,cAAe,SAAUhU,EAAMsE,GAC7B,IAAI0R,EAAWlX,KAAK,IAAMkB,EAAO,YAEjC,GAAIgW,EACF,IAAK,IAAIrK,EAAI,EAAGA,EAAIqK,EAAStT,OAAQiJ,IACnCqK,EAASrK,GAAGH,KAAK1M,KAAMwF,GAIvBxF,KAAK,KAAOkB,IACdlB,KAAK,KAAOkB,GAAMwL,KAAK1M,KAAMwF,IAIjC0N,iBAAkB,SAAUhS,EAAMiW,GAC3BnX,KAAK,IAAMkB,EAAO,cACrBlB,KAAK,IAAMkB,EAAO,YAAc,IAGlClB,KAAK,IAAMkB,EAAO,YAAY2J,KAAKsM,IAGrCrE,oBAAqB,SAAU5R,EAAMiW,GACnC,IAAID,EAAWlX,KAAK,IAAMkB,EAAO,YACjC,GAAKgW,EAGL,IAAK,IAAIrK,EAAIqK,EAAStT,OAAS,EAAGiJ,GAAK,IAAKA,EAC1C,GAAIqK,EAASrK,KAAOsK,EAAS,CAC3BD,EAAS7O,OAAOwE,EAAG,GACnB,QAKNuI,WAAY,KAEZgC,iBAAkB,KAElBrC,KAAM,KAEN+B,YAAa,KAEbhC,MAAO,GAEPD,OAAQ,EAERwC,QAAS,KAETC,UAAW,KAEXC,OAAQ,KAERnF,WAAY,EAMZoF,cAAe,SAAUC,EAASvM,GAChC,IAAIwM,EAAc,GAElB,GAAIxM,EAAQ,CACV,IAAIlF,EAAK2R,EACLC,EAAS7M,mBAEb,IAAK/E,KAAOkF,EACNA,EAAOgB,eAAelG,KACxB2R,EAASC,EAAO5R,GAAO,IAAM4R,EAAO1M,EAAOlF,IAC3C0R,EAAY7M,KAAK8M,IAKvB,OAAID,EAAY9T,OAAS,GACM,GAAzB6T,EAAQtW,QAAQ,KAAmBsW,EAAU,IAAMC,EAAYrW,KAAK,KACjEoW,EAAU,IAAMC,EAAYrW,KAAK,KAEnCoW,GAGT3B,iBAAkB,SAAU+B,GAC1B,IAAIC,EAAMD,EAAKE,YAAY,QACvBC,EAAMH,EAAKE,YAAY,QACvBE,EAAQJ,EAAKE,YAAY,YAE7B,OAAIE,EAAQvP,KAAKC,IAAImP,EAAKE,GACjB,CAACC,EAAOA,EAAQ,GAElB,CAACvP,KAAKC,IAAImP,EAAKE,GAAMtP,KAAKC,IAAImP,EAAKE,GAAO,IAGnDrB,eAAgB,SAAUzP,GAGxB,IAAIgR,EAAS,+BACb,OAAOhR,EAAInC,QAAQmT,EAAQ,KAG7BzB,cAAe,SAAUvP,GAEvB,OAAOA,EAAInC,QAAQ,WAAY,QAI/BoT,IAAW,CACb3H,EAAY4H,WAAa,SAGzB,IAAIpI,EAAWQ,EAAYzQ,UAAU2Q,eACrCV,EAASyE,WAAa,KACtBzE,EAASuE,QAAQ8D,aAAe,KAGhC7H,EAAYzQ,UAAUiV,IAAM,SAAU/B,GAEpC,IAAI3N,EAAU,IAAIgT,eAClBtY,KAAKuY,SAAWjT,EAGhBA,EAAQkT,WAAa,WACnBlT,EAAQmT,QAAS,EACjBxF,EAAIuC,cAGNlQ,EAAQoT,OAAS,WACf1Y,KAAK2Y,SAAU,EACf1F,EAAIuC,cAGNlQ,EAAQ+R,QAAU,WAChBrX,KAAK4Y,SAAU,EACf3F,EAAIb,WAAaa,EAAIZ,OACrBY,EAAIiC,cAAc,QAAS,CACzBhU,KAAM,QACN2P,KAAM,0BAIVvL,EAAQuT,UAAY,WAClB7Y,KAAK4Y,SAAU,EACf3F,EAAIb,WAAaa,EAAIZ,OACrBY,EAAIiC,cAAc,QAAS,CACzBhU,KAAM,QACN2P,KAAM,8BAOV,IAAIiI,EAAa,GACjB,GAAI7F,EAAIsB,QAAS,CAEf,IAAIwE,EAAc9F,EAAIsB,QACtB,IAAK,IAAIvO,KAAO+S,EACVA,EAAY7M,eAAelG,KAC7B8S,EAAW9S,GAAO+S,EAAY/S,IAG9BiN,EAAI6D,cACNgC,EAAWE,kBAAoB/F,EAAI6D,aAKvCxR,EAAQmN,KAAK,MAAOQ,EAAIuE,cAAcvE,EAAIY,IAAKiF,IAC/CxT,EAAQ2T,QAGVzI,EAAYzQ,UAAUiV,IAAIjV,UAAY,CACpCmZ,mBAAmB,EAEnBX,SAAU,KAEVE,QAAQ,EAERE,SAAS,EAETC,SAAS,EAETnD,QAAS,WACP,OAAOzV,KAAKuY,SAASE,QAGvBvC,OAAQ,WACN,OAAOlW,KAAKuY,SAASI,SAGvBjD,SAAU,WACR,OAAO1V,KAAKuY,SAASK,SAGvBhD,UAAW,WACT,IAAIuD,EAAK,GACT,IACEA,EAAKnZ,KAAKuY,SAASa,cAAgB,GACnC,MAAOrI,IAGT,OAAOoI,GAGT5D,MAAO,WACDvV,KAAKuY,UACPvY,KAAKuY,SAAShD,eAKpB/E,EAAY4H,WAAa,MAGzB5H,EAAYzQ,UAAUiV,IAAM,SAAU/B,GACpC,IAAI3N,EAAU,IAAI+T,eAClBrZ,KAAKuY,SAAWjT,EAChB2N,EAAI8B,KAAO/U,KAGXsF,EAAQgU,mBAAqB,WACvBhU,EAAQ8M,WAAa,GAAKa,EAAIb,YAAca,EAAIZ,SAC5B,KAAlB/M,EAAQiU,QAAkBjU,EAAQiU,QAAU,KAAOjU,EAAQiU,OAAS,IACtEtG,EAAIuC,cAEJlQ,EAAQsT,SAAU,EAClB3F,EAAIb,WAAaa,EAAIZ,OACrBY,EAAIiC,cAAc,QAAS,CACzBhU,KAAM,QACN2P,KAAM,6BAA+BvL,EAAQiU,SAE/CtG,EAAID,WAKV1N,EAAQkT,WAAa,aAIrBlT,EAAQmN,KAAK,MAAOQ,EAAIuE,cAAcvE,EAAIY,IAAKZ,EAAIsB,UAAU,GAE7D,IAAI3C,EAAUqB,EAAIwB,WAClB,IAAK,IAAI+E,KAAU5H,EACbA,EAAQ1F,eAAesN,IACzBlU,EAAQmU,iBAAiBD,EAAQ5H,EAAQ4H,IAGzCvG,EAAI6D,aACNxR,EAAQmU,iBAAiB,gBAAiBxG,EAAI6D,aAGhDxR,EAAQ2T,QAGVzI,EAAYzQ,UAAUiV,IAAIjV,UAAY,CACpCmZ,mBAAmB,EAEnBX,SAAU,KAEVK,SAAS,EAETnD,QAAS,WACP,OAAOzV,KAAKuY,SAASnG,YAAc,GAGrC8D,OAAQ,WACN,OAAmC,GAA5BlW,KAAKuY,SAASnG,YAGvBsD,SAAU,WACR,OAAO1V,KAAK4Y,SAAW5Y,KAAKuY,SAASgB,QAAU,KAGjD3D,UAAW,WACT,IAAIuD,EAAK,GACT,IACEA,EAAKnZ,KAAKuY,SAASa,cAAgB,GACnC,MAAOrI,IAGT,OAAOoI,GAGT5D,MAAO,WACDvV,KAAKuY,UACPvY,KAAKuY,SAAShD,UAMtB,SAASwB,EAAa7V,EAAM2P,EAAMoG,EAAQH,GACxC9W,KAAK0Z,SAAU,EACf1Z,KAAK2Z,cAAe,EACpB3Z,KAAK4Z,YAAa,EAClB5Z,KAAK6Q,KAAOA,GAAQ,KACpB7Q,KAAKiX,OAASA,GAAU,GACxBjX,KAAK8W,YAAcA,GAAe,GAClC9W,KAAKkB,KAAOA,GAAQ,UAGtB,SAASiX,IAEP,OAAO7H,QACa,qBAAXC,QACLA,OAAO+H,gBACP/H,OAAO8I,qBAC+BxV,KAAtC,IAAIwV,gBAAiBQ,cAI3B,OAAOrJ,IA/jBC,gC,6BCRV1K,EAAOpF,QAAU,SAAUN,EAAK0G,GAC9B,OAAOA,EAAMwE,QAAO,SAAU5E,EAAWoT,GACvC,MAAyB,qBAAd1Z,EAAI0Z,KAIfpT,EAAUoT,GAAQ1Z,EAAI0Z,IAHbpT,IAKR,M,6BCRLZ,EAAOpF,QAAU,SAAUN,EAAK4P,GAC9B,OAAO9J,OAAOmF,KAAK2E,GAAU5O,OAAO8E,OAAOmF,KAAKjL,IAAMkL,QAAO,SAAUwB,EAAQgN,GAE7E,OADAhN,EAAOgN,GAA6B,qBAAd1Z,EAAI0Z,GAAwB9J,EAAS8J,GAAQ1Z,EAAI0Z,GAChEhN,IACN,M,6BCJL,IAAIpK,EAASC,EAAQ,IAEjB8D,EAAW9D,EAAQ,IAEvB,SAASK,EAAe4D,GACtB5G,KAAKsF,QAAUsB,EAAOtB,QAAQyU,KAAKnT,GAGrClE,EAAOM,EAAejD,UAAW,CAC/BqK,OAAQ,SAAgBxJ,EAAMqE,GAC5B,OAAOjF,KAAKga,QAAQ,MAAOpZ,EAAMqE,IAEnCgV,KAAM,SAAcrZ,EAAMqE,GACxB,OAAOjF,KAAKga,QAAQ,QAASpZ,EAAMqE,IAErCuF,OAAQ,SAAiB5J,GACvB,OAAOZ,KAAKga,QAAQ,SAAUpZ,IAEhCsZ,KAAM,WACJ,OAAOla,KAAKsF,QAAQ,CAClBZ,IAAK,eAGTsV,QAAS,SAAiB7U,EAAQvE,EAAM6E,GAEtC,OADAgB,EAAS9F,QAAQC,GACVZ,KAAKsF,QAAQ,CAClBH,OAAQA,EACRT,IAAK,aAAatD,OAAOR,GACzB6E,KAAMA,OAIZK,EAAOpF,QAAUsC,G,6BC9BjB,SAASC,EAAe2D,GACtB5G,KAAK4G,OAASA,EAHHjE,EAAQ,GAMrBD,CAAOO,EAAelD,UAAW,CAC/Bma,KAAM,WACJ,OAAOla,KAAK4G,OAAOtB,QAAQ,CACzBZ,IAAK,eAGTyV,QAAS,SAAiBnZ,GACxB,OAAOhB,KAAK4G,OAAOtB,QAAQ,CACzBZ,IAAK,aAAatD,OAAOJ,QAI/B8E,EAAOpF,QAAUuC,G,6BClBjB,SAASmX,EAAeC,EAAKxN,GAAK,OAUlC,SAAyBwN,GAAO,GAAI5Y,MAAMC,QAAQ2Y,GAAM,OAAOA,EAVtBC,CAAgBD,IAQzD,SAA+BA,EAAKxN,GAAK,GAAsB,qBAAXxM,UAA4BA,OAAOC,YAAY4F,OAAOmU,IAAO,OAAQ,IAAIE,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWC,OAAK7W,EAAW,IAAM,IAAK,IAAiC8W,EAA7BC,EAAKP,EAAIha,OAAOC,cAAmBka,GAAMG,EAAKC,EAAGjR,QAAQkR,QAAoBN,EAAK1P,KAAK8P,EAAG1U,QAAY4G,GAAK0N,EAAK3W,SAAWiJ,GAA3D2N,GAAK,IAAoE,MAAOzJ,GAAO0J,GAAK,EAAMC,EAAK3J,EAAtL,QAAuM,IAAWyJ,GAAsB,MAAhBI,EAAE,QAAoBA,EAAE,SAAzC,QAAmE,GAAIH,EAAI,MAAMC,GAAQ,OAAOH,EARjaO,CAAsBT,EAAKxN,IAI5F,SAAqCkO,EAAGC,GAAU,IAAKD,EAAG,OAAQ,GAAiB,kBAANA,EAAgB,OAAOE,EAAkBF,EAAGC,GAAS,IAAIE,EAAIhV,OAAOnG,UAAUiH,SAAS0F,KAAKqO,GAAG3T,MAAM,GAAI,GAAc,WAAN8T,GAAkBH,EAAExa,cAAa2a,EAAIH,EAAExa,YAAYK,MAAM,GAAU,QAANsa,GAAqB,QAANA,EAAa,OAAOzZ,MAAMgL,KAAKsO,GAAI,GAAU,cAANG,GAAqB,2CAA2Cra,KAAKqa,GAAI,OAAOD,EAAkBF,EAAGC,GAJpTG,CAA4Bd,EAAKxN,IAEnI,WAA8B,MAAM,IAAIP,UAAU,6IAFuF8O,GAMzI,SAASH,EAAkBZ,EAAKgB,IAAkB,MAAPA,GAAeA,EAAMhB,EAAIzW,UAAQyX,EAAMhB,EAAIzW,QAAQ,IAAK,IAAIiJ,EAAI,EAAGyO,EAAO,IAAI7Z,MAAM4Z,GAAMxO,EAAIwO,EAAKxO,IAAOyO,EAAKzO,GAAKwN,EAAIxN,GAAM,OAAOyO,EAMhL,IAAI5Y,EAASC,EAAQ,IAGjBN,EADWM,EAAQ,IACJN,IAGfO,EADYD,EAAQ,IACDC,OAEnB2Y,EAAc5Y,EAAQ,KAEtBqH,EAAarH,EAAQ,IAEzB,SAASO,EAAa0D,GACpB5G,KAAK4G,OAASA,EAGhB,SAAS4U,EAAW/V,GAElB,IAAIkK,EAAWlK,EAAKkK,SASpB,OARAzJ,OAAOC,eAAewJ,EAAU,WAAY,CAC1CvJ,YAAY,EACZqV,IAAK,WAGH,OADApU,QAAQC,KAAK,2FACNqI,KAGJA,EAGT,SAAS+L,EAAgBrS,EAAMsS,GAC7B,MAAsB,qBAAXpL,QAA4BoL,aAAgBpL,OAAOqL,KAIvDlZ,EAAO,CACZmZ,UAAoC,IAA1BxS,EAAKyS,sBAA6BjY,EAAY8X,EAAK/a,KAC7Dmb,YAAaJ,EAAKza,MACjBmI,GANMA,EASX3G,EAAOQ,EAAanD,UAAW,CA0B7Bic,OAAQ,SAAgBC,EAAWxW,GACjC,IAAI4D,EAAO1F,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAC/EqG,EAAW/I,kBAAkBgb,GAE7B,IAAIC,EAAO7S,EAAK8S,cAAWtY,EAEvBqY,IAASA,EAAKtY,SAChBsY,EAAO,CAAC,SAGV,IAAIvb,EAAUqJ,EAAWzH,WAAWvC,KAAK4G,OAAOzC,cAC5CiY,EAA8B,UAAdH,EAAwB,SAAW,QACnDhX,EAAUyW,EAAgBrS,EAAM5D,GAChC4W,EAAQpX,EAAQoX,MAChBC,EAAQrX,EAAQqX,MAChBnL,EAAclM,EAAQkM,YACtBoL,EAAatX,EAAQsX,WACrBV,EAAW5W,EAAQ4W,SACnBrI,EAASvO,EAAQuO,OACjB1J,EAAQ,CACVuS,MAAOA,EACPC,MAAOA,EACPnL,YAAaA,EACb0K,SAAUA,EACVK,KAAMA,EACNK,WAAYA,GAGV/I,IACF1J,EAAM0S,SAAWhJ,EAAOxS,GACxB8I,EAAM2S,WAAajJ,EAAO5S,KAC1BkJ,EAAM4S,UAAYlJ,EAAO1O,KAG3B,IAAIR,EAAatE,KAAK4G,OAAO5B,mBAAmB,CAC9CG,OAAQ,OACRqK,QAASvK,EAAQuK,SAAW,EAC5B9K,IAAK,WAAWtD,OAAOgb,EAAe,KAAKhb,OAAOT,GAClDiR,QAAS3M,EAAQ8W,YAAc,CAC7B,eAAgB9W,EAAQ8W,aACtB,GACJjS,MAAOA,EACPrE,KAAMA,IAGR,OAAOzF,KAAK4G,OAAOxC,eAAiBE,EAAWiB,KAAK3C,GAAO,SAAU4C,GACnE,MAAsB,aAAfA,EAAMtE,QACXmB,GAAI,SAAUmD,GAChB,OAAOgW,EAAWhW,EAAMC,UACtBC,YAAcpB,GAEpBkG,OAAQ,SAAiBtJ,EAAMF,GAE7BqG,QAAQC,KAAK,iFACb,IAAIqV,EAAQ3b,GAAM,GAUlB,MARK,iBAAiBH,KAAK8b,GAEhBzb,EAAKW,MAEd8a,EAAQzb,EAAKW,KAHb8a,EAAQ,GAAGvb,OAAOF,EAAM,KAAKE,OAAOub,GAMtC3S,EAAWzH,WAAWvC,KAAK4G,OAAOzC,cAC3BnE,KAAK4G,OAAO4D,OAAOmS,IAE5BC,YAAa,SAAqBC,EAAK/S,GACrC,IAAI9I,EAAK6b,EAAI7R,MAAQ6R,EAErB,GAAkB,kBAAP7b,EACT,MAAM,IAAIF,MAAM,2FAGlB,IAAK,2CAA2CD,KAAKG,GACnD,MAAM,IAAIF,MAAM,yBAA0BM,OAAOJ,EAAI,yDAGvD,IACI8b,EAAa1C,EADDpZ,EAAGiG,MAAM,KACkB,GACvC8V,EAAUD,EAAW,GACrBE,EAAOF,EAAW,GAClBG,EAASH,EAAW,GAExB9S,EAAWzH,WAAWvC,KAAK4G,OAAOzC,cAClC,IAAI+Y,EAAwBld,KAAK4G,OAAOzC,aACpCpD,EAAYmc,EAAsBnc,UAClCJ,EAAUuc,EAAsBvc,QAChC4K,EAAKzB,EAAQyR,EAAYzR,GAAS,GACtC,MAAO,gCAAgC1I,OAAOL,EAAW,KAAKK,OAAOT,EAAS,KAAKS,OAAO2b,EAAS,KAAK3b,OAAO4b,EAAM,KAAK5b,OAAO6b,GAAQ7b,OAAOmK,MAGpJzF,EAAOpF,QAAUwC,G,6BC1KjB4C,EAAOpF,QAAU,SAAUwK,GACzB,IAAIK,EAAK,GAET,IAAK,IAAIvF,KAAOkF,EACVA,EAAOgB,eAAelG,IACxBuF,EAAGV,KAAK,GAAGzJ,OAAO2J,mBAAmB/E,GAAM,KAAK5E,OAAO2J,mBAAmBG,EAAOlF,MAIrF,OAAOuF,EAAG3H,OAAS,EAAI,IAAIxC,OAAOmK,EAAGlK,KAAK,MAAQ,K,6BCPpD,SAAS8B,EAAYyD,GACnB5G,KAAK4G,OAASA,EAHHjE,EAAQ,GAMrBD,CAAOS,EAAYpD,UAAW,CAC5Boa,QAAS,SAAiBnZ,GACxB,OAAOhB,KAAK4G,OAAOtB,QAAQ,CACzBZ,IAAK,UAAUtD,OAAOJ,QAI5B8E,EAAOpF,QAAUyC,G,6BCXjB,SAASC,EAAWwD,GAClB5G,KAAK4G,OAASA,EAHHjE,EAAQ,GAMrBD,CAAOU,EAAWrD,UAAW,CAC3Bod,kBAAmB,WACjB,OAAOnd,KAAK4G,OAAOtB,QAAQ,CACzBZ,IAAK,qBAGT0Y,OAAQ,WACN,OAAOpd,KAAK4G,OAAOtB,QAAQ,CACzBZ,IAAK,eACLS,OAAQ,YAIdW,EAAOpF,QAAU0C,G,6BClBjB,IAAIia,EAAQ1a,EAAQ,KAEhBD,EAASC,EAAQ,IAEjB2B,EAAa3B,EAAQ,KAErB2a,EAAc3a,EAAQ,KAEtB4a,EAAe5a,EAAQ,KAEvB6a,EAAW7a,EAAQ,KAEnBkN,EAAalN,EAAQ,KAErB8a,EAAW9a,EAAQ,KACnBgD,EAAc8X,EAAS9X,YACvBC,EAAc6X,EAAS7X,YAEvB8X,EAAY,CACdC,WAAY,SAAoBxP,GAC9B,GAAIA,EAAIyP,YAAc,IACpB,MAAM,IAAIhY,EAAYuI,GACjB,GAAIA,EAAIyP,YAAc,IAC3B,MAAM,IAAIjY,EAAYwI,GAGxB,OAAOA,IASP7I,EAAU+X,EALI1a,EAAQ,KAEGvB,OAAO,CAACkc,IAAeC,IAAgBC,IAAYE,EAAWpZ,EAAW,CACpGuZ,eAAgBhO,OAIlB,SAASxM,EAAY4B,GACnB,IAAII,EAAY1B,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK2B,EACpF,OAAOD,EAAU3C,EAAO,CACtBob,aAAc,GACb7Y,IAGL5B,EAAYwC,iBAAmBP,EAC/BjC,EAAYsC,YAAcA,EAC1BtC,EAAYuC,YAAcA,EAC1BE,EAAOpF,QAAU2C,G,gBClDjByC,EAAOpF,QAAUiC,EAAQ,M,6BCAzB,IAAMob,EAASpb,EAAf,KACMqb,EAAoBrb,EAA1B,KACMsb,EAAiBtb,EAAvB,KACMub,EAAkBvb,EAAxB,KACMU,EAAcV,EAApB,KAEMwb,EAAe,CAAC,UAAW,WAAY,WAAY,QAAzD,SACMC,EAAc,CAAC,iBAAD,qGAApB,aAYAtY,EAAOA,QAAU,SAASuY,IAAqC,IAArBC,EAAqB,uDAAJ,GACnDC,EAAN,GACMC,EAAaJ,EAAY9S,QAC7B,cAEE,OADAmT,KAAaA,EAAKA,IAAlBA,GACA,IAEF,CACER,eAAgB,CADlB,GAEEC,gBAAiB,CAACA,KAItB,cACE,IAAMQ,EAAWP,EAAa7S,QAAO,cAEnC,OADAwB,KAAeiR,IACf,IAFF,IAMMY,EAAkBX,EAAxB,GAGM/Y,EAAU0Z,EAAgBA,iBAAhC,GAGAA,uBAGA,IAAMC,EAAU,CAAC3Z,QAAD,EAAUyZ,SAAV,EAAoBC,mBAKhCE,EAAJ,KACMvM,EAAcoM,EAASpZ,QAAQwZ,WAAU,SAAAC,GAE7CF,EAAiBxb,EAAY0b,GAAK,qBAyBpC,gBACE,IAAInV,EAAJ,EACIoV,EAAJ,EAIA,MACE,IACEA,EAAWL,EAAgBA,aAAcA,EAAzCK,GACA,MAAOjO,GACPiO,OACApV,KAMJA,EAAQA,GAAS+U,EAAgBA,UAAWA,EAA5C/U,IAIE8U,mBACSM,GACTN,sBAhD8Cf,CAAWA,EAAKA,EAA9B,SAKpCe,mBAAyB,WACvBpM,IACA,GACEuM,aAMJ,IAAM/S,EAAc6S,EAAgBA,WAAYA,EAAhD,GASA,OAJI7S,IAAJ,GACE4S,qBAGF,EA+DF,OAjCApZ,MAAc,SAAa2Z,GACzB,MACE,MAAM,IAAIne,MAAV,yDAGF,uBAAWme,EACT,MAAM,IAAIne,MAAV,+FAKF,GAAIme,EAAcA,UAAYT,EAAWA,SAASA,OAAlD,EACE,MAAM,IAAI1d,MAAV,uHAYF,OAPAsd,WAAoB,SAAApY,GACdiZ,EAAJ,IACET,UAAqBS,EAArBT,OAIJD,UACA,GAGFjZ,QAAgB,WACd,OAAO+Y,EAAP,IAGFC,UAAuBhZ,EAAvBgZ,KAEA,I,cC9IFxY,EAAOpF,QAAU,WACf,IAAIwe,EAAc,GAClB,MAAO,CACLJ,UAGF,SAAmBK,GAEjB,OADAD,EAAYrU,KAAKsU,GACV,WACL,IAAIC,EAAMF,EAAY/d,QAAQge,GAC1BC,GAAO,GACTF,EAAY7W,OAAO+W,EAAK,KAP5BC,QAWF,WACE,IAAK,IAAIxS,EAAI,EAAGA,EAAIqS,EAAYtb,OAAQiJ,IACtCqS,EAAYrS,GAAGb,MAAM,KAAMrI,e,6BCjBjCmC,EAAOA,QAAU,SAAA0Y,GAiBf,OAhBwB,SAACc,EAAMC,GAA0B,2BAATC,EAAS,6BAATA,EAAS,kBAIvD,IAHA,IAAMC,EAAN,YAAkBH,EAEdrZ,EAAJ,EACS4G,EAAT,EAAgBA,EAAI2R,EAAWA,GAA/B,OAA6C3R,IAAK,CAChD,IAAMsK,EAAUqH,EAAWA,GAA3B,GAGA,GAFAvY,EAAQkR,0BAARlR,IAEIwZ,IAAJ,EACE,MAIJ,Y,6BCdJ,IAAMC,EAAe/c,EAArB,IACMgd,EAAWhd,EAAjB,KAEMid,EAAqC,qBAAdC,WAA7B,gBAAiEA,UAAUA,QAErEC,EAAM5Z,OAAOA,UAAnB,eACMwK,EAAiB,CAAClB,QAASoQ,EAAgBA,IAAjD,MAiCA,SAASG,EAAqB3f,GAC5B,IAAM4f,EAAN,GACA,IAAK,IAAL,OACMF,EAAIA,KAAKA,EAAb,IACEjV,IAAUzK,EAAVyK,IAIJ,OAAOmV,EAAMA,OAASA,EAAMA,KAArBA,KAAP,GAEA,gBACMve,MAAMA,QAAV,GACED,WAAY,SAAAye,GAAA,OAAQpV,EAAKA,EAAboV,MAEZD,OAAW,CAACha,EAAKxE,GAAKa,IAAI0I,oBAAoB1J,KAA9C2e,OAKN,SAASE,EAAiBC,GACxB,IAAaA,IAATA,GAAJ,IAAsBA,EACpB,SAGF,GAAIA,EAAKA,SAAWA,EAApB,OACE,SAGF,IAAMC,EAAQC,OAAd,GACA,OAAIxJ,MAAJ,GACSqJ,EAAiBxP,EAAxB,SAGK,CAAC4P,QAAD,EAAiBC,OAAxB,GAhEFza,EAAOA,QAAU,SAAAuD,GACf,IAAMpE,EACY,kBAAToE,EACHqW,EAAa,CAAC5a,IAAd4a,GADJ,GAEIA,EAAaA,GAAIA,EAHvB,GAMM5a,EAAM6a,EACV1a,EADUH,IAAA,OAqBZ,OAdAG,UAAkBib,EAAiBjb,EAAnCA,SAGIA,EAAJ,QACEH,QAAY4a,EAAaA,GAAI5a,EAAjB4a,MAiDhB,SAAyBtf,GACvB,IAAM0M,EAAN,GACA,IAAK,IAAL,YACE,IAAI1M,EAAIA,KACN0M,KAAc1M,EAAd0M,IAGJ,SAxD0C0T,CAAgBvb,EAAxDH,SAIFG,SACEA,EAAQA,OAASA,EAAjBA,eAA4CA,EAAQA,QAAT,OAD7CA,cAIAA,MAAcH,EAAIA,SAAlBG,GAEA,I,8BCpCF,YAEA,IAAIwb,EAAW9d,EAAQ,KACnB4I,EAAK5I,EAAQ,KACb+d,EAAU,gCACVC,EAAa,0CAEbC,EAAO,IAAIC,OAAO,gLAQtB,SAASC,EAAS5Z,GAChB,OAAQA,GAAY,IAAIF,WAAWjC,QAAQ6b,EAAM,IAenD,IAAIG,EAAQ,CACV,CAAC,IAAK,QACN,CAAC,IAAK,SACN,SAAkBC,GAChB,OAAOA,EAAQjc,QAAQ,KAAM,MAE/B,CAAC,IAAK,YACN,CAAC,IAAK,OAAQ,GACd,CAACkc,IAAK,YAAQpd,EAAW,EAAG,GAC5B,CAAC,UAAW,YAAQA,EAAW,GAC/B,CAACod,IAAK,gBAAYpd,EAAW,EAAG,IAW9Bqd,EAAS,CAAEC,KAAM,EAAGrX,MAAO,GAc/B,SAASsX,EAAU9e,GACjB,IAYI0D,EALAgR,GALkB,qBAAXzG,OAAoCA,OACpB,qBAAX8Q,EAAoCA,EAC3B,qBAAT3N,KAAkCA,KACjC,IAEQsD,UAAY,GAGjCsK,EAAmB,GACnBpgB,SAHJoB,EAAMA,GAAO0U,GAMb,GAAI,UAAY1U,EAAIif,SAClBD,EAAmB,IAAIE,EAAIC,SAASnf,EAAIof,UAAW,SAC9C,GAAI,WAAaxgB,EAEtB,IAAK8E,KADLsb,EAAmB,IAAIE,EAAIlf,EAAK,IACpB4e,SAAeI,EAAiBtb,QACvC,GAAI,WAAa9E,EAAM,CAC5B,IAAK8E,KAAO1D,EACN0D,KAAOkb,IACXI,EAAiBtb,GAAO1D,EAAI0D,SAGGnC,IAA7Byd,EAAiBZ,UACnBY,EAAiBZ,QAAUA,EAAQ7f,KAAKyB,EAAIqf,OAIhD,OAAOL,EAkBT,SAASM,EAAgBZ,GACvBA,EAAUF,EAASE,GACnB,IAAIa,EAAQlB,EAAWmB,KAAKd,GAE5B,MAAO,CACLO,SAAUM,EAAM,GAAKA,EAAM,GAAGE,cAAgB,GAC9CrB,UAAWmB,EAAM,GACjBG,KAAMH,EAAM,IAsDhB,SAASL,EAAIR,EAAShK,EAAUiL,GAG9B,GAFAjB,EAAUF,EAASE,KAEbhhB,gBAAgBwhB,GACpB,OAAO,IAAIA,EAAIR,EAAShK,EAAUiL,GAGpC,IAAIC,EAAUC,EAAWrR,EAAOsR,EAAaC,EAAOrc,EAChDsc,EAAevB,EAAM3Z,QACrBlG,SAAc8V,EACdlS,EAAM9E,KACN6M,EAAI,EAqCR,IAxBI,WAAa3L,GAAQ,WAAaA,IACpC+gB,EAASjL,EACTA,EAAW,MAGTiL,GAAU,oBAAsBA,IAAQA,EAAS1W,EAAGuF,OAExDkG,EAAWoK,EAAUpK,GAMrBkL,IADAC,EAAYP,EAAgBZ,GAAW,KACjBO,WAAaY,EAAUzB,QAC7C5b,EAAI4b,QAAUyB,EAAUzB,SAAWwB,GAAYlL,EAAS0J,QACxD5b,EAAIyc,SAAWY,EAAUZ,UAAYvK,EAASuK,UAAY,GAC1DP,EAAUmB,EAAUH,KAMfG,EAAUzB,UAAS4B,EAAa,GAAK,CAAC,OAAQ,aAE5CzV,EAAIyV,EAAa1e,OAAQiJ,IAGH,oBAF3BuV,EAAcE,EAAazV,KAO3BiE,EAAQsR,EAAY,GACpBpc,EAAMoc,EAAY,GAEdtR,IAAUA,EACZhM,EAAIkB,GAAOgb,EACF,kBAAoBlQ,IACvBuR,EAAQrB,EAAQ7f,QAAQ2P,MACxB,kBAAoBsR,EAAY,IAClCtd,EAAIkB,GAAOgb,EAAQ5Z,MAAM,EAAGib,GAC5BrB,EAAUA,EAAQ5Z,MAAMib,EAAQD,EAAY,MAE5Ctd,EAAIkB,GAAOgb,EAAQ5Z,MAAMib,GACzBrB,EAAUA,EAAQ5Z,MAAM,EAAGib,MAGrBA,EAAQvR,EAAMgR,KAAKd,MAC7Blc,EAAIkB,GAAOqc,EAAM,GACjBrB,EAAUA,EAAQ5Z,MAAM,EAAGib,EAAMA,QAGnCvd,EAAIkB,GAAOlB,EAAIkB,IACbkc,GAAYE,EAAY,IAAKpL,EAAShR,IAAa,GAOjDoc,EAAY,KAAItd,EAAIkB,GAAOlB,EAAIkB,GAAK+b,gBAhCtCf,EAAUoB,EAAYpB,GAwCtBiB,IAAQnd,EAAIgF,MAAQmY,EAAOnd,EAAIgF,QAM/BoY,GACClL,EAAS0J,SACkB,MAA3B5b,EAAI4c,SAASa,OAAO,KACF,KAAjBzd,EAAI4c,UAAyC,KAAtB1K,EAAS0K,YAEpC5c,EAAI4c,SAjJR,SAAiBQ,EAAUtd,GACzB,GAAiB,KAAbsd,EAAiB,OAAOtd,EAQ5B,IANA,IAAIgJ,GAAQhJ,GAAQ,KAAKqC,MAAM,KAAKG,MAAM,GAAI,GAAGhG,OAAO8gB,EAASjb,MAAM,MACnE4F,EAAIe,EAAKhK,OACT4e,EAAO5U,EAAKf,EAAI,GAChB4V,GAAU,EACVC,EAAK,EAEF7V,KACW,MAAZe,EAAKf,GACPe,EAAKvF,OAAOwE,EAAG,GACM,OAAZe,EAAKf,IACde,EAAKvF,OAAOwE,EAAG,GACf6V,KACSA,IACC,IAAN7V,IAAS4V,GAAU,GACvB7U,EAAKvF,OAAOwE,EAAG,GACf6V,KAOJ,OAHID,GAAS7U,EAAK6U,QAAQ,IACb,MAATD,GAAyB,OAATA,GAAe5U,EAAK/C,KAAK,IAEtC+C,EAAKvM,KAAK,KAwHAshB,CAAQ7d,EAAI4c,SAAU1K,EAAS0K,WAQ3CjB,EAAS3b,EAAI8d,KAAM9d,EAAIyc,YAC1Bzc,EAAI+d,KAAO/d,EAAIge,SACfhe,EAAI8d,KAAO,IAMb9d,EAAIie,SAAWje,EAAIke,SAAW,GAC1Ble,EAAIZ,OACNke,EAActd,EAAIZ,KAAK+C,MAAM,KAC7BnC,EAAIie,SAAWX,EAAY,IAAM,GACjCtd,EAAIke,SAAWZ,EAAY,IAAM,IAGnCtd,EAAImS,OAASnS,EAAIyc,UAAYzc,EAAI+d,MAAyB,UAAjB/d,EAAIyc,SACzCzc,EAAIyc,SAAU,KAAMzc,EAAI+d,KACxB,OAKJ/d,EAAI6c,KAAO7c,EAAIkC,WAiIjBwa,EAAIzhB,UAAY,CAAEyH,IAjHlB,SAAayb,EAAMhd,EAAO4F,GACxB,IAAI/G,EAAM9E,KAEV,OAAQijB,GACN,IAAK,QACC,kBAAoBhd,GAASA,EAAMrC,SACrCqC,GAAS4F,GAAMN,EAAGuF,OAAO7K,IAG3BnB,EAAIme,GAAQhd,EACZ,MAEF,IAAK,OACHnB,EAAIme,GAAQhd,EAEPwa,EAASxa,EAAOnB,EAAIyc,UAGdtb,IACTnB,EAAI+d,KAAO/d,EAAIge,SAAU,IAAK7c,IAH9BnB,EAAI+d,KAAO/d,EAAIge,SACfhe,EAAIme,GAAQ,IAKd,MAEF,IAAK,WACHne,EAAIme,GAAQhd,EAERnB,EAAI8d,OAAM3c,GAAS,IAAKnB,EAAI8d,MAChC9d,EAAI+d,KAAO5c,EACX,MAEF,IAAK,OACHnB,EAAIme,GAAQhd,EAER,QAAQpF,KAAKoF,IACfA,EAAQA,EAAMgB,MAAM,KACpBnC,EAAI8d,KAAO3c,EAAMid,MACjBpe,EAAIge,SAAW7c,EAAM5E,KAAK,OAE1ByD,EAAIge,SAAW7c,EACfnB,EAAI8d,KAAO,IAGb,MAEF,IAAK,WACH9d,EAAIyc,SAAWtb,EAAM8b,cACrBjd,EAAI4b,SAAW7U,EACf,MAEF,IAAK,WACL,IAAK,OACH,GAAI5F,EAAO,CACT,IAAIkd,EAAgB,aAATF,EAAsB,IAAM,IACvCne,EAAIme,GAAQhd,EAAMsc,OAAO,KAAOY,EAAOA,EAAOld,EAAQA,OAEtDnB,EAAIme,GAAQhd,EAEd,MAEF,QACEnB,EAAIme,GAAQhd,EAGhB,IAAK,IAAI4G,EAAI,EAAGA,EAAIkU,EAAMnd,OAAQiJ,IAAK,CACrC,IAAIuW,EAAMrC,EAAMlU,GAEZuW,EAAI,KAAIte,EAAIse,EAAI,IAAMte,EAAIse,EAAI,IAAIrB,eASxC,OANAjd,EAAImS,OAASnS,EAAIyc,UAAYzc,EAAI+d,MAAyB,UAAjB/d,EAAIyc,SACzCzc,EAAIyc,SAAU,KAAMzc,EAAI+d,KACxB,OAEJ/d,EAAI6c,KAAO7c,EAAIkC,WAERlC,GAqCmBkC,SA3B5B,SAAkB0E,GACXA,GAAa,oBAAsBA,IAAWA,EAAYH,EAAGG,WAElE,IAAI5B,EACAhF,EAAM9E,KACNuhB,EAAWzc,EAAIyc,SAEfA,GAAqD,MAAzCA,EAASgB,OAAOhB,EAAS3d,OAAS,KAAY2d,GAAY,KAE1E,IAAInT,EAASmT,GAAYzc,EAAI4b,QAAU,KAAO,IAe9C,OAbI5b,EAAIie,WACN3U,GAAUtJ,EAAIie,SACVje,EAAIke,WAAU5U,GAAU,IAAKtJ,EAAIke,UACrC5U,GAAU,KAGZA,GAAUtJ,EAAI+d,KAAO/d,EAAI4c,UAEzB5X,EAAQ,kBAAoBhF,EAAIgF,MAAQ4B,EAAU5G,EAAIgF,OAAShF,EAAIgF,SACxDsE,GAAU,MAAQtE,EAAMyY,OAAO,GAAK,IAAKzY,EAAQA,GAExDhF,EAAIqc,OAAM/S,GAAUtJ,EAAIqc,MAErB/S,IASToT,EAAII,gBAAkBA,EACtBJ,EAAIxK,SAAWoK,EACfI,EAAIV,SAAWA,EACfU,EAAIjW,GAAKA,EAETzF,EAAOpF,QAAU8gB,I,+CCtbjB1b,EAAOpF,QAAU,SAAkBkiB,EAAMrB,GAIvC,GAHAA,EAAWA,EAASta,MAAM,KAAK,KAC/B2b,GAAQA,GAEG,OAAO,EAElB,OAAQrB,GACN,IAAK,OACL,IAAK,KACL,OAAgB,KAATqB,EAEP,IAAK,QACL,IAAK,MACL,OAAgB,MAATA,EAEP,IAAK,MACL,OAAgB,KAATA,EAEP,IAAK,SACL,OAAgB,KAATA,EAEP,IAAK,OACL,OAAO,EAGT,OAAgB,IAATA,I,6BClCT,IAAI9C,EAAM5Z,OAAOnG,UAAUmM,eAU3B,SAASmX,EAAOC,GACd,IACE,OAAOC,mBAAmBD,EAAMve,QAAQ,MAAO,MAC/C,MAAOye,GACP,OAAO,MAWX,SAASC,EAAOH,GACd,IACE,OAAOvY,mBAAmBuY,GAC1B,MAAOE,GACP,OAAO,MAqFX9iB,EAAQgL,UA1CR,SAAwBtL,EAAKsjB,GAC3BA,EAASA,GAAU,GAEnB,IACIzd,EACAD,EAFAga,EAAQ,GASZ,IAAKha,IAFD,kBAAoB0d,IAAQA,EAAS,KAE7BtjB,EACV,GAAI0f,EAAIpT,KAAKtM,EAAK4F,GAAM,CAkBtB,IAjBAC,EAAQ7F,EAAI4F,KAMa,OAAVC,GA3FjB0d,YA2FmC1d,IAAmB4Q,MAAM5Q,KACxDA,EAAQ,IAGVD,EAAMyd,EAAOzd,GACbC,EAAQwd,EAAOxd,GAMH,OAARD,GAA0B,OAAVC,EAAgB,SACpC+Z,EAAMnV,KAAK7E,EAAK,IAAKC,GAIzB,OAAO+Z,EAAMpc,OAAS8f,EAAS1D,EAAM3e,KAAK,KAAO,IAOnDX,EAAQoQ,MA3ER,SAAqBhH,GAKnB,IAJA,IAEImZ,EAFAhB,EAAS,uBACT7T,EAAS,GAGN6U,EAAOhB,EAAOH,KAAKhY,IAAQ,CAChC,IAAI9D,EAAMqd,EAAOJ,EAAK,IAClBhd,EAAQod,EAAOJ,EAAK,IAUZ,OAARjd,GAA0B,OAAVC,GAAkBD,KAAOoI,IAC7CA,EAAOpI,GAAOC,GAGhB,OAAOmI,I,6BC/DT,IAAMwV,EAAN,gBAEA9d,EAAOA,QAAU,SAAAb,GACf,IAAK2e,EAASA,KAAK3e,EAAnB,KACE,MAAM,IAAInE,MAAM,IAAImE,EAAd,IAAN,0B,6BCJJa,EAAOA,QAAUnD,EAAjBmD,M,6BCCA,IAAM+d,EAAalhB,EAAnB,KACMmhB,EAAenhB,EAArB,KAKMohB,EAAN,OACMC,EAAiBD,EAAIA,gBALd,aAOPzL,EADU,oBAAqB,IAArC,EACiC2L,EAAiBF,EAAlD,eAGAje,EAAOA,QAAU,cACf,IAAMuD,EAAOuV,EAAb,QACM3Z,EAAU2Z,EAAQA,gBAAgBA,kBAAxC,GACMsF,EAAN,GAGMC,EAAOJ,GAAOA,EAAPA,WAAwBF,EAAWE,EAAIA,SAAfF,KAA8B5e,EAAnE,KAGMmf,EAAmBxF,EAAQD,gBAAgB,wBAAoB9a,EAAW,CAC9EwgB,QAZJ,MAaIzF,YAKF,KAAsB,CACpB,IAAM0F,EAAU9R,WAAWA,EAAUA,EAAGA,KAAxC,GAEA,MAAO,CAAC+C,MADO,kBAAMhD,aAAN,KAKjB,IAAIgS,EAAMJ,EAAO,IAAPA,EAA8B,IAAxC,EAEMK,EAAQT,EAAIA,gBAAkBQ,aAAeR,EAAnD,eACMnS,EAAU3M,EAAhB,QAGIwf,GAAJ,EACIC,GAAJ,EACIC,GAAJ,EA0CA,GAvCAJ,YACAA,cACAA,UAAc,WACZE,MAIFF,aAAiB,aAKjBA,EADkBC,EAAQA,SAA1B,sBACiB,YA0EjB,WACE,MACE,OAGFI,IACAV,SAAgB1R,YAAW,kBAAMqS,EAAN,qBAAyCC,EAApEZ,QA9EAa,GAEIN,GAA+BF,IAAnBA,EAAIA,aAApB,GAKA,IAAIA,EAAIA,QAkIV,WACE,GAAIE,GAAWA,GAAf,EACE,OAGF,OAAIF,EAAIA,OAEN,YADApS,EAAQ,IAAIrR,MAAZqR,sBAKFyS,IACAF,KACAM,OAxCF,WACE,IAAIpH,EAAa2G,EAAjB,OACIU,EAAgBV,EAApB,WAEA,GAAIC,QAAJ,IAAa5G,EAEXA,UACK,IAAIA,EAAaA,MAASA,EAA1B,MAGL,OAAOzL,IAGPyL,EAA4B2G,OAAfA,EAAIA,OAAkBA,IAAMA,EAAzC3G,OACAqH,EAA+BV,OAAfA,EAAIA,OAAkBA,aAAtCU,EAGF,MAAO,CACLxf,KAAM8e,EAAIA,UAAYA,EADjB,aAELzf,IAAKG,EAFA,IAGLE,OAAQF,EAHH,OAIL2M,QAAS4S,EAAQA,GAAKV,EAAaS,EAJ9B,yBAKL3G,WALK,EAMLqH,cAAeA,GAiBFC,IA3IfC,IAIFZ,OACEtf,EADFsf,OAEEtf,EAFFsf,QAOAA,oBAAwBtf,EAAxBsf,gBAGI3S,GAAW2S,EAAf,iBACE,IAAK,IAAL,OACM3S,EAAQA,eAAZ,IACE2S,qBAA0B3S,EAA1B2S,SAGC,GAAI3S,GAAJ,EACL,MAAM,IAAI9Q,MAAV,qDAGEmE,EAAJ,UACEsf,8BAIF3F,8BAAqC,CAAC3Z,QAAD,EAAUof,QA1FjD,MA0F0D/e,QAAnB,EAAiCsZ,QAAtEA,IAEA2F,OAAStf,EAAQA,MAAjBsf,MAGA,IAAMO,EAAS7f,EAAf,QAKA,OAJA,IACEif,UAAiB1R,YAAW,kBAAMqS,EAAN,eAAmCC,EAA/DZ,UAGK,CAAC3O,MAER,WACEkP,KAEA,GACEF,YAIJ,cACEI,KACAJ,UACA,IAAM3a,EAAQ,IAAI9I,MACPskB,oBAATA,oCACsCngB,EADtCmgB,0CAE0CngB,EAH5C,KAKA2E,SACAgV,4BAYF,cAEM6F,GAAYF,EAAIA,YAAcA,GAAKL,EAAvC,UACE3R,aAAa2R,EAAb3R,SAGE2R,EAAJ,QACE3R,aAAa2R,EAAb3R,QAIJ,aACE,OAKAqS,IACAF,KACAH,OAIA,IAAMxT,EAAM,IAAIjQ,MAAM,2CAA2CmE,EAAjE,KACA8L,oBACAA,YACAiU,S,6BCtKJ,IAAIlgB,EAAMnC,EAAQ,KAElBmD,EAAOpF,QAAU,SAAS2kB,EAAMC,EAAMC,GAClC,GAAIF,IAASC,EACT,OAAO,EAGX,IAAIE,EAAO1gB,EAAIgM,MAAMuU,GAAM,GAAO,GAC9BI,EAAO3gB,EAAIgM,MAAMwU,GAAM,GAAO,GAE9BI,EAAqB,EAAVF,EAAK5C,OAA6B,UAAlB4C,EAAKjE,SAAuB,IAAM,IAC7DoE,EAAqB,EAAVF,EAAK7C,OAA6B,UAAlB6C,EAAKlE,SAAuB,IAAM,IAE7DM,EAAQ,CACR+D,MAAOJ,EAAKjE,WAAakE,EAAKlE,SAC9BuB,SAAU0C,EAAK1C,WAAa2C,EAAK3C,SACjCF,KAAM8C,IAAaC,GAGvB,OAAS9D,EAAM+D,OAAS/D,EAAMiB,WAAcjB,EAAMe,MAAQ2C,K,6BCf9D,IAAIM,EAAQ,mMAEZ/f,EAAOpF,QAAU,CACbmlB,MAAOA,EACP/U,MAAO,SAAShM,GACZ,IAAI+c,EAAQgE,EAAM/D,KAAKhd,GACvB,OAAK+c,EAIE,CACHN,UAAWM,EAAM,IAAM,IAAIE,oBAAiBle,EAC5Cif,UAAWjB,EAAM,IAAM,IAAIE,oBAAiBle,EAC5C+e,KAAMf,EAAM,SAAMhe,GANX,M,cCbnB,IAAIsD,EAAO,SAAS2e,GAClB,OAAOA,EAAO/gB,QAAQ,aAAc,KAMtCe,EAAOpF,QAAU,SAAUkR,GACzB,IAAKA,EACH,MAAO,GAMT,IAJA,IARqBmU,EAQjB3X,EAAS,GAET4X,EAAa7e,EAAKyK,GAAS3K,MAAM,MAE5B4F,EAAI,EAAGA,EAAImZ,EAAWpiB,OAAQiJ,IAAK,CAC1C,IAAIoZ,EAAMD,EAAWnZ,GACjBwV,EAAQ4D,EAAI9kB,QAAQ,KACtB6E,EAAMmB,EAAK8e,EAAI7e,MAAM,EAAGib,IAAQN,cAChC9b,EAAQkB,EAAK8e,EAAI7e,MAAMib,EAAQ,IAEL,qBAAjBjU,EAAOpI,GAChBoI,EAAOpI,GAAOC,GAnBG8f,EAoBA3X,EAAOpI,GAnBuB,mBAAxCE,OAAOnG,UAAUiH,SAAS0F,KAAKqZ,GAoBtC3X,EAAOpI,GAAK6E,KAAK5E,GAEjBmI,EAAOpI,GAAO,CAAEoI,EAAOpI,GAAMC,IAIjC,OAAOmI,I,6BC9BT,IAAMiT,EAAS1e,EAAf,KACM+c,EAAe/c,EAArB,IAEAmD,EAAOA,QAAU,WAAe,IAAduD,EAAc,uDAAP,GACjBwG,EAAaxG,EAAKA,gBAAkBgY,EAA1C,WACA,MACE,MAAM,IAAIvgB,MAAV,mFAKF,MAAO,CACLolB,SAAU,qBACR,IAAIrW,GAAW,SAAAiC,GASb,OARA4M,mBAAyB,SAAA3N,GAAA,OAAOe,EAASA,MAAhBf,MACzB2N,sBAA4B,SAAAlZ,GAAA,OAASsM,EAASA,KAAK4N,EAAa,CAACxe,KAAdwe,YAAvBla,OAC5BkZ,sBAA4B,SAAAM,GAC1BlN,OAAc4N,EAAa,CAACxe,KAAdwe,YAAd5N,IACAA,gBAGF4M,qBACO,kBAAMA,EAASA,MAAf,kB,0CCrBf,qBAAWnO,OACTzK,iBACK,qBAAWub,EAChBvb,YACK,qBAAW4N,KAChB5N,eAEAA,e,kQCRI4Z,EAAe/c,EAArB,IACMwjB,EAAgBxjB,EAAtB,KAEMyjB,EAAiB,CAAC,UAAW,SAAnC,UAMAtgB,EAAOA,QAAU,iBAAO,CACtBmY,eAAgB,SAAAhZ,GACd,IAPa7E,EAOPqF,EAAOR,EAAb,KACA,YAIA,oBAAwBQ,EAAP,UAZJrF,EAcX,GAbJ,iCACOA,EAAIA,YAAX,UACAA,EAAIA,YAAYA,SAHDA,OAgBVgmB,MAAeA,QAAfA,qBAA8BA,EAA9BA,mBAA8C3kB,MAAMA,QAApD2kB,IAAqED,EAHxE,IASOzG,EAAa,GAAIza,EAAS,CAC/BQ,KAAMgG,KAAKA,UAAUxG,EADU,MAE/B2M,QAAS8N,EAAa,GAAIza,EAAjB,QAAkC,CACzC,eAAgB,uBAhBlB,M,6BCJN,IAAIohB,EAAW1jB,EAAQ,KAEvB,SAAS2jB,EAAevL,GACtB,OAAuB,IAAhBsL,EAAStL,IAC2B,oBAAtC7U,OAAOnG,UAAUiH,SAAS0F,KAAKqO,GAGtCjV,EAAOpF,QAAU,SAAuBqa,GACtC,IAAIwL,EAAKC,EAET,OAA0B,IAAtBF,EAAevL,KAIC,oBADpBwL,EAAOxL,EAAExa,gBAKoB,IAAzB+lB,EADJE,EAAOD,EAAKxmB,aAIiC,IAAzCymB,EAAKta,eAAe,qB,6BCrB1BpG,EAAOpF,QAAU,SAAkBc,GACjC,OAAc,MAAPA,GAA8B,kBAARA,IAA2C,IAAvBC,MAAMC,QAAQF,K,6BCVjE,IAAMke,EAAe/c,EAArB,IAmBA,SAAS8jB,EAAShhB,GAChB,IACE,OAAOgG,KAAKA,MAAZ,GACA,MAAOsF,GAEP,MADAA,qDAAyDA,EAAzDA,QACA,GAtBJjL,EAAOA,QAAU,SAAAuD,GAAA,MAAS,CACxBsU,WAAY,SAAAqB,GACV,IAAMjD,EAAciD,EAASA,QAAQA,iBAArC,GACM0H,EAAgBrd,GAAQA,EAAT,QAArB,IAA6C0S,EAAYA,QAAQA,oBACjE,OAAKiD,EAAD,SAAJ,EAIOU,EAAaA,GAAIA,EAAU,CAACja,KAAMghB,EAASzH,EAAlD,QAHE,GAMJf,eAAgB,SAAAhZ,GAAA,OACdya,EAAa,GAAIza,EAAS,CACxB2M,QAAS8N,EAAa,CAAChL,OAAdgL,oBAA2Cza,EAA3Cya,e,6BCff5Z,EAAOA,QAAUnD,EAAjBmD,M,6BCAAA,EAAOA,QAAU,iBAAO,CACtB6gB,UAAW,SAAA1V,GACT,WAAIA,EAAIA,QAAR,CAIA,IAAMsT,EAAMtT,EAAZ,QACM2N,EAAU3N,EAAhB,QAEI,WAAYsT,GAAO,eAAgBA,EAAvC,SACEA,oBAAwBqC,EAAxBrC,WAGE,eAAJ,IACEA,aAAiBqC,EAAjBrC,aAGF,cACE,OAAO,SAAA/e,GACL,IAAMqhB,EAAUrhB,EAAMA,iBAAoBA,EAAMA,OAASA,EAAhB,MAAzBA,KAAhB,EACAoZ,4BAAkC,CAChCkI,MADgC,EAEhCD,QAFgC,EAGhCE,MAAOvhB,EAHyB,MAIhCkf,OAAQlf,EAJwB,OAKhCwhB,iBAAkBxhB,EAAMwhB,yB,6BCvBlC,IAAIC,EAAYtkB,EAAQ,KAEpBD,EAASC,EAAQ,IAErB,SAASgD,EAAYwI,GACnB,IAAIrH,EAAQogB,EAAkB/Y,GAC9BxI,EAAYwhB,MAAMza,KAAK1M,KAAM8G,EAAMoK,SACnCxO,EAAO1C,KAAM8G,GAGf,SAASlB,EAAYuI,GACnB,IAAIrH,EAAQogB,EAAkB/Y,GAC9BvI,EAAYuhB,MAAMza,KAAK1M,KAAM8G,EAAMoK,SACnCxO,EAAO1C,KAAM8G,GAGf,SAASogB,EAAkB/Y,GACzB,IAAI1I,EAAO0I,EAAI1I,KACXqB,EAAQ,CACVkY,SAAU7Q,EACVyP,WAAYzP,EAAIyP,WAChBwJ,aAAcC,EAAc5hB,EAAM0I,IAGpC,OAAI1I,EAAKmE,OAASnE,EAAKyL,SACrBpK,EAAMoK,QAAU,GAAG9P,OAAOqE,EAAKmE,MAAO,OAAOxI,OAAOqE,EAAKyL,SAClDpK,GAILrB,EAAKmE,OAASnE,EAAKmE,MAAMuH,aAC3BrK,EAAMoK,QAAUzL,EAAKmE,MAAMuH,YAC3BrK,EAAMwgB,QAAU7hB,EAAKmE,MACd9C,IAITA,EAAMoK,QAAUzL,EAAKmE,OAASnE,EAAKyL,SAIrC,SAA0B/C,GACxB,IAAI8W,EAAgB9W,EAAI8W,cAAgB,IAAI7jB,OAAO+M,EAAI8W,eAAiB,GACxE,MAAO,GAAG7jB,OAAO+M,EAAIhJ,OAAQ,gBAAgB/D,OAAO+M,EAAIrJ,IAAK,sBAAsB1D,OAAO+M,EAAIyP,YAAYxc,OAAO6jB,GANnEsC,CAAiBpZ,GACxDrH,GAQT,SAASugB,EAAc5hB,EAAM0I,GAG3B,OAD0D,KADvCA,EAAIyD,QAAQ,iBAAmB,IAAImQ,cAC7B5gB,QAAQ,oBACjBsK,KAAKC,UAAUjG,EAAM,KAAM,GAAKA,EAGlDwhB,EAAUthB,GACVshB,EAAUrhB,GACVlF,EAAQiF,YAAcA,EACtBjF,EAAQkF,YAAcA,G,6BCnDtB,IAAI4hB,EAA+B,qBAAZC,QAA0BA,QAAQD,eAAY3jB,EACjEsC,EAAiBD,OAAOC,eAIxBuhB,EAAoB5mB,MAAM4mB,kBAgC9B,SAASC,EAAUzW,QACDrN,IAAZqN,GACF/K,EAAenG,KAAM,UAAW,CAC9BqG,cAAc,EACdJ,MAAOiL,EACP5K,UAAU,IAId,IAAIshB,EAAQ5nB,KAAKO,YAAYK,UACfiD,IAAV+jB,GAAuBA,IAAU5nB,KAAKY,MACxCuF,EAAenG,KAAM,OAAQ,CAC3BqG,cAAc,EACdJ,MAAO2hB,EACPthB,UAAU,IAIdohB,EAAkB1nB,KAAMA,KAAKO,kBAjDLsD,IAAtB6jB,IACFA,EAAoB,SAA2B9d,GAC7C,IAAIie,EAAY,IAAI/mB,MAEpBqF,EAAeyD,EAAO,QAAS,CAC7BvD,cAAc,EACdoV,IAAK,WACH,IAAI1U,EAAQ8gB,EAAU9gB,MAStB,OANAZ,EAAenG,KAAM,QAAS,CAC5BqG,cAAc,EACdJ,MAAOc,EACPT,UAAU,IAGLS,GAETS,IAAK,SAAkBT,GACrBZ,EAAeyD,EAAO,QAAS,CAC7BvD,cAAc,EACdJ,MAAOc,EACPT,UAAU,SA8BpBqhB,EAAU5nB,UAAYmG,OAAOkE,OAAOtJ,MAAMf,UAAW,CAEnDQ,YAAa,CACX8F,cAAc,EACdJ,MAAO0hB,EACPrhB,UAAU,KAOd,IAAIwhB,EAAmB,WACrB,SAASA,EAAgBjc,EAAIjL,GAC3B,OAAOuF,EAAe0F,EAAI,OAAQ,CAChCxF,cAAc,EACdJ,MAAOrF,IAGX,IACE,IAAImnB,EAAI,aAER,GADAD,EAAgBC,EAAG,OACJ,QAAXA,EAAEnnB,KACJ,OAAOknB,EAET,MAAOE,KAbY,IAyEbliB,EAAOpF,QAvDjB,SAAmBH,EAAa0nB,GAC9B,GAAc,MAAVA,GAAkBA,IAAWnnB,MAC/BmnB,EAASN,OACJ,GAAsB,oBAAXM,EAChB,MAAM,IAAI3b,UAAU,+BAGtB,IAAI1L,EACJ,GAA2B,kBAAhBL,EACTK,EAAOL,EACPA,OACgBsD,IAAd2jB,EACI,WACE,OAAOA,EAAUS,EAAQtkB,UAAW3D,KAAKO,cAE3C,WACE0nB,EAAOjc,MAAMhM,KAAM2D,iBAIHE,IAApBikB,IACFA,EAAgBvnB,EAAaK,GAC7BA,OAAOiD,QAEJ,GAA2B,oBAAhBtD,EAChB,MAAM,IAAI+L,UAAU,uDAOtB/L,EAAY0nB,OAAS1nB,EAAW,MAAY0nB,EAE5C,IAAIC,EAAa,CACf3nB,YAAa,CACX8F,cAAc,EACdJ,MAAO1F,EACP+F,UAAU,IAed,YATazC,IAATjD,IACFsnB,EAAWtnB,KAAO,CAChByF,cAAc,EACdJ,MAAOrF,EACP0F,UAAU,IAGd/F,EAAYR,UAAYmG,OAAOkE,OAAO6d,EAAOloB,UAAWmoB,GAEjD3nB,IAGDonB,UAAYA,G,6BCpJpB7hB,EAAOpF,QAAU,I,6BCAjB,IAAIgC,EAASC,EAAQ,IAEjBwlB,EAAgB,sBAEpBriB,EAAOpF,QAAU,SAAU8B,GACzB,IAAI4lB,EAAYzkB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAChFiO,EAAU,GACVnC,EAAQ2Y,EAAU3Y,OAASjN,EAAOiN,MAElCA,IACFmC,EAAQC,cAAgB,UAAUzQ,OAAOqO,IAGtC2Y,EAAUC,cAAiB7lB,EAAO8lB,qBAAsB9lB,EAAOzB,YAClE6Q,EAAQuW,GAAiB3lB,EAAOzB,WAGlC,IAAIwQ,EAAkBjB,QAA6C,qBAA9B8X,EAAU7W,gBAAkC/O,EAAOiN,OAASjN,EAAO+O,gBAAkB6W,EAAU7W,iBAChI/B,EAAuC,qBAAtB4Y,EAAU5Y,QAA0BhN,EAAOgN,QAAU4Y,EAAU5Y,QACpF,OAAO9M,EAAO,GAAI0lB,EAAW,CAC3BxW,QAASlP,EAAO,GAAIkP,EAASwW,EAAUxW,SAAW,IAClDpC,QAA4B,qBAAZA,EAA0B,IAAgBA,EAC1DjB,MAAM,EACNgD,gBAAiBA,M,6BCvBrB,IAAItB,EAAkBtN,EAAQ,KAE1BD,EAASC,EAAQ,IAEjB8D,EAAW9D,EAAQ,IAEnBuN,EAAOvN,EAAQ,KAGfa,EAAgB,CAClB+kB,QAAS,wBACTD,oBAAoB,EACpB7lB,cAAc,EACd2B,cAAc,GAEZokB,EAAa,CAAC,YAAa,YAAa,WAOxCC,EAAuB,SAA8BvX,GACvD,OAAOhB,GAAK,WACV,OAAO7I,QAAQC,KAAK4J,EAAQ7P,KAAK,UAIjCqnB,EAAkBD,EAAqB,CAAC,oGAAqG,+CAA+CrnB,OAAO6O,EAAgB,+BAAgC,KAAM,iGAAkG,gBAC3V0Y,EAA2BF,EAAqB,CAAC,iHAAkH,OAAOrnB,OAAO6O,EAAgB,2BAA4B,yDAC7N2Y,EAAuBH,EAAqB,CAAC,8FAA+F,iGAAkG,OAAOrnB,OAAO6O,EAAgB,0BAA2B,4BAC3SvP,EAAQ8C,cAAgBA,EAExB9C,EAAQ+C,WAAa,SAAUjB,EAAQqmB,GACrC,IAAIrkB,EAAY9B,EAAO,GAAIc,EAAeqlB,EAAYrmB,GAClDC,EAAe+B,EAAU/B,aACzBqmB,GAAgBrmB,GAAgB+B,EAAU8jB,mBAE9C,GAAuB,qBAAZS,QAAyB,CAClC,IAAIC,EAAU/Y,EAAgB,8BAC9B,MAAM,IAAInP,MAAM,iEAAiEM,OAAO4nB,IAG1F,GAAIvmB,IAAiB+B,EAAUsJ,UAC7B,MAAM,IAAIhN,MAAM,wEAGlB,GAAIgoB,IAAiBtkB,EAAUzD,UAC7B,MAAM,IAAID,MAAM,0CAGlB,IAAImoB,EAA8B,qBAAX1Y,QAA0BA,OAAOyG,UAAYzG,OAAOyG,SAAS8L,SAChFoG,EAAcD,GAnCN,SAAiBpG,GAC7B,OAAqC,IAA9B2F,EAAWrnB,QAAQ0hB,GAkCKsG,CAAQ5Y,OAAOyG,SAAS8L,UAqBvD,GAnBImG,GAAaC,GAAe1kB,EAAUiL,QAAiD,IAAxCjL,EAAU4kB,0BAC3DT,MACWM,GAAaC,IAAgB1kB,EAAUU,QAAUV,EAAUiL,MACtEmZ,IACqC,qBAArBpkB,EAAUU,QAC1BwjB,IAGEI,GACFriB,EAAS1F,UAAUyD,EAAUzD,YAG1B0B,GAAgB+B,EAAU7D,SAC7B8F,EAAS9F,QAAQ6D,EAAU7D,QAAS6D,EAAU/B,cAGhD+B,EAAU6kB,aAAe7kB,EAAU+jB,UAAY/kB,EAAc+kB,QAC7D/jB,EAAUU,OAASoL,QAAQ9L,EAAUU,UAAYV,EAAUiL,QAAUjL,EAAU+M,gBAE3E/M,EAAU/B,aACZ+B,EAAUM,IAAMN,EAAU+jB,QAC1B/jB,EAAUK,OAASL,EAAU+jB,YACxB,CACL,IAAIe,EAAY9kB,EAAU+jB,QAAQthB,MAAM,MAAO,GAC3Csa,EAAW+H,EAAU,GACrBzG,EAAOyG,EAAU,GACjBC,EAAU/kB,EAAU6kB,aAxEP,mBAwEuCxG,EAEpDre,EAAU8jB,oBACZ9jB,EAAUM,IAAM,GAAG1D,OAAOmgB,EAAU,OAAOngB,OAAOoD,EAAUzD,UAAW,KAAKK,OAAOyhB,EAAM,OACzFre,EAAUK,OAAS,GAAGzD,OAAOmgB,EAAU,OAAOngB,OAAOoD,EAAUzD,UAAW,KAAKK,OAAOmoB,EAAS,SAE/F/kB,EAAUM,IAAM,GAAG1D,OAAOoD,EAAU+jB,QAAS,OAC7C/jB,EAAUK,OAASL,EAAUM,KAIjC,OAAON","file":"static/js/1.330538c6.chunk.js","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isFunction_1 = require(\"./util/isFunction\");\nvar Observer_1 = require(\"./Observer\");\nvar Subscription_1 = require(\"./Subscription\");\nvar rxSubscriber_1 = require(\"../internal/symbol/rxSubscriber\");\nvar config_1 = require(\"./config\");\nvar hostReportError_1 = require(\"./util/hostReportError\");\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = Observer_1.empty;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = Observer_1.empty;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriber_1.rxSubscriber] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription_1.Subscription));\nexports.Subscriber = Subscriber;\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction_1.isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== Observer_1.empty) {\n                context = Object.create(observerOrNext);\n                if (isFunction_1.isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config_1.config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config_1.config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError_1.hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError_1.hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config_1.config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError_1.hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config_1.config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError_1.hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexports.SafeSubscriber = SafeSubscriber;\n//# sourceMappingURL=Subscriber.js.map","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar VALID_ASSET_TYPES = ['image', 'file'];\nvar VALID_INSERT_LOCATIONS = ['before', 'after', 'replace'];\n\nexports.dataset = function (name) {\n  if (!/^[-\\w]{1,128}$/.test(name)) {\n    throw new Error('Datasets can only contain lowercase characters, numbers, underscores and dashes');\n  }\n};\n\nexports.projectId = function (id) {\n  if (!/^[-a-z0-9]+$/i.test(id)) {\n    throw new Error('`projectId` can only contain only a-z, 0-9 and dashes');\n  }\n};\n\nexports.validateAssetType = function (type) {\n  if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n    throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(', ')));\n  }\n};\n\nexports.validateObject = function (op, val) {\n  if (val === null || _typeof(val) !== 'object' || Array.isArray(val)) {\n    throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n  }\n};\n\nexports.requireDocumentId = function (op, doc) {\n  if (!doc._id) {\n    throw new Error(\"\".concat(op, \"() requires that the document contains an ID (\\\"_id\\\" property)\"));\n  }\n\n  exports.validateDocumentId(op, doc._id);\n};\n\nexports.validateDocumentId = function (op, id) {\n  if (typeof id !== 'string' || !/^[a-z0-9_.-]+$/i.test(id)) {\n    throw new Error(\"\".concat(op, \"(): \\\"\").concat(id, \"\\\" is not a valid document ID\"));\n  }\n};\n\nexports.validateInsert = function (at, selector, items) {\n  var signature = 'insert(at, selector, items)';\n\n  if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n    var valid = VALID_INSERT_LOCATIONS.map(function (loc) {\n      return \"\\\"\".concat(loc, \"\\\"\");\n    }).join(', ');\n    throw new Error(\"\".concat(signature, \" takes an \\\"at\\\"-argument which is one of: \").concat(valid));\n  }\n\n  if (typeof selector !== 'string') {\n    throw new Error(\"\".concat(signature, \" takes a \\\"selector\\\"-argument which must be a string\"));\n  }\n\n  if (!Array.isArray(items)) {\n    throw new Error(\"\".concat(signature, \" takes an \\\"items\\\"-argument which must be an array\"));\n  }\n};\n\nexports.hasDataset = function (config) {\n  if (!config.gradientMode && !config.dataset) {\n    throw new Error('`dataset` must be provided to perform queries');\n  }\n\n  return config.dataset || '';\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/filter'),\n    filter = _require.filter;\n\nvar _require2 = require('@sanity/observable/operators/map'),\n    map = _require2.map;\n\nvar Patch = require('./data/patch');\n\nvar Transaction = require('./data/transaction');\n\nvar dataMethods = require('./data/dataMethods');\n\nvar DatasetsClient = require('./datasets/datasetsClient');\n\nvar ProjectsClient = require('./projects/projectsClient');\n\nvar AssetsClient = require('./assets/assetsClient');\n\nvar UsersClient = require('./users/usersClient');\n\nvar AuthClient = require('./auth/authClient');\n\nvar httpRequest = require('./http/request');\n\nvar getRequestOptions = require('./http/requestOptions');\n\nvar _require3 = require('./config'),\n    defaultConfig = _require3.defaultConfig,\n    initConfig = _require3.initConfig;\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nfunction SanityClient() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultConfig;\n\n  if (!(this instanceof SanityClient)) {\n    return new SanityClient(config);\n  }\n\n  this.config(config);\n  this.assets = new AssetsClient(this);\n  this.datasets = new DatasetsClient(this);\n  this.projects = new ProjectsClient(this);\n  this.users = new UsersClient(this);\n  this.auth = new AuthClient(this);\n\n  if (this.clientConfig.isPromiseAPI) {\n    var observableConfig = assign({}, this.clientConfig, {\n      isPromiseAPI: false\n    });\n    this.observable = new SanityClient(observableConfig);\n  }\n}\n\nassign(SanityClient.prototype, dataMethods);\nassign(SanityClient.prototype, {\n  clone: function clone() {\n    return new SanityClient(this.config());\n  },\n  config: function config(newConfig) {\n    if (typeof newConfig === 'undefined') {\n      return assign({}, this.clientConfig);\n    }\n\n    if (this.observable) {\n      var observableConfig = assign({}, newConfig, {\n        isPromiseAPI: false\n      });\n      this.observable.config(observableConfig);\n    }\n\n    this.clientConfig = initConfig(newConfig, this.clientConfig || {});\n    return this;\n  },\n  getUrl: function getUrl(uri) {\n    var canUseCdn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var base = canUseCdn ? this.clientConfig.cdnUrl : this.clientConfig.url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, ''));\n  },\n  isPromiseAPI: function isPromiseAPI() {\n    return this.clientConfig.isPromiseAPI;\n  },\n  _requestObservable: function _requestObservable(options) {\n    var uri = options.url || options.uri;\n    var canUseCdn = this.clientConfig.useCdn && ['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/') === 0;\n    var reqOptions = getRequestOptions(this.clientConfig, assign({}, options, {\n      url: this.getUrl(uri, canUseCdn)\n    }));\n    return httpRequest(reqOptions, this.clientConfig.requester);\n  },\n  request: function request(options) {\n    var observable = this._requestObservable(options).pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body;\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  }\n});\nSanityClient.Patch = Patch;\nSanityClient.Transaction = Transaction;\nSanityClient.ClientError = httpRequest.ClientError;\nSanityClient.ServerError = httpRequest.ServerError;\nSanityClient.requester = httpRequest.defaultRequester;\nmodule.exports = SanityClient;","exports.filter = require('rxjs/internal/operators/filter').filter\n","exports.map = require('rxjs/internal/operators/map').map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexports.config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = new Error();\n            console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar deepAssign = require('deep-assign');\n\nvar assign = require('object-assign');\n\nvar getSelection = require('../util/getSelection');\n\nvar validate = require('../validators');\n\nvar validateObject = validate.validateObject;\nvar validateInsert = validate.validateInsert;\n\nfunction Patch(selection) {\n  var operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var client = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  this.selection = selection;\n  this.operations = assign({}, operations);\n  this.client = client;\n}\n\nassign(Patch.prototype, {\n  clone: function clone() {\n    return new Patch(this.selection, assign({}, this.operations), this.client);\n  },\n  merge: function merge(props) {\n    validateObject('merge', props);\n    var stack = new Error().stack.toString().split('\\n').filter(function (str) {\n      return str.trim();\n    }).slice(2);\n    console.warn(\"The \\\"merge\\\" patch has been deprecated and will be removed in the future\\n\".concat(stack.join('\\n')));\n    return this._assign('merge', deepAssign(this.operations.merge || {}, props));\n  },\n  set: function set(props) {\n    return this._assign('set', props);\n  },\n  diffMatchPatch: function diffMatchPatch(props) {\n    validateObject('diffMatchPatch', props);\n    return this._assign('diffMatchPatch', props);\n  },\n  unset: function unset(attrs) {\n    if (!Array.isArray(attrs)) {\n      throw new Error('unset(attrs) takes an array of attributes to unset, non-array given');\n    }\n\n    this.operations = assign({}, this.operations, {\n      unset: attrs\n    });\n    return this;\n  },\n  setIfMissing: function setIfMissing(props) {\n    return this._assign('setIfMissing', props);\n  },\n  replace: function replace(props) {\n    validateObject('replace', props);\n    return this._set('set', {\n      $: props\n    }); // eslint-disable-line id-length\n  },\n  inc: function inc(props) {\n    return this._assign('inc', props);\n  },\n  dec: function dec(props) {\n    return this._assign('dec', props);\n  },\n  insert: function insert(at, selector, items) {\n    var _this$_assign;\n\n    validateInsert(at, selector, items);\n    return this._assign('insert', (_this$_assign = {}, _defineProperty(_this$_assign, at, selector), _defineProperty(_this$_assign, \"items\", items), _this$_assign));\n  },\n  append: function append(selector, items) {\n    return this.insert('after', \"\".concat(selector, \"[-1]\"), items);\n  },\n  prepend: function prepend(selector, items) {\n    return this.insert('before', \"\".concat(selector, \"[0]\"), items);\n  },\n  splice: function splice(selector, start, deleteCount, items) {\n    // Negative indexes doesn't mean the same in Sanity as they do in JS;\n    // -1 means \"actually at the end of the array\", which allows inserting\n    // at the end of the array without knowing its length. We therefore have\n    // to substract negative indexes by one to match JS. If you want Sanity-\n    // behaviour, just use `insert('replace', selector, items)` directly\n    var delAll = typeof deleteCount === 'undefined' || deleteCount === -1;\n    var startIndex = start < 0 ? start - 1 : start;\n    var delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n    var delRange = startIndex < 0 && delCount >= 0 ? '' : delCount;\n    var rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n    return this.insert('replace', rangeSelector, items || []);\n  },\n  ifRevisionId: function ifRevisionId(rev) {\n    this.operations.ifRevisionID = rev;\n    return this;\n  },\n  serialize: function serialize() {\n    return assign(getSelection(this.selection), this.operations);\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!this.client) {\n      throw new Error('No `client` passed to patch, either provide one or pass the ' + 'patch to a clients `mutate()` method');\n    }\n\n    var returnFirst = typeof this.selection === 'string';\n    var opts = assign({\n      returnFirst: returnFirst,\n      returnDocuments: true\n    }, options);\n    return this.client.mutate({\n      patch: this.serialize()\n    }, opts);\n  },\n  reset: function reset() {\n    this.operations = {};\n    return this;\n  },\n  _set: function _set(op, props) {\n    return this._assign(op, props, false);\n  },\n  _assign: function _assign(op, props) {\n    var merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    validateObject(op, props);\n    this.operations = assign({}, this.operations, _defineProperty({}, op, assign({}, merge && this.operations[op] || {}, props)));\n    return this;\n  }\n});\nmodule.exports = Patch;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\nexports.isFunction = isFunction;\n//# sourceMappingURL=isFunction.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar config_1 = require(\"./config\");\nvar hostReportError_1 = require(\"./util/hostReportError\");\nexports.empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError_1.hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\nexports.hostReportError = hostReportError;\n//# sourceMappingURL=hostReportError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rxSubscriber = (function () {\n    return typeof Symbol === 'function'\n        ? Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + Math.random();\n})();\nexports.$$rxSubscriber = exports.rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map","\"use strict\";\n\nmodule.exports = function getSelection(sel) {\n  if (typeof sel === 'string' || Array.isArray(sel)) {\n    return {\n      id: sel\n    };\n  }\n\n  if (sel && sel.query) {\n    return {\n      query: sel.query\n    };\n  }\n\n  var selectionOpts = ['* Document ID (<docId>)', '* Array of document IDs', '* Object containing `query`'].join('\\n');\n  throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n};","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar validators = require('../validators');\n\nvar Patch = require('./patch');\n\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\n\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\n\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;","\"use strict\";\n\nvar enc = encodeURIComponent;\n\nmodule.exports = function (_ref) {\n  var query = _ref.query,\n      _ref$params = _ref.params,\n      params = _ref$params === void 0 ? {} : _ref$params,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {} : _ref$options;\n  var base = \"?query=\".concat(enc(query));\n  var qString = Object.keys(params).reduce(function (qs, param) {\n    return \"\".concat(qs, \"&\").concat(enc(\"$\".concat(param)), \"=\").concat(enc(JSON.stringify(params[param])));\n  }, base);\n  return Object.keys(options).reduce(function (qs, option) {\n    // Only include the option if it is truthy\n    return options[option] ? \"\".concat(qs, \"&\").concat(enc(option), \"=\").concat(enc(options[option])) : qs;\n  }, qString);\n};","module.exports = require('./lib/SanityObservableMinimal')\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar canReportError_1 = require(\"./util/canReportError\");\nvar toSubscriber_1 = require(\"./util/toSubscriber\");\nvar observable_1 = require(\"./symbol/observable\");\nvar pipe_1 = require(\"./util/pipe\");\nvar config_1 = require(\"./config\");\nvar Observable = (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber_1.toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config_1.config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError_1.canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[observable_1.observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipe_1.pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexports.Observable = Observable;\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config_1.config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar identity_1 = require(\"./identity\");\nfunction pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexports.pipe = pipe;\nfunction pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity_1.identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\nexports.pipeFromArray = pipeFromArray;\n//# sourceMappingURL=pipe.js.map","var baseUrl = 'https://docs.sanity.io/help/'\n\nmodule.exports = function generateHelpUrl(slug) {\n  return baseUrl + slug\n}\n","\"use strict\";\n\nmodule.exports = function (fn) {\n  var didCall = false;\n  var returnValue;\n  return function () {\n    if (didCall) {\n      return returnValue;\n    }\n\n    returnValue = fn.apply(void 0, arguments);\n    didCall = true;\n    return returnValue;\n  };\n};","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nfunction filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nexports.filter = filter;\nvar FilterOperator = (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = (function (_super) {\n    __extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=filter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isArray_1 = require(\"./util/isArray\");\nvar isObject_1 = require(\"./util/isObject\");\nvar isFunction_1 = require(\"./util/isFunction\");\nvar UnsubscriptionError_1 = require(\"./util/UnsubscriptionError\");\nvar Subscription = (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._ctorUnsubscribe = true;\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _ctorUnsubscribe = _a._ctorUnsubscribe, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction_1.isFunction(_unsubscribe)) {\n            if (_ctorUnsubscribe) {\n                this._unsubscribe = undefined;\n            }\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError_1.UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray_1.isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject_1.isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError_1.UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError_1.UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexports.Subscription = Subscription;\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError_1.UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isArray = (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isObject(x) {\n    return x !== null && typeof x === 'object';\n}\nexports.isObject = isObject;\n//# sourceMappingURL=isObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UnsubscriptionErrorImpl = (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexports.UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nfunction map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nexports.map = map;\nvar MapOperator = (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexports.MapOperator = MapOperator;\nvar MapSubscriber = (function (_super) {\n    __extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=map.js.map","'use strict';\nvar isObj = require('is-obj');\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Sources cannot be null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction assignKey(to, from, key) {\n\tvar val = from[key];\n\n\tif (val === undefined || val === null) {\n\t\treturn;\n\t}\n\n\tif (hasOwnProperty.call(to, key)) {\n\t\tif (to[key] === undefined || to[key] === null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object (' + key + ')');\n\t\t}\n\t}\n\n\tif (!hasOwnProperty.call(to, key) || !isObj(val)) {\n\t\tto[key] = val;\n\t} else {\n\t\tto[key] = assign(Object(to[key]), from[key]);\n\t}\n}\n\nfunction assign(to, from) {\n\tif (to === from) {\n\t\treturn to;\n\t}\n\n\tfrom = Object(from);\n\n\tfor (var key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tassignKey(to, from, key);\n\t\t}\n\t}\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tvar symbols = Object.getOwnPropertySymbols(from);\n\n\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\tassignKey(to, from, symbols[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n}\n\nmodule.exports = function deepAssign(target) {\n\ttarget = toObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tassign(target, arguments[s]);\n\t}\n\n\treturn target;\n};\n","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/filter'),\n    filter = _require.filter;\n\nvar _require2 = require('@sanity/observable/operators/map'),\n    map = _require2.map;\n\nvar validators = require('../validators');\n\nvar getSelection = require('../util/getSelection');\n\nvar encodeQueryString = require('./encodeQueryString');\n\nvar Transaction = require('./transaction');\n\nvar Patch = require('./patch');\n\nvar listen = require('./listen');\n\nvar excludeFalsey = function excludeFalsey(param, defValue) {\n  var value = typeof param === 'undefined' ? defValue : param;\n  return param === false ? undefined : value;\n};\n\nvar getMutationQuery = function getMutationQuery() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    returnIds: true,\n    returnDocuments: excludeFalsey(options.returnDocuments, true),\n    visibility: options.visibility || 'sync'\n  };\n};\n\nvar isResponse = function isResponse(event) {\n  return event.type === 'response';\n};\n\nvar getBody = function getBody(event) {\n  return event.body;\n};\n\nvar indexBy = function indexBy(docs, attr) {\n  return docs.reduce(function (indexed, doc) {\n    indexed[attr(doc)] = doc;\n    return indexed;\n  }, Object.create(null));\n};\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nvar getQuerySizeLimit = 11264;\nmodule.exports = {\n  listen: listen,\n  getDataUrl: function getDataUrl(operation, path) {\n    var config = this.clientConfig;\n    var catalog = config.gradientMode ? config.namespace : validators.hasDataset(config);\n    var baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n    var uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n    return (this.clientConfig.gradientMode ? uri : \"/data\".concat(uri)).replace(/\\/($|\\?)/, '$1');\n  },\n  fetch: function fetch(query, params) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var mapResponse = options.filterResponse === false ? function (res) {\n      return res;\n    } : function (res) {\n      return res.result;\n    };\n\n    var observable = this._dataRequest('query', {\n      query: query,\n      params: params\n    }, options).pipe(map(mapResponse));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocument: function getDocument(id) {\n    var options = {\n      uri: this.getDataUrl('doc', id),\n      json: true\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      return event.body.documents && event.body.documents[0];\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocuments: function getDocuments(ids) {\n    var options = {\n      uri: this.getDataUrl('doc', ids.join(',')),\n      json: true\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      var indexed = indexBy(event.body.documents || [], function (doc) {\n        return doc._id;\n      });\n      return ids.map(function (id) {\n        return indexed[id] || null;\n      });\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  create: function create(doc, options) {\n    return this._create(doc, 'create', options);\n  },\n  createIfNotExists: function createIfNotExists(doc, options) {\n    validators.requireDocumentId('createIfNotExists', doc);\n    return this._create(doc, 'createIfNotExists', options);\n  },\n  createOrReplace: function createOrReplace(doc, options) {\n    validators.requireDocumentId('createOrReplace', doc);\n    return this._create(doc, 'createOrReplace', options);\n  },\n  patch: function patch(selector, operations) {\n    return new Patch(selector, operations, this);\n  },\n  delete: function _delete(selection, options) {\n    return this.dataRequest('mutate', {\n      mutations: [{\n        delete: getSelection(selection)\n      }]\n    }, options);\n  },\n  mutate: function mutate(mutations, options) {\n    var mut = mutations instanceof Patch || mutations instanceof Transaction ? mutations.serialize() : mutations;\n    var muts = Array.isArray(mut) ? mut : [mut];\n    var transactionId = options && options.transactionId;\n    return this.dataRequest('mutate', {\n      mutations: muts,\n      transactionId: transactionId\n    }, options);\n  },\n  transaction: function transaction(operations) {\n    return new Transaction(operations, this);\n  },\n  dataRequest: function dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var request = this._dataRequest(endpoint, body, options);\n\n    return this.isPromiseAPI() ? toPromise(request) : request;\n  },\n  _dataRequest: function _dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var isMutation = endpoint === 'mutate'; // Check if the query string is within a configured threshold,\n    // in which case we can use GET. Otherwise, use POST.\n\n    var strQuery = !isMutation && encodeQueryString(body);\n    var useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n    var stringQuery = useGet ? strQuery : '';\n    var returnFirst = options.returnFirst;\n    var timeout = options.timeout,\n        token = options.token;\n    var uri = this.getDataUrl(endpoint, stringQuery);\n    var reqOptions = {\n      method: useGet ? 'GET' : 'POST',\n      uri: uri,\n      json: true,\n      body: useGet ? undefined : body,\n      query: isMutation && getMutationQuery(options),\n      timeout: timeout,\n      token: token\n    };\n    return this._requestObservable(reqOptions).pipe(filter(isResponse), map(getBody), map(function (res) {\n      if (!isMutation) {\n        return res;\n      } // Should we return documents?\n\n\n      var results = res.results || [];\n\n      if (options.returnDocuments) {\n        return returnFirst ? results[0] && results[0].document : results.map(function (mut) {\n          return mut.document;\n        });\n      } // Return a reduced subset\n\n\n      var key = returnFirst ? 'documentId' : 'documentIds';\n      var ids = returnFirst ? results[0] && results[0].id : results.map(function (mut) {\n        return mut.id;\n      });\n      return _defineProperty({\n        transactionId: res.transactionId,\n        results: results\n      }, key, ids);\n    }));\n  },\n  _create: function _create(doc, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var mutation = _defineProperty({}, op, doc);\n\n    var opts = assign({\n      returnFirst: true,\n      returnDocuments: true\n    }, options);\n    return this.dataRequest('mutate', {\n      mutations: [mutation]\n    }, opts);\n  }\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar Observable = require('@sanity/observable/minimal');\n\nvar polyfilledEventSource = require('@sanity/eventsource');\n\nvar pick = require('../util/pick');\n\nvar defaults = require('../util/defaults');\n\nvar encodeQueryString = require('./encodeQueryString');\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar once = require('../util/once');\n\nvar tokenWarning = ['Using token with listeners is not supported in browsers. ', \"For more info, see \".concat(generateHelpUrl('js-client-listener-tokens-browser'), \".\")]; // eslint-disable-next-line no-console\n\nvar printTokenWarning = once(function () {\n  return console.warn(tokenWarning.join(' '));\n});\nvar isWindowEventSource = Boolean(typeof window !== 'undefined' && window.EventSource);\nvar EventSource = isWindowEventSource ? window.EventSource // Native browser EventSource\n: polyfilledEventSource; // Node.js, IE etc\n\nvar possibleOptions = ['includePreviousRevision', 'includeResult', 'visibility', 'effectFormat'];\nvar defaultOptions = {\n  includeResult: true\n};\n\nmodule.exports = function listen(query, params) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var options = defaults(opts, defaultOptions);\n  var listenOpts = pick(options, possibleOptions);\n  var qs = encodeQueryString({\n    query: query,\n    params: params,\n    options: listenOpts\n  });\n  var _this$clientConfig = this.clientConfig,\n      url = _this$clientConfig.url,\n      token = _this$clientConfig.token,\n      withCredentials = _this$clientConfig.withCredentials;\n  var uri = \"\".concat(url).concat(this.getDataUrl('listen', qs));\n  var listenFor = options.events ? options.events : ['mutation'];\n  var shouldEmitReconnect = listenFor.indexOf('reconnect') !== -1;\n\n  if (token && isWindowEventSource) {\n    printTokenWarning();\n  }\n\n  var esOptions = {};\n\n  if (token || withCredentials) {\n    esOptions.withCredentials = true;\n  }\n\n  if (token) {\n    esOptions.headers = {\n      Authorization: \"Bearer \".concat(token)\n    };\n  }\n\n  return new Observable(function (observer) {\n    var es = getEventSource();\n    var reconnectTimer;\n    var stopped = false;\n\n    function onError() {\n      if (stopped) {\n        return;\n      }\n\n      emitReconnect(); // Allow event handlers of `emitReconnect` to cancel/close the reconnect attempt\n\n      if (stopped) {\n        return;\n      } // Unless we've explicitly stopped the ES (in which case `stopped` should be true),\n      // we should never be in a disconnected state. By default, EventSource will reconnect\n      // automatically, in which case it sets readyState to `CONNECTING`, but in some cases\n      // (like when a laptop lid is closed), it closes the connection. In these cases we need\n      // to explicitly reconnect.\n\n\n      if (es.readyState === EventSource.CLOSED) {\n        unsubscribe();\n        clearTimeout(reconnectTimer);\n        reconnectTimer = setTimeout(open, 100);\n      }\n    }\n\n    function onChannelError(err) {\n      observer.error(cooerceError(err));\n    }\n\n    function onMessage(evt) {\n      var event = parseEvent(evt);\n      return event instanceof Error ? observer.error(event) : observer.next(event);\n    }\n\n    function onDisconnect(evt) {\n      stopped = true;\n      unsubscribe();\n      observer.complete();\n    }\n\n    function unsubscribe() {\n      es.removeEventListener('error', onError, false);\n      es.removeEventListener('channelError', onChannelError, false);\n      es.removeEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return es.removeEventListener(type, onMessage, false);\n      });\n      es.close();\n    }\n\n    function emitReconnect() {\n      if (shouldEmitReconnect) {\n        observer.next({\n          type: 'reconnect'\n        });\n      }\n    }\n\n    function getEventSource() {\n      var evs = new EventSource(uri, esOptions);\n      evs.addEventListener('error', onError, false);\n      evs.addEventListener('channelError', onChannelError, false);\n      evs.addEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return evs.addEventListener(type, onMessage, false);\n      });\n      return evs;\n    }\n\n    function open() {\n      es = getEventSource();\n    }\n\n    function stop() {\n      stopped = true;\n      unsubscribe();\n    }\n\n    return stop;\n  });\n};\n\nfunction parseEvent(event) {\n  try {\n    var data = event.data && JSON.parse(event.data) || {};\n    return assign({\n      type: event.type\n    }, data);\n  } catch (err) {\n    return err;\n  }\n}\n\nfunction cooerceError(err) {\n  if (err instanceof Error) {\n    return err;\n  }\n\n  var evt = parseEvent(err);\n  return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\n\nfunction extractErrorMessage(err) {\n  if (!err.error) {\n    return err.message || 'Unknown listener error';\n  }\n\n  if (err.error.description) {\n    return err.error.description;\n  }\n\n  return typeof err.error === 'string' ? err.error : JSON.stringify(err.error, null, 2);\n}","\"use strict\";\n\nvar _require = require('rxjs/internal/Observable'),\n    Observable = _require.Observable;\n\nvar assign = require('object-assign');\n\nvar _require2 = require('../operators/map'),\n    map = _require2.map;\n\nvar _require3 = require('../operators/filter'),\n    filter = _require3.filter;\n\nvar _require4 = require('../operators/reduce'),\n    reduce = _require4.reduce;\n/*\n A minimal rxjs based observable that align as closely as possible with the current es-observable spec,\n without the static factory methods\n */\n\n\nfunction SanityObservableMinimal() {\n  Observable.apply(this, arguments); // eslint-disable-line prefer-rest-params\n}\n\nSanityObservableMinimal.prototype = Object.create(assign(Object.create(null), Observable.prototype));\nObject.defineProperty(SanityObservableMinimal.prototype, 'constructor', {\n  value: SanityObservableMinimal,\n  enumerable: false,\n  writable: true,\n  configurable: true\n});\n\nSanityObservableMinimal.prototype.lift = function lift(operator) {\n  var observable = new SanityObservableMinimal();\n  observable.source = this;\n  observable.operator = operator;\n  return observable;\n};\n\nfunction createDeprecatedMemberOp(name, op) {\n  var hasWarned = false;\n  return function deprecatedOperator() {\n    if (!hasWarned) {\n      hasWarned = true;\n      console.warn(new Error(\"Calling observable.\".concat(name, \"(...) is deprecated. Please use observable.pipe(\").concat(name, \"(...)) instead\")));\n    }\n\n    return this.pipe(op.apply(this, arguments));\n  };\n}\n\nSanityObservableMinimal.prototype.map = createDeprecatedMemberOp('map', map);\nSanityObservableMinimal.prototype.filter = createDeprecatedMemberOp('filter', filter);\nSanityObservableMinimal.prototype.reduce = createDeprecatedMemberOp('filter', reduce);\nmodule.exports = SanityObservableMinimal;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nfunction canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber_1.Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\nexports.canReportError = canReportError;\n//# sourceMappingURL=canReportError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nvar rxSubscriber_1 = require(\"../symbol/rxSubscriber\");\nvar Observer_1 = require(\"../Observer\");\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber_1.Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber_1.rxSubscriber]) {\n            return nextOrObserver[rxSubscriber_1.rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber_1.Subscriber(Observer_1.empty);\n    }\n    return new Subscriber_1.Subscriber(nextOrObserver, error, complete);\n}\nexports.toSubscriber = toSubscriber;\n//# sourceMappingURL=toSubscriber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.observable = (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction identity(x) {\n    return x;\n}\nexports.identity = identity;\n//# sourceMappingURL=identity.js.map","exports.reduce = require('rxjs/internal/operators/reduce').reduce\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar scan_1 = require(\"./scan\");\nvar takeLast_1 = require(\"./takeLast\");\nvar defaultIfEmpty_1 = require(\"./defaultIfEmpty\");\nvar pipe_1 = require(\"../util/pipe\");\nfunction reduce(accumulator, seed) {\n    if (arguments.length >= 2) {\n        return function reduceOperatorFunctionWithSeed(source) {\n            return pipe_1.pipe(scan_1.scan(accumulator, seed), takeLast_1.takeLast(1), defaultIfEmpty_1.defaultIfEmpty(seed))(source);\n        };\n    }\n    return function reduceOperatorFunction(source) {\n        return pipe_1.pipe(scan_1.scan(function (acc, value, index) { return accumulator(acc, value, index + 1); }), takeLast_1.takeLast(1))(source);\n    };\n}\nexports.reduce = reduce;\n//# sourceMappingURL=reduce.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nfunction scan(accumulator, seed) {\n    var hasSeed = false;\n    if (arguments.length >= 2) {\n        hasSeed = true;\n    }\n    return function scanOperatorFunction(source) {\n        return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n    };\n}\nexports.scan = scan;\nvar ScanOperator = (function () {\n    function ScanOperator(accumulator, seed, hasSeed) {\n        if (hasSeed === void 0) { hasSeed = false; }\n        this.accumulator = accumulator;\n        this.seed = seed;\n        this.hasSeed = hasSeed;\n    }\n    ScanOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n    };\n    return ScanOperator;\n}());\nvar ScanSubscriber = (function (_super) {\n    __extends(ScanSubscriber, _super);\n    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this._seed = _seed;\n        _this.hasSeed = hasSeed;\n        _this.index = 0;\n        return _this;\n    }\n    Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n        get: function () {\n            return this._seed;\n        },\n        set: function (value) {\n            this.hasSeed = true;\n            this._seed = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScanSubscriber.prototype._next = function (value) {\n        if (!this.hasSeed) {\n            this.seed = value;\n            this.destination.next(value);\n        }\n        else {\n            return this._tryNext(value);\n        }\n    };\n    ScanSubscriber.prototype._tryNext = function (value) {\n        var index = this.index++;\n        var result;\n        try {\n            result = this.accumulator(this.seed, value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n        this.seed = result;\n        this.destination.next(result);\n    };\n    return ScanSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=scan.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nvar ArgumentOutOfRangeError_1 = require(\"../util/ArgumentOutOfRangeError\");\nvar empty_1 = require(\"../observable/empty\");\nfunction takeLast(count) {\n    return function takeLastOperatorFunction(source) {\n        if (count === 0) {\n            return empty_1.empty();\n        }\n        else {\n            return source.lift(new TakeLastOperator(count));\n        }\n    };\n}\nexports.takeLast = takeLast;\nvar TakeLastOperator = (function () {\n    function TakeLastOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;\n        }\n    }\n    TakeLastOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n    };\n    return TakeLastOperator;\n}());\nvar TakeLastSubscriber = (function (_super) {\n    __extends(TakeLastSubscriber, _super);\n    function TakeLastSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.ring = new Array();\n        _this.count = 0;\n        return _this;\n    }\n    TakeLastSubscriber.prototype._next = function (value) {\n        var ring = this.ring;\n        var total = this.total;\n        var count = this.count++;\n        if (ring.length < total) {\n            ring.push(value);\n        }\n        else {\n            var index = count % total;\n            ring[index] = value;\n        }\n    };\n    TakeLastSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        var count = this.count;\n        if (count > 0) {\n            var total = this.count >= this.total ? this.total : this.count;\n            var ring = this.ring;\n            for (var i = 0; i < total; i++) {\n                var idx = (count++) % total;\n                destination.next(ring[idx]);\n            }\n        }\n        destination.complete();\n    };\n    return TakeLastSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=takeLast.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ArgumentOutOfRangeErrorImpl = (function () {\n    function ArgumentOutOfRangeErrorImpl() {\n        Error.call(this);\n        this.message = 'argument out of range';\n        this.name = 'ArgumentOutOfRangeError';\n        return this;\n    }\n    ArgumentOutOfRangeErrorImpl.prototype = Object.create(Error.prototype);\n    return ArgumentOutOfRangeErrorImpl;\n})();\nexports.ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nexports.EMPTY = new Observable_1.Observable(function (subscriber) { return subscriber.complete(); });\nfunction empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : exports.EMPTY;\n}\nexports.empty = empty;\nfunction emptyScheduled(scheduler) {\n    return new Observable_1.Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nfunction defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) { defaultValue = null; }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nexports.defaultIfEmpty = defaultIfEmpty;\nvar DefaultIfEmptyOperator = (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar DefaultIfEmptySubscriber = (function (_super) {\n    __extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map","/* eslint-disable no-var */\nvar evs = require('@rexxars/eventsource-polyfill')\n\nmodule.exports = window.EventSource || evs.EventSource\n","/*\n * EventSource polyfill\n * Originally published by sc AmvTek srl (https://github.com/amvtek/EventSource) - devel@amvtek.com\n * Forked by Espen Hovlandsdal to fix a few issues + publish latest version\n */\n\n;(function (root, factory) {\n  /* global define */\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory()\n  } else {\n    // Browser globals (root is window)\n    if (global.EventSource && !global._eventSourceImportPrefix) {\n      return\n    }\n\n    var evsImportName = (root._eventSourceImportPrefix || '') + 'EventSource'\n    root[evsImportName] = factory()\n  }\n})(typeof self === 'undefined' ? this : self, function () {\n  var EventSource = function (url, options) {\n    if (!url || typeof url != 'string') {\n      throw new SyntaxError('Not enough arguments')\n    }\n\n    this.URL = url\n    this.setOptions(options)\n    var evs = this\n    setTimeout(function () {\n      evs.poll()\n    }, 0)\n  }\n\n  EventSource.prototype = {\n    CONNECTING: 0,\n\n    OPEN: 1,\n\n    CLOSED: 2,\n\n    defaultOptions: {\n      loggingEnabled: false,\n\n      loggingPrefix: 'eventsource',\n\n      interval: 500, // milliseconds\n\n      bufferSizeLimit: 256 * 1024, // bytes\n\n      silentTimeout: 300000, // milliseconds\n\n      getArgs: {\n        evs_buffer_size_limit: 256 * 1024,\n      },\n\n      xhrHeaders: {\n        Accept: 'text/event-stream',\n        'Cache-Control': 'no-cache',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    },\n\n    setOptions: function (options) {\n      var defaults = this.defaultOptions\n      var option\n\n      // set all default options...\n      for (option in defaults) {\n        if (defaults.hasOwnProperty(option)) {\n          this[option] = defaults[option]\n        }\n      }\n\n      // override with what is in options\n      for (option in options) {\n        if (option in defaults && options.hasOwnProperty(option)) {\n          this[option] = options[option]\n        }\n      }\n\n      // if getArgs option is enabled\n      // ensure evs_buffer_size_limit corresponds to bufferSizeLimit\n      if (this.getArgs && this.bufferSizeLimit) {\n        this.getArgs.evs_buffer_size_limit = this.bufferSizeLimit\n      }\n\n      // if console is not available, force loggingEnabled to false\n      // eslint-disable-next-line no-console\n      if (typeof console === 'undefined' || typeof console.log === 'undefined') {\n        this.loggingEnabled = false\n      }\n    },\n\n    log: function (message) {\n      if (this.loggingEnabled) {\n        // eslint-disable-next-line no-console\n        console.log('[' + this.loggingPrefix + ']:' + message)\n      }\n    },\n\n    poll: function () {\n      try {\n        if (this.readyState == this.CLOSED) {\n          return\n        }\n\n        this.cleanup()\n        this.readyState = this.CONNECTING\n        this.cursor = 0\n        this.cache = ''\n        this._xhr = new this.XHR(this)\n        this.resetNoActivityTimer()\n      } catch (err) {\n        // in an attempt to silence the errors\n        this.log('There were errors inside the pool try-catch')\n        this.dispatchEvent('error', {type: 'error', data: err.message})\n      }\n    },\n\n    pollAgain: function (interval) {\n      // schedule poll to be called after interval milliseconds\n      var evs = this\n      evs.readyState = evs.CONNECTING\n      evs.dispatchEvent('error', {\n        type: 'error',\n        data: 'Reconnecting ',\n      })\n      this._pollTimer = setTimeout(function () {\n        evs.poll()\n      }, interval || 0)\n    },\n\n    cleanup: function () {\n      this.log('evs cleaning up')\n\n      if (this._pollTimer) {\n        clearInterval(this._pollTimer)\n        this._pollTimer = null\n      }\n\n      if (this._noActivityTimer) {\n        clearInterval(this._noActivityTimer)\n        this._noActivityTimer = null\n      }\n\n      if (this._xhr) {\n        this._xhr.abort()\n        this._xhr = null\n      }\n    },\n\n    resetNoActivityTimer: function () {\n      if (this.silentTimeout) {\n        if (this._noActivityTimer) {\n          clearInterval(this._noActivityTimer)\n        }\n        var evs = this\n        this._noActivityTimer = setTimeout(function () {\n          evs.log('Timeout! silentTImeout:' + evs.silentTimeout)\n          evs.pollAgain()\n        }, this.silentTimeout)\n      }\n    },\n\n    close: function () {\n      this.readyState = this.CLOSED\n      this.log('Closing connection. readyState: ' + this.readyState)\n      this.cleanup()\n    },\n\n    _onxhrdata: function () {\n      var request = this._xhr\n\n      if (request.isReady() && !request.hasError()) {\n        // reset the timer, as we have activity\n        this.resetNoActivityTimer()\n\n        // move this EventSource to OPEN state...\n        if (this.readyState == this.CONNECTING) {\n          this.readyState = this.OPEN\n          this.dispatchEvent('open', {type: 'open'})\n        }\n\n        var buffer = request.getBuffer()\n\n        if (buffer.length > this.bufferSizeLimit) {\n          this.log('buffer.length > this.bufferSizeLimit')\n          this.pollAgain()\n        }\n\n        if (this.cursor == 0 && buffer.length > 0) {\n          // skip byte order mark \\uFEFF character if it starts the stream\n          if (buffer.substring(0, 1) == '\\uFEFF') {\n            this.cursor = 1\n          }\n        }\n\n        var lastMessageIndex = this.lastMessageIndex(buffer)\n        if (lastMessageIndex[0] >= this.cursor) {\n          var newcursor = lastMessageIndex[1]\n          var toparse = buffer.substring(this.cursor, newcursor)\n          this.parseStream(toparse)\n          this.cursor = newcursor\n        }\n\n        // if request is finished, reopen the connection\n        if (request.isDone()) {\n          this.log('request.isDone(). reopening the connection')\n          this.pollAgain(this.interval)\n        }\n      } else if (this.readyState !== this.CLOSED) {\n        this.log('this.readyState !== this.CLOSED')\n        this.pollAgain(this.interval)\n\n        //MV: Unsure why an error was previously dispatched\n      }\n    },\n\n    parseStream: function (chunk) {\n      // normalize line separators (\\r\\n,\\r,\\n) to \\n\n      // remove white spaces that may precede \\n\n      chunk = this.cache + this.normalizeToLF(chunk)\n\n      var events = chunk.split('\\n\\n')\n\n      var i, j, eventType, datas, line, retry\n\n      for (i = 0; i < events.length - 1; i++) {\n        eventType = 'message'\n        datas = []\n        var parts = events[i].split('\\n')\n\n        for (j = 0; j < parts.length; j++) {\n          line = this.trimWhiteSpace(parts[j])\n\n          if (line.indexOf('event') == 0) {\n            eventType = line.replace(/event:?\\s*/, '')\n          } else if (line.indexOf('retry') == 0) {\n            retry = parseInt(line.replace(/retry:?\\s*/, ''), 10)\n            if (!isNaN(retry)) {\n              this.interval = retry\n            }\n          } else if (line.indexOf('data') == 0) {\n            datas.push(line.replace(/data:?\\s*/, ''))\n          } else if (line.indexOf('id:') == 0) {\n            this.lastEventId = line.replace(/id:?\\s*/, '')\n          } else if (line.indexOf('id') == 0) {\n            // this resets the id\n\n            this.lastEventId = null\n          }\n        }\n\n        if (datas.length && this.readyState != this.CLOSED) {\n          // dispatch a new event\n          var event = new MessageEvent(\n            eventType,\n            datas.join('\\n'),\n            typeof window !== 'undefined' && typeof window.location !== 'undefined'\n              ? window.location.origin\n              : null,\n            this.lastEventId\n          )\n          this.dispatchEvent(eventType, event)\n        }\n      }\n\n      this.cache = events[events.length - 1]\n    },\n\n    dispatchEvent: function (type, event) {\n      var handlers = this['_' + type + 'Handlers']\n\n      if (handlers) {\n        for (var i = 0; i < handlers.length; i++) {\n          handlers[i].call(this, event)\n        }\n      }\n\n      if (this['on' + type]) {\n        this['on' + type].call(this, event)\n      }\n    },\n\n    addEventListener: function (type, handler) {\n      if (!this['_' + type + 'Handlers']) {\n        this['_' + type + 'Handlers'] = []\n      }\n\n      this['_' + type + 'Handlers'].push(handler)\n    },\n\n    removeEventListener: function (type, handler) {\n      var handlers = this['_' + type + 'Handlers']\n      if (!handlers) {\n        return\n      }\n      for (var i = handlers.length - 1; i >= 0; --i) {\n        if (handlers[i] === handler) {\n          handlers.splice(i, 1)\n          break\n        }\n      }\n    },\n\n    _pollTimer: null,\n\n    _noactivityTimer: null,\n\n    _xhr: null,\n\n    lastEventId: null,\n\n    cache: '',\n\n    cursor: 0,\n\n    onerror: null,\n\n    onmessage: null,\n\n    onopen: null,\n\n    readyState: 0,\n\n    // ===================================================================\n    // helpers functions\n    // those are attached to prototype to ease reuse and testing...\n\n    urlWithParams: function (baseURL, params) {\n      var encodedArgs = []\n\n      if (params) {\n        var key, urlarg\n        var urlize = encodeURIComponent\n\n        for (key in params) {\n          if (params.hasOwnProperty(key)) {\n            urlarg = urlize(key) + '=' + urlize(params[key])\n            encodedArgs.push(urlarg)\n          }\n        }\n      }\n\n      if (encodedArgs.length > 0) {\n        if (baseURL.indexOf('?') == -1) return baseURL + '?' + encodedArgs.join('&')\n        return baseURL + '&' + encodedArgs.join('&')\n      }\n      return baseURL\n    },\n\n    lastMessageIndex: function (text) {\n      var ln2 = text.lastIndexOf('\\n\\n')\n      var lr2 = text.lastIndexOf('\\r\\r')\n      var lrln2 = text.lastIndexOf('\\r\\n\\r\\n')\n\n      if (lrln2 > Math.max(ln2, lr2)) {\n        return [lrln2, lrln2 + 4]\n      }\n      return [Math.max(ln2, lr2), Math.max(ln2, lr2) + 2]\n    },\n\n    trimWhiteSpace: function (str) {\n      // to remove whitespaces left and right of string\n\n      var reTrim = /^(\\s|\\u00A0)+|(\\s|\\u00A0)+$/g\n      return str.replace(reTrim, '')\n    },\n\n    normalizeToLF: function (str) {\n      // replace \\r and \\r\\n with \\n\n      return str.replace(/\\r\\n|\\r/g, '\\n')\n    },\n  }\n\n  if (isOldIE()) {\n    EventSource.isPolyfill = 'IE_8-9'\n\n    // patch EventSource defaultOptions\n    var defaults = EventSource.prototype.defaultOptions\n    defaults.xhrHeaders = null // no headers will be sent\n    defaults.getArgs.evs_preamble = 2048 + 8\n\n    // EventSource will send request using Internet Explorer XDomainRequest\n    EventSource.prototype.XHR = function (evs) {\n      /* global XDomainRequest */\n      var request = new XDomainRequest()\n      this._request = request\n\n      // set handlers\n      request.onprogress = function () {\n        request._ready = true\n        evs._onxhrdata()\n      }\n\n      request.onload = function () {\n        this._loaded = true\n        evs._onxhrdata()\n      }\n\n      request.onerror = function () {\n        this._failed = true\n        evs.readyState = evs.CLOSED\n        evs.dispatchEvent('error', {\n          type: 'error',\n          data: 'XDomainRequest error',\n        })\n      }\n\n      request.ontimeout = function () {\n        this._failed = true\n        evs.readyState = evs.CLOSED\n        evs.dispatchEvent('error', {\n          type: 'error',\n          data: 'XDomainRequest timed out',\n        })\n      }\n\n      // XDomainRequest does not allow setting custom headers\n      // If EventSource has enabled the use of GET arguments\n      // we add parameters to URL so that server can adapt the stream...\n      var reqGetArgs = {}\n      if (evs.getArgs) {\n        // copy evs.getArgs in reqGetArgs\n        var defaultArgs = evs.getArgs\n        for (var key in defaultArgs) {\n          if (defaultArgs.hasOwnProperty(key)) {\n            reqGetArgs[key] = defaultArgs[key]\n          }\n        }\n        if (evs.lastEventId) {\n          reqGetArgs.evs_last_event_id = evs.lastEventId\n        }\n      }\n      // send the request\n\n      request.open('GET', evs.urlWithParams(evs.URL, reqGetArgs))\n      request.send()\n    }\n\n    EventSource.prototype.XHR.prototype = {\n      useXDomainRequest: true,\n\n      _request: null,\n\n      _ready: false, // true when progress events are dispatched\n\n      _loaded: false, // true when request has been loaded\n\n      _failed: false, // true if when request is in error\n\n      isReady: function () {\n        return this._request._ready\n      },\n\n      isDone: function () {\n        return this._request._loaded\n      },\n\n      hasError: function () {\n        return this._request._failed\n      },\n\n      getBuffer: function () {\n        var rv = ''\n        try {\n          rv = this._request.responseText || ''\n        } catch (err) {\n          // intentional noop\n        }\n        return rv\n      },\n\n      abort: function () {\n        if (this._request) {\n          this._request.abort()\n        }\n      },\n    }\n  } else {\n    EventSource.isPolyfill = 'XHR'\n\n    // EventSource will send request using XMLHttpRequest\n    EventSource.prototype.XHR = function (evs) {\n      var request = new XMLHttpRequest()\n      this._request = request\n      evs._xhr = this\n\n      // set handlers\n      request.onreadystatechange = function () {\n        if (request.readyState > 1 && evs.readyState != evs.CLOSED) {\n          if (request.status == 200 || (request.status >= 300 && request.status < 400)) {\n            evs._onxhrdata()\n          } else {\n            request._failed = true\n            evs.readyState = evs.CLOSED\n            evs.dispatchEvent('error', {\n              type: 'error',\n              data: 'The server responded with ' + request.status,\n            })\n            evs.close()\n          }\n        }\n      }\n\n      request.onprogress = function () {\n        // intentional noop\n      }\n\n      request.open('GET', evs.urlWithParams(evs.URL, evs.getArgs), true)\n\n      var headers = evs.xhrHeaders // maybe null\n      for (var header in headers) {\n        if (headers.hasOwnProperty(header)) {\n          request.setRequestHeader(header, headers[header])\n        }\n      }\n      if (evs.lastEventId) {\n        request.setRequestHeader('Last-Event-Id', evs.lastEventId)\n      }\n\n      request.send()\n    }\n\n    EventSource.prototype.XHR.prototype = {\n      useXDomainRequest: false,\n\n      _request: null,\n\n      _failed: false, // true if we have had errors...\n\n      isReady: function () {\n        return this._request.readyState >= 2\n      },\n\n      isDone: function () {\n        return this._request.readyState == 4\n      },\n\n      hasError: function () {\n        return this._failed || this._request.status >= 400\n      },\n\n      getBuffer: function () {\n        var rv = ''\n        try {\n          rv = this._request.responseText || ''\n        } catch (err) {\n          // intentional noop\n        }\n        return rv\n      },\n\n      abort: function () {\n        if (this._request) {\n          this._request.abort()\n        }\n      },\n    }\n  }\n\n  function MessageEvent(type, data, origin, lastEventId) {\n    this.bubbles = false\n    this.cancelBubble = false\n    this.cancelable = false\n    this.data = data || null\n    this.origin = origin || ''\n    this.lastEventId = lastEventId || ''\n    this.type = type || 'message'\n  }\n\n  function isOldIE() {\n    //return true if we are in IE8 or IE9\n    return Boolean(\n      typeof window !== 'undefined' &&\n        window.XDomainRequest &&\n        window.XMLHttpRequest &&\n        new XMLHttpRequest().responseType === undefined\n    )\n  }\n\n  return EventSource\n})\n","\"use strict\";\n\nmodule.exports = function (obj, props) {\n  return props.reduce(function (selection, prop) {\n    if (typeof obj[prop] === 'undefined') {\n      return selection;\n    }\n\n    selection[prop] = obj[prop];\n    return selection;\n  }, {});\n};","\"use strict\";\n\nmodule.exports = function (obj, defaults) {\n  return Object.keys(defaults).concat(Object.keys(obj)).reduce(function (target, prop) {\n    target[prop] = typeof obj[prop] === 'undefined' ? defaults[prop] : obj[prop];\n    return target;\n  }, {});\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar validate = require('../validators');\n\nfunction DatasetsClient(client) {\n  this.request = client.request.bind(client);\n}\n\nassign(DatasetsClient.prototype, {\n  create: function create(name, options) {\n    return this._modify('PUT', name, options);\n  },\n  edit: function edit(name, options) {\n    return this._modify('PATCH', name, options);\n  },\n  delete: function _delete(name) {\n    return this._modify('DELETE', name);\n  },\n  list: function list() {\n    return this.request({\n      uri: '/datasets'\n    });\n  },\n  _modify: function _modify(method, name, body) {\n    validate.dataset(name);\n    return this.request({\n      method: method,\n      uri: \"/datasets/\".concat(name),\n      body: body\n    });\n  }\n});\nmodule.exports = DatasetsClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction ProjectsClient(client) {\n  this.client = client;\n}\n\nassign(ProjectsClient.prototype, {\n  list: function list() {\n    return this.client.request({\n      uri: '/projects'\n    });\n  },\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/projects/\".concat(id)\n    });\n  }\n});\nmodule.exports = ProjectsClient;","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/map'),\n    map = _require.map;\n\nvar _require2 = require('@sanity/observable/operators/filter'),\n    filter = _require2.filter;\n\nvar queryString = require('../http/queryString');\n\nvar validators = require('../validators');\n\nfunction AssetsClient(client) {\n  this.client = client;\n}\n\nfunction toDocument(body) {\n  // todo: rewrite to just return body.document in a while\n  var document = body.document;\n  Object.defineProperty(document, 'document', {\n    enumerable: false,\n    get: function get() {\n      // eslint-disable-next-line no-console\n      console.warn('The promise returned from client.asset.upload(...) now resolves with the asset document');\n      return document;\n    }\n  });\n  return document;\n}\n\nfunction optionsFromFile(opts, file) {\n  if (typeof window === 'undefined' || !(file instanceof window.File)) {\n    return opts;\n  }\n\n  return assign({\n    filename: opts.preserveFilename === false ? undefined : file.name,\n    contentType: file.type\n  }, opts);\n}\n\nassign(AssetsClient.prototype, {\n  /**\n   * Upload an asset\n   *\n   * @param  {String} assetType `image` or `file`\n   * @param  {File|Blob|Buffer|ReadableStream} body File to upload\n   * @param  {Object}  opts Options for the upload\n   * @param  {Boolean} opts.preserveFilename Whether or not to preserve the original filename (default: true)\n   * @param  {String}  opts.filename Filename for this file (optional)\n   * @param  {Number}  opts.timeout  Milliseconds to wait before timing the request out (default: 0)\n   * @param  {String}  opts.contentType Mime type of the file\n   * @param  {Array}   opts.extract Array of metadata parts to extract from image.\n   *                                 Possible values: `location`, `exif`, `image`, `palette`\n   * @param  {String}  opts.label Label\n   * @param  {String}  opts.title Title\n   * @param  {String}  opts.description Description\n   * @param  {String}  opts.creditLine The credit to person(s) and/or organization(s) required by the supplier of the image to be used when published\n   * @param  {Object}  opts.source Source data (when the asset is from an external service)\n   * @param  {String}  opts.source.id The (u)id of the asset within the source, i.e. 'i-f323r1E'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.name The name of the source, i.e. 'unsplash'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.url A url to where to find the asset, or get more info about it in the source\n   *                                  Optional\n   * @return {Promise} Resolves with the created asset document\n   */\n  upload: function upload(assetType, body) {\n    var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    validators.validateAssetType(assetType); // If an empty array is given, explicitly set `none` to override API defaults\n\n    var meta = opts.extract || undefined;\n\n    if (meta && !meta.length) {\n      meta = ['none'];\n    }\n\n    var dataset = validators.hasDataset(this.client.clientConfig);\n    var assetEndpoint = assetType === 'image' ? 'images' : 'files';\n    var options = optionsFromFile(opts, body);\n    var label = options.label,\n        title = options.title,\n        description = options.description,\n        creditLine = options.creditLine,\n        filename = options.filename,\n        source = options.source;\n    var query = {\n      label: label,\n      title: title,\n      description: description,\n      filename: filename,\n      meta: meta,\n      creditLine: creditLine\n    };\n\n    if (source) {\n      query.sourceId = source.id;\n      query.sourceName = source.name;\n      query.sourceUrl = source.url;\n    }\n\n    var observable = this.client._requestObservable({\n      method: 'POST',\n      timeout: options.timeout || 0,\n      uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n      headers: options.contentType ? {\n        'Content-Type': options.contentType\n      } : {},\n      query: query,\n      body: body\n    });\n\n    return this.client.isPromiseAPI() ? observable.pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return toDocument(event.body);\n    })).toPromise() : observable;\n  },\n  delete: function _delete(type, id) {\n    // eslint-disable-next-line no-console\n    console.warn('client.assets.delete() is deprecated, please use client.delete(<document-id>)');\n    var docId = id || '';\n\n    if (!/^(image|file)-/.test(docId)) {\n      docId = \"\".concat(type, \"-\").concat(docId);\n    } else if (type._id) {\n      // We could be passing an entire asset document instead of an ID\n      docId = type._id;\n    }\n\n    validators.hasDataset(this.client.clientConfig);\n    return this.client.delete(docId);\n  },\n  getImageUrl: function getImageUrl(ref, query) {\n    var id = ref._ref || ref;\n\n    if (typeof id !== 'string') {\n      throw new Error('getImageUrl() needs either an object with a _ref, or a string with an asset document ID');\n    }\n\n    if (!/^image-[A-Za-z0-9_]+-\\d+x\\d+-[a-z]{1,5}$/.test(id)) {\n      throw new Error(\"Unsupported asset ID \\\"\".concat(id, \"\\\". URL generation only works for auto-generated IDs.\"));\n    }\n\n    var _id$split = id.split('-'),\n        _id$split2 = _slicedToArray(_id$split, 4),\n        assetId = _id$split2[1],\n        size = _id$split2[2],\n        format = _id$split2[3];\n\n    validators.hasDataset(this.client.clientConfig);\n    var _this$client$clientCo = this.client.clientConfig,\n        projectId = _this$client$clientCo.projectId,\n        dataset = _this$client$clientCo.dataset;\n    var qs = query ? queryString(query) : '';\n    return \"https://cdn.sanity.io/images/\".concat(projectId, \"/\").concat(dataset, \"/\").concat(assetId, \"-\").concat(size, \".\").concat(format).concat(qs);\n  }\n});\nmodule.exports = AssetsClient;","\"use strict\";\n\nmodule.exports = function (params) {\n  var qs = [];\n\n  for (var key in params) {\n    if (params.hasOwnProperty(key)) {\n      qs.push(\"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key])));\n    }\n  }\n\n  return qs.length > 0 ? \"?\".concat(qs.join('&')) : '';\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction UsersClient(client) {\n  this.client = client;\n}\n\nassign(UsersClient.prototype, {\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/users/\".concat(id)\n    });\n  }\n});\nmodule.exports = UsersClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction AuthClient(client) {\n  this.client = client;\n}\n\nassign(AuthClient.prototype, {\n  getLoginProviders: function getLoginProviders() {\n    return this.client.request({\n      uri: '/auth/providers'\n    });\n  },\n  logout: function logout() {\n    return this.client.request({\n      uri: '/auth/logout',\n      method: 'POST'\n    });\n  }\n});\nmodule.exports = AuthClient;","\"use strict\";\n\n/* eslint-disable no-empty-function, no-process-env */\nvar getIt = require('get-it');\n\nvar assign = require('object-assign');\n\nvar observable = require('get-it/lib/middleware/observable');\n\nvar jsonRequest = require('get-it/lib/middleware/jsonRequest');\n\nvar jsonResponse = require('get-it/lib/middleware/jsonResponse');\n\nvar progress = require('get-it/lib/middleware/progress');\n\nvar Observable = require('@sanity/observable/minimal');\n\nvar _require = require('./errors'),\n    ClientError = _require.ClientError,\n    ServerError = _require.ServerError;\n\nvar httpError = {\n  onResponse: function onResponse(res) {\n    if (res.statusCode >= 500) {\n      throw new ServerError(res);\n    } else if (res.statusCode >= 400) {\n      throw new ClientError(res);\n    }\n\n    return res;\n  }\n}; // Environment-specific middleware.\n\nvar envSpecific = require('./nodeMiddleware');\n\nvar middleware = envSpecific.concat([jsonRequest(), jsonResponse(), progress(), httpError, observable({\n  implementation: Observable\n})]);\nvar request = getIt(middleware);\n\nfunction httpRequest(options) {\n  var requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n  return requester(assign({\n    maxRedirects: 0\n  }, options));\n}\n\nhttpRequest.defaultRequester = request;\nhttpRequest.ClientError = ClientError;\nhttpRequest.ServerError = ServerError;\nmodule.exports = httpRequest;","module.exports = require('./lib-node')\n","const pubsub = require('nano-pubsub')\nconst middlewareReducer = require('./util/middlewareReducer')\nconst processOptions = require('./middleware/defaultOptionsProcessor')\nconst validateOptions = require('./middleware/defaultOptionsValidator')\nconst httpRequest = require('./request') // node-request in node, browser-request in browsers\n\nconst channelNames = ['request', 'response', 'progress', 'error', 'abort']\nconst middlehooks = [\n  'processOptions',\n  'validateOptions',\n  'interceptRequest',\n  'finalizeOptions',\n  'onRequest',\n  'onResponse',\n  'onError',\n  'onReturn',\n  'onHeaders'\n]\n\nmodule.exports = function createRequester(initMiddleware = []) {\n  const loadedMiddleware = []\n  const middleware = middlehooks.reduce(\n    (ware, name) => {\n      ware[name] = ware[name] || []\n      return ware\n    },\n    {\n      processOptions: [processOptions],\n      validateOptions: [validateOptions]\n    }\n  )\n\n  function request(opts) {\n    const channels = channelNames.reduce((target, name) => {\n      target[name] = pubsub()\n      return target\n    }, {})\n\n    // Prepare a middleware reducer that can be reused throughout the lifecycle\n    const applyMiddleware = middlewareReducer(middleware)\n\n    // Parse the passed options\n    const options = applyMiddleware('processOptions', opts)\n\n    // Validate the options\n    applyMiddleware('validateOptions', options)\n\n    // Build a context object we can pass to child handlers\n    const context = {options, channels, applyMiddleware}\n\n    // We need to hold a reference to the current, ongoing request,\n    // in order to allow cancellation. In the case of the retry middleware,\n    // a new request might be triggered\n    let ongoingRequest = null\n    const unsubscribe = channels.request.subscribe(ctx => {\n      // Let request adapters (node/browser) perform the actual request\n      ongoingRequest = httpRequest(ctx, (err, res) => onResponse(err, res, ctx))\n    })\n\n    // If we abort the request, prevent further requests from happening,\n    // and be sure to cancel any ongoing request (obviously)\n    channels.abort.subscribe(() => {\n      unsubscribe()\n      if (ongoingRequest) {\n        ongoingRequest.abort()\n      }\n    })\n\n    // See if any middleware wants to modify the return value - for instance\n    // the promise or observable middlewares\n    const returnValue = applyMiddleware('onReturn', channels, context)\n\n    // If return value has been modified by a middleware, we expect the middleware\n    // to publish on the 'request' channel. If it hasn't been modified, we want to\n    // trigger it right away\n    if (returnValue === channels) {\n      channels.request.publish(context)\n    }\n\n    return returnValue\n\n    function onResponse(reqErr, res, ctx) {\n      let error = reqErr\n      let response = res\n\n      // We're processing non-errors first, in case a middleware converts the\n      // response into an error (for instance, status >= 400 == HttpError)\n      if (!error) {\n        try {\n          response = applyMiddleware('onResponse', res, ctx)\n        } catch (err) {\n          response = null\n          error = err\n        }\n      }\n\n      // Apply error middleware - if middleware return the same (or a different) error,\n      // publish as an error event. If we *don't* return an error, assume it has been handled\n      error = error && applyMiddleware('onError', error, ctx)\n\n      // Figure out if we should publish on error/response channels\n      if (error) {\n        channels.error.publish(error)\n      } else if (response) {\n        channels.response.publish(response)\n      }\n    }\n  }\n\n  request.use = function use(newMiddleware) {\n    if (!newMiddleware) {\n      throw new Error('Tried to add middleware that resolved to falsey value')\n    }\n\n    if (typeof newMiddleware === 'function') {\n      throw new Error(\n        'Tried to add middleware that was a function. It probably expects you to pass options to it.'\n      )\n    }\n\n    if (newMiddleware.onReturn && middleware.onReturn.length > 0) {\n      throw new Error(\n        'Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event'\n      )\n    }\n\n    middlehooks.forEach(key => {\n      if (newMiddleware[key]) {\n        middleware[key].push(newMiddleware[key])\n      }\n    })\n\n    loadedMiddleware.push(newMiddleware)\n    return request\n  }\n\n  request.clone = function clone() {\n    return createRequester(loadedMiddleware)\n  }\n\n  initMiddleware.forEach(request.use)\n\n  return request\n}\n","module.exports = function Pubsub() {\n  var subscribers = []\n  return {\n    subscribe: subscribe,\n    publish: publish\n  }\n  function subscribe(subscriber) {\n    subscribers.push(subscriber)\n    return function unsubscribe() {\n      var idx = subscribers.indexOf(subscriber)\n      if (idx > -1) {\n        subscribers.splice(idx, 1)\n      }\n    }\n  }\n  function publish() {\n    for (var i = 0; i < subscribers.length; i++) {\n      subscribers[i].apply(null, arguments)\n    }\n  }\n}","module.exports = middleware => {\n  const applyMiddleware = (hook, defaultValue, ...args) => {\n    const bailEarly = hook === 'onError'\n\n    let value = defaultValue\n    for (let i = 0; i < middleware[hook].length; i++) {\n      const handler = middleware[hook][i]\n      value = handler(value, ...args)\n\n      if (bailEarly && !value) {\n        break\n      }\n    }\n\n    return value\n  }\n\n  return applyMiddleware\n}\n","const objectAssign = require('object-assign')\nconst urlParse = require('url-parse')\n\nconst isReactNative = typeof navigator === 'undefined' ? false : navigator.product === 'ReactNative'\n\nconst has = Object.prototype.hasOwnProperty\nconst defaultOptions = {timeout: isReactNative ? 60000 : 120000}\n\nmodule.exports = opts => {\n  const options =\n    typeof opts === 'string'\n      ? objectAssign({url: opts}, defaultOptions)\n      : objectAssign({}, defaultOptions, opts)\n\n  // Parse URL into parts\n  const url = urlParse(\n    options.url,\n    {}, // Don't use current browser location\n    true // Parse query strings\n  )\n\n  // Normalize timeouts\n  options.timeout = normalizeTimeout(options.timeout)\n\n  // Shallow-merge (override) existing query params\n  if (options.query) {\n    url.query = objectAssign({}, url.query, removeUndefined(options.query))\n  }\n\n  // Implicit POST if we have not specified a method but have a body\n  options.method =\n    options.body && !options.method ? 'POST' : (options.method || 'GET').toUpperCase()\n\n  // Stringify URL\n  options.url = url.toString(stringifyQueryString)\n\n  return options\n}\n\nfunction stringifyQueryString(obj) {\n  const pairs = []\n  for (const key in obj) {\n    if (has.call(obj, key)) {\n      push(key, obj[key])\n    }\n  }\n\n  return pairs.length ? pairs.join('&') : ''\n\n  function push(key, val) {\n    if (Array.isArray(val)) {\n      val.forEach(item => push(key, item))\n    } else {\n      pairs.push([key, val].map(encodeURIComponent).join('='))\n    }\n  }\n}\n\nfunction normalizeTimeout(time) {\n  if (time === false || time === 0) {\n    return false\n  }\n\n  if (time.connect || time.socket) {\n    return time\n  }\n\n  const delay = Number(time)\n  if (isNaN(delay)) {\n    return normalizeTimeout(defaultOptions.timeout)\n  }\n\n  return {connect: delay, socket: delay}\n}\n\nfunction removeUndefined(obj) {\n  const target = {}\n  for (const key in obj) {\n    if (obj[key] !== undefined) {\n      target[key] = obj[key]\n    }\n  }\n  return target\n}\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i\n  , whitespace = '[\\\\x09\\\\x0A\\\\x0B\\\\x0C\\\\x0D\\\\x20\\\\xA0\\\\u1680\\\\u180E\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200A\\\\u202F\\\\u205F\\\\u3000\\\\u2028\\\\u2029\\\\uFEFF]'\n  , left = new RegExp('^'+ whitespace +'+');\n\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(left, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address) {          // Sanitize what is left of the address\n    return address.replace('\\\\', '/');\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d+)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address) {\n  address = trimLeft(address);\n  var match = protocolre.exec(address);\n\n  return {\n    protocol: match[1] ? match[1].toLowerCase() : '',\n    slashes: !!match[2],\n    rest: match[3]\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '');\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:'\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:'\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result = protocol + (url.slashes ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","const validUrl = /^https?:\\/\\//i\n\nmodule.exports = options => {\n  if (!validUrl.test(options.url)) {\n    throw new Error(`\"${options.url}\" is not a valid URL`)\n  }\n}\n","module.exports = require('./node-request')\n","/* eslint max-depth: [\"error\", 4] */\nconst sameOrigin = require('same-origin')\nconst parseHeaders = require('parse-headers')\nconst noop = function() {\n  /* intentional noop */\n}\n\nconst win = window\nconst XmlHttpRequest = win.XMLHttpRequest || noop\nconst hasXhr2 = 'withCredentials' in new XmlHttpRequest()\nconst XDomainRequest = hasXhr2 ? XmlHttpRequest : win.XDomainRequest\nconst adapter = 'xhr'\n\nmodule.exports = (context, callback) => {\n  const opts = context.options\n  const options = context.applyMiddleware('finalizeOptions', opts)\n  const timers = {}\n\n  // Deep-checking window.location because of react native, where `location` doesn't exist\n  const cors = win && win.location && !sameOrigin(win.location.href, options.url)\n\n  // Allow middleware to inject a response, for instance in the case of caching or mocking\n  const injectedResponse = context.applyMiddleware('interceptRequest', undefined, {\n    adapter,\n    context\n  })\n\n  // If middleware injected a response, treat it as we normally would and return it\n  // Do note that the injected response has to be reduced to a cross-environment friendly response\n  if (injectedResponse) {\n    const cbTimer = setTimeout(callback, 0, null, injectedResponse)\n    const cancel = () => clearTimeout(cbTimer)\n    return {abort: cancel}\n  }\n\n  // We'll want to null out the request on success/failure\n  let xhr = cors ? new XDomainRequest() : new XmlHttpRequest()\n\n  const isXdr = win.XDomainRequest && xhr instanceof win.XDomainRequest\n  const headers = options.headers\n\n  // Request state\n  let aborted = false\n  let loaded = false\n  let timedOut = false\n\n  // Apply event handlers\n  xhr.onerror = onError\n  xhr.ontimeout = onError\n  xhr.onabort = () => {\n    aborted = true\n  }\n\n  // IE9 must have onprogress be set to a unique function\n  xhr.onprogress = () => {\n    /* intentional noop */\n  }\n\n  const loadEvent = isXdr ? 'onload' : 'onreadystatechange'\n  xhr[loadEvent] = () => {\n    // Prevent request from timing out\n    resetTimers()\n\n    if (aborted || (xhr.readyState !== 4 && !isXdr)) {\n      return\n    }\n\n    // Will be handled by onError\n    if (xhr.status === 0) {\n      return\n    }\n\n    onLoad()\n  }\n\n  // @todo two last options to open() is username/password\n  xhr.open(\n    options.method,\n    options.url,\n    true // Always async\n  )\n\n  // Some options need to be applied after open\n  xhr.withCredentials = !!options.withCredentials\n\n  // Set headers\n  if (headers && xhr.setRequestHeader) {\n    for (const key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key])\n      }\n    }\n  } else if (headers && isXdr) {\n    throw new Error('Headers cannot be set on an XDomainRequest object')\n  }\n\n  if (options.rawBody) {\n    xhr.responseType = 'arraybuffer'\n  }\n\n  // Let middleware know we're about to do a request\n  context.applyMiddleware('onRequest', {options, adapter, request: xhr, context})\n\n  xhr.send(options.body || null)\n\n  // Figure out which timeouts to use (if any)\n  const delays = options.timeout\n  if (delays) {\n    timers.connect = setTimeout(() => timeoutRequest('ETIMEDOUT'), delays.connect)\n  }\n\n  return {abort}\n\n  function abort() {\n    aborted = true\n\n    if (xhr) {\n      xhr.abort()\n    }\n  }\n\n  function timeoutRequest(code) {\n    timedOut = true\n    xhr.abort()\n    const error = new Error(\n      code === 'ESOCKETTIMEDOUT'\n        ? `Socket timed out on request to ${options.url}`\n        : `Connection timed out on request to ${options.url}`\n    )\n    error.code = code\n    context.channels.error.publish(error)\n  }\n\n  function resetTimers() {\n    if (!delays) {\n      return\n    }\n\n    stopTimers()\n    timers.socket = setTimeout(() => timeoutRequest('ESOCKETTIMEDOUT'), delays.socket)\n  }\n\n  function stopTimers() {\n    // Only clear the connect timeout if we've got a connection\n    if (aborted || (xhr.readyState >= 2 && timers.connect)) {\n      clearTimeout(timers.connect)\n    }\n\n    if (timers.socket) {\n      clearTimeout(timers.socket)\n    }\n  }\n\n  function onError() {\n    if (loaded) {\n      return\n    }\n\n    // Clean up\n    stopTimers()\n    loaded = true\n    xhr = null\n\n    // Annoyingly, details are extremely scarce and hidden from us.\n    // We only really know that it is a network error\n    const err = new Error(`Network error while attempting to reach ${options.url}`)\n    err.isNetworkError = true\n    err.request = options\n    callback(err)\n  }\n\n  function reduceResponse() {\n    let statusCode = xhr.status\n    let statusMessage = xhr.statusText\n\n    if (isXdr && statusCode === undefined) {\n      // IE8 CORS GET successful response doesn't have a status field, but body is fine\n      statusCode = 200\n    } else if (statusCode > 12000 && statusCode < 12156) {\n      // Yet another IE quirk where it emits weird status codes on network errors\n      // https://support.microsoft.com/en-us/kb/193625\n      return onError()\n    } else {\n      // Another IE bug where HTTP 204 somehow ends up as 1223\n      statusCode = xhr.status === 1223 ? 204 : xhr.status\n      statusMessage = xhr.status === 1223 ? 'No Content' : statusMessage\n    }\n\n    return {\n      body: xhr.response || xhr.responseText,\n      url: options.url,\n      method: options.method,\n      headers: isXdr ? {} : parseHeaders(xhr.getAllResponseHeaders()),\n      statusCode: statusCode,\n      statusMessage: statusMessage\n    }\n  }\n\n  function onLoad() {\n    if (aborted || loaded || timedOut) {\n      return\n    }\n\n    if (xhr.status === 0) {\n      onError(new Error('Unknown XHR error'))\n      return\n    }\n\n    // Prevent being called twice\n    stopTimers()\n    loaded = true\n    callback(null, reduceResponse())\n  }\n}\n","'use strict';\n\nvar url = require('url');\n\nmodule.exports = function(uri1, uri2, ieMode) {\n    if (uri1 === uri2) {\n        return true;\n    }\n\n    var url1 = url.parse(uri1, false, true);\n    var url2 = url.parse(uri2, false, true);\n\n    var url1Port = url1.port|0 || (url1.protocol === 'https' ? 443 : 80);\n    var url2Port = url2.port|0 || (url2.protocol === 'https' ? 443 : 80);\n\n    var match = {\n        proto: url1.protocol === url2.protocol,\n        hostname: url1.hostname === url2.hostname,\n        port: url1Port === url2Port\n    };\n\n    return ((match.proto && match.hostname) && (match.port || ieMode));\n};","/**\n * This file is only used for the browser version of `same-origin`.\n * Used to bring down the size of the browser bundle.\n */\n'use strict';\n\nvar regex = /^(?:(?:(?:([^:\\/#\\?]+:)?(?:(?:\\/\\/)((?:((?:[^:@\\/#\\?]+)(?:\\:(?:[^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((?:\\/?(?:[^\\/\\?#]+\\/+)*)(?:[^\\?#]*)))?(\\?[^#]+)?)(#.*)?/;\n\nmodule.exports = {\n    regex: regex,\n    parse: function(url) {\n        var match = regex.exec(url);\n        if (!match) {\n            return {};\n        }\n\n        return {\n            protocol: (match[1] || '').toLowerCase() || undefined,\n            hostname: (match[5] || '').toLowerCase() || undefined,\n            port: match[6] || undefined\n        };\n    }\n};","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","const global = require('../util/global')\nconst objectAssign = require('object-assign')\n\nmodule.exports = (opts = {}) => {\n  const Observable = opts.implementation || global.Observable\n  if (!Observable) {\n    throw new Error(\n      '`Observable` is not available in global scope, and no implementation was passed'\n    )\n  }\n\n  return {\n    onReturn: (channels, context) =>\n      new Observable(observer => {\n        channels.error.subscribe(err => observer.error(err))\n        channels.progress.subscribe(event => observer.next(objectAssign({type: 'progress'}, event)))\n        channels.response.subscribe(response => {\n          observer.next(objectAssign({type: 'response'}, response))\n          observer.complete()\n        })\n\n        channels.request.publish(context)\n        return () => channels.abort.publish()\n      })\n  }\n}\n","/* eslint-disable no-negated-condition */\nif (typeof window !== 'undefined') {\n  module.exports = window\n} else if (typeof global !== 'undefined') {\n  module.exports = global\n} else if (typeof self !== 'undefined') {\n  module.exports = self\n} else {\n  module.exports = {}\n}\n","const objectAssign = require('object-assign')\nconst isPlainObject = require('is-plain-object')\n\nconst serializeTypes = ['boolean', 'string', 'number']\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nmodule.exports = () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize =\n      !isStream &&\n      !isBuffer(body) &&\n      (serializeTypes.indexOf(typeof body) !== -1 || Array.isArray(body) || isPlainObject(body))\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return objectAssign({}, options, {\n      body: JSON.stringify(options.body),\n      headers: objectAssign({}, options.headers, {\n        'Content-Type': 'application/json'\n      })\n    })\n  }\n})\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","const objectAssign = require('object-assign')\n\nmodule.exports = opts => ({\n  onResponse: response => {\n    const contentType = response.headers['content-type'] || ''\n    const shouldDecode = (opts && opts.force) || contentType.indexOf('application/json') !== -1\n    if (!response.body || !contentType || !shouldDecode) {\n      return response\n    }\n\n    return objectAssign({}, response, {body: tryParse(response.body)})\n  },\n\n  processOptions: options =>\n    objectAssign({}, options, {\n      headers: objectAssign({Accept: 'application/json'}, options.headers)\n    })\n})\n\nfunction tryParse(body) {\n  try {\n    return JSON.parse(body)\n  } catch (err) {\n    err.message = `Failed to parsed response body as JSON: ${err.message}`\n    throw err\n  }\n}\n","module.exports = require('./node-progress')\n","module.exports = () => ({\n  onRequest: evt => {\n    if (evt.adapter !== 'xhr') {\n      return\n    }\n\n    const xhr = evt.request\n    const context = evt.context\n\n    if ('upload' in xhr && 'onprogress' in xhr.upload) {\n      xhr.upload.onprogress = handleProgress('upload')\n    }\n\n    if ('onprogress' in xhr) {\n      xhr.onprogress = handleProgress('download')\n    }\n\n    function handleProgress(stage) {\n      return event => {\n        const percent = event.lengthComputable ? (event.loaded / event.total) * 100 : -1\n        context.channels.progress.publish({\n          stage,\n          percent,\n          total: event.total,\n          loaded: event.loaded,\n          lengthComputable: event.lengthComputable\n        })\n      }\n    }\n  }\n})\n","\"use strict\";\n\nvar makeError = require('make-error');\n\nvar assign = require('object-assign');\n\nfunction ClientError(res) {\n  var props = extractErrorProps(res);\n  ClientError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction ServerError(res) {\n  var props = extractErrorProps(res);\n  ServerError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction extractErrorProps(res) {\n  var body = res.body;\n  var props = {\n    response: res,\n    statusCode: res.statusCode,\n    responseBody: stringifyBody(body, res)\n  }; // API/Boom style errors ({statusCode, error, message})\n\n  if (body.error && body.message) {\n    props.message = \"\".concat(body.error, \" - \").concat(body.message);\n    return props;\n  } // Query/database errors ({error: {description, other, arb, props}})\n\n\n  if (body.error && body.error.description) {\n    props.message = body.error.description;\n    props.details = body.error;\n    return props;\n  } // Other, more arbitrary errors\n\n\n  props.message = body.error || body.message || httpErrorMessage(res);\n  return props;\n}\n\nfunction httpErrorMessage(res) {\n  var statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : '';\n  return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\n\nfunction stringifyBody(body, res) {\n  var contentType = (res.headers['content-type'] || '').toLowerCase();\n  var isJson = contentType.indexOf('application/json') !== -1;\n  return isJson ? JSON.stringify(body, null, 2) : body;\n}\n\nmakeError(ClientError);\nmakeError(ServerError);\nexports.ClientError = ClientError;\nexports.ServerError = ServerError;","// ISC @ Julien Fontanet\n\n\"use strict\";\n\n// ===================================================================\n\nvar construct = typeof Reflect !== \"undefined\" ? Reflect.construct : undefined;\nvar defineProperty = Object.defineProperty;\n\n// -------------------------------------------------------------------\n\nvar captureStackTrace = Error.captureStackTrace;\nif (captureStackTrace === undefined) {\n  captureStackTrace = function captureStackTrace(error) {\n    var container = new Error();\n\n    defineProperty(error, \"stack\", {\n      configurable: true,\n      get: function getStack() {\n        var stack = container.stack;\n\n        // Replace property with value for faster future accesses.\n        defineProperty(this, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true,\n        });\n\n        return stack;\n      },\n      set: function setStack(stack) {\n        defineProperty(error, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true,\n        });\n      },\n    });\n  };\n}\n\n// -------------------------------------------------------------------\n\nfunction BaseError(message) {\n  if (message !== undefined) {\n    defineProperty(this, \"message\", {\n      configurable: true,\n      value: message,\n      writable: true,\n    });\n  }\n\n  var cname = this.constructor.name;\n  if (cname !== undefined && cname !== this.name) {\n    defineProperty(this, \"name\", {\n      configurable: true,\n      value: cname,\n      writable: true,\n    });\n  }\n\n  captureStackTrace(this, this.constructor);\n}\n\nBaseError.prototype = Object.create(Error.prototype, {\n  // See: https://github.com/JsCommunity/make-error/issues/4\n  constructor: {\n    configurable: true,\n    value: BaseError,\n    writable: true,\n  },\n});\n\n// -------------------------------------------------------------------\n\n// Sets the name of a function if possible (depends of the JS engine).\nvar setFunctionName = (function() {\n  function setFunctionName(fn, name) {\n    return defineProperty(fn, \"name\", {\n      configurable: true,\n      value: name,\n    });\n  }\n  try {\n    var f = function() {};\n    setFunctionName(f, \"foo\");\n    if (f.name === \"foo\") {\n      return setFunctionName;\n    }\n  } catch (_) {}\n})();\n\n// -------------------------------------------------------------------\n\nfunction makeError(constructor, super_) {\n  if (super_ == null || super_ === Error) {\n    super_ = BaseError;\n  } else if (typeof super_ !== \"function\") {\n    throw new TypeError(\"super_ should be a function\");\n  }\n\n  var name;\n  if (typeof constructor === \"string\") {\n    name = constructor;\n    constructor =\n      construct !== undefined\n        ? function() {\n            return construct(super_, arguments, this.constructor);\n          }\n        : function() {\n            super_.apply(this, arguments);\n          };\n\n    // If the name can be set, do it once and for all.\n    if (setFunctionName !== undefined) {\n      setFunctionName(constructor, name);\n      name = undefined;\n    }\n  } else if (typeof constructor !== \"function\") {\n    throw new TypeError(\"constructor should be either a string or a function\");\n  }\n\n  // Also register the super constructor also as `constructor.super_` just\n  // like Node's `util.inherits()`.\n  //\n  // eslint-disable-next-line dot-notation\n  constructor.super_ = constructor[\"super\"] = super_;\n\n  var properties = {\n    constructor: {\n      configurable: true,\n      value: constructor,\n      writable: true,\n    },\n  };\n\n  // If the name could not be set on the constructor, set it on the\n  // prototype.\n  if (name !== undefined) {\n    properties.name = {\n      configurable: true,\n      value: name,\n      writable: true,\n    };\n  }\n  constructor.prototype = Object.create(super_.prototype, properties);\n\n  return constructor;\n}\nexports = module.exports = makeError;\nexports.BaseError = BaseError;\n","\"use strict\";\n\nmodule.exports = [];","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar projectHeader = 'X-Sanity-Project-ID';\n\nmodule.exports = function (config) {\n  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var headers = {};\n  var token = overrides.token || config.token;\n\n  if (token) {\n    headers.Authorization = \"Bearer \".concat(token);\n  }\n\n  if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n    headers[projectHeader] = config.projectId;\n  }\n\n  var withCredentials = Boolean(typeof overrides.withCredentials === 'undefined' ? config.token || config.withCredentials : overrides.withCredentials);\n  var timeout = typeof overrides.timeout === 'undefined' ? config.timeout : overrides.timeout;\n  return assign({}, overrides, {\n    headers: assign({}, headers, overrides.headers || {}),\n    timeout: typeof timeout === 'undefined' ? 5 * 60 * 1000 : timeout,\n    json: true,\n    withCredentials: withCredentials\n  });\n};","\"use strict\";\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar assign = require('object-assign');\n\nvar validate = require('./validators');\n\nvar once = require('./util/once');\n\nvar defaultCdnHost = 'apicdn.sanity.io';\nvar defaultConfig = {\n  apiHost: 'https://api.sanity.io',\n  useProjectHostname: true,\n  gradientMode: false,\n  isPromiseAPI: true\n};\nvar LOCALHOSTS = ['localhost', '127.0.0.1', '0.0.0.0'];\n\nvar isLocal = function isLocal(host) {\n  return LOCALHOSTS.indexOf(host) !== -1;\n}; // eslint-disable-next-line no-console\n\n\nvar createWarningPrinter = function createWarningPrinter(message) {\n  return once(function () {\n    return console.warn(message.join(' '));\n  });\n};\n\nvar printCdnWarning = createWarningPrinter(['You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and', \"cheaper. Think about it! For more info, see \".concat(generateHelpUrl('js-client-cdn-configuration'), \".\"), 'To hide this warning, please set the `useCdn` option to either `true` or `false` when creating', 'the client.']);\nvar printBrowserTokenWarning = createWarningPrinter(['You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.', \"See \".concat(generateHelpUrl('js-client-browser-token'), \" for more information and how to hide this warning.\")]);\nvar printCdnTokenWarning = createWarningPrinter(['You have set `useCdn` to `true` while also specifying a token. This is usually not what you', 'want. The CDN cannot be used with an authorization token, since private data cannot be cached.', \"See \".concat(generateHelpUrl('js-client-usecdn-token'), \" for more information.\")]);\nexports.defaultConfig = defaultConfig;\n\nexports.initConfig = function (config, prevConfig) {\n  var newConfig = assign({}, defaultConfig, prevConfig, config);\n  var gradientMode = newConfig.gradientMode;\n  var projectBased = !gradientMode && newConfig.useProjectHostname;\n\n  if (typeof Promise === 'undefined') {\n    var helpUrl = generateHelpUrl('js-client-promise-polyfill');\n    throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n  }\n\n  if (gradientMode && !newConfig.namespace) {\n    throw new Error('Configuration must contain `namespace` when running in gradient mode');\n  }\n\n  if (projectBased && !newConfig.projectId) {\n    throw new Error('Configuration must contain `projectId`');\n  }\n\n  var isBrowser = typeof window !== 'undefined' && window.location && window.location.hostname;\n  var isLocalhost = isBrowser && isLocal(window.location.hostname);\n\n  if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n    printBrowserTokenWarning();\n  } else if ((!isBrowser || isLocalhost) && newConfig.useCdn && newConfig.token) {\n    printCdnTokenWarning();\n  } else if (typeof newConfig.useCdn === 'undefined') {\n    printCdnWarning();\n  }\n\n  if (projectBased) {\n    validate.projectId(newConfig.projectId);\n  }\n\n  if (!gradientMode && newConfig.dataset) {\n    validate.dataset(newConfig.dataset, newConfig.gradientMode);\n  }\n\n  newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n  newConfig.useCdn = Boolean(newConfig.useCdn) && !newConfig.token && !newConfig.withCredentials;\n\n  if (newConfig.gradientMode) {\n    newConfig.url = newConfig.apiHost;\n    newConfig.cdnUrl = newConfig.apiHost;\n  } else {\n    var hostParts = newConfig.apiHost.split('://', 2);\n    var protocol = hostParts[0];\n    var host = hostParts[1];\n    var cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n\n    if (newConfig.useProjectHostname) {\n      newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v1\");\n      newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v1\");\n    } else {\n      newConfig.url = \"\".concat(newConfig.apiHost, \"/v1\");\n      newConfig.cdnUrl = newConfig.url;\n    }\n  }\n\n  return newConfig;\n};"],"sourceRoot":""}